var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function a(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t,n,r){if(e){const a=o(e,t,n,r);return e[0](a)}}function o(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function u(e,t,n,r,a,s,l){const u=function(e,t,n,r){if(e[2]&&r){const a=e[2](r(n));if(void 0===t.dirty)return a;if("object"==typeof a){const e=[],n=Math.max(t.dirty.length,a.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|a[r];return e}return t.dirty|a}return t.dirty}(t,r,a,s);if(u){const a=o(t,n,r,l);e.p(a,u)}}function i(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function p(e){e.parentNode.removeChild(e)}function d(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function m(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function h(e){return document.createTextNode(e)}function g(){return h(" ")}function $(){return h("")}function _(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function v(e){return function(t){return t.preventDefault(),e.call(this,t)}}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function b(e){return""===e?null:+e}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function w(e,t){e.value=null==t?"":t}function C(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function k(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function z(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function j(e,t,n){e.classList[n?"add":"remove"](t)}let N;function P(e){N=e}function S(){if(!N)throw new Error("Function called outside component initialization");return N}function A(){const e=S();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const a=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach(t=>{t.call(e,a)})}}}function E(e,t){S().$$.context.set(e,t)}function O(e){return S().$$.context.get(e)}function T(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const q=[],L=[],F=[],M=[],I=Promise.resolve();let R=!1;function U(e){F.push(e)}function B(e){M.push(e)}let J=!1;const G=new Set;function D(){if(!J){J=!0;do{for(let e=0;e<q.length;e+=1){const t=q[e];P(t),H(t.$$)}for(P(null),q.length=0;L.length;)L.pop()();for(let e=0;e<F.length;e+=1){const t=F[e];G.has(t)||(G.add(t),t())}F.length=0}while(q.length);for(;M.length;)M.pop()();R=!1,J=!1,G.clear()}}function H(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(U)}}const Q=new Set;let Z;function K(){Z={r:0,c:[],p:Z}}function X(){Z.r||r(Z.c),Z=Z.p}function W(e,t){e&&e.i&&(Q.delete(e),e.i(t))}function V(e,t,n,r){if(e&&e.o){if(Q.has(e))return;Q.add(e),Z.c.push(()=>{Q.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function Y(e,t){V(e,1,1,()=>{t.delete(e.key)})}function ee(e,t,n,r,a,s,l,o,u,i,c,p){let d=e.length,f=s.length,m=d;const h={};for(;m--;)h[e[m].key]=m;const g=[],$=new Map,_=new Map;for(m=f;m--;){const e=p(a,s,m),o=n(e);let u=l.get(o);u?r&&u.p(e,t):(u=i(o,e),u.c()),$.set(o,g[m]=u),o in h&&_.set(o,Math.abs(m-h[o]))}const v=new Set,x=new Set;function b(e){W(e,1),e.m(o,c),l.set(e.key,e),c=e.first,f--}for(;d&&f;){const t=g[f-1],n=e[d-1],r=t.key,a=n.key;t===n?(c=t.first,d--,f--):$.has(a)?!l.has(r)||v.has(r)?b(t):x.has(a)?d--:_.get(r)>_.get(a)?(x.add(r),b(t)):(v.add(a),d--):(u(n,l),d--)}for(;d--;){const t=e[d];$.has(t.key)||u(t,l)}for(;f;)b(g[f-1]);return g}function te(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function ne(e){e&&e.c()}function re(e,n,s){const{fragment:l,on_mount:o,on_destroy:u,after_update:i}=e.$$;l&&l.m(n,s),U(()=>{const n=o.map(t).filter(a);u?u.push(...n):r(n),e.$$.on_mount=[]}),i.forEach(U)}function ae(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function se(e,t){-1===e.$$.dirty[0]&&(q.push(e),R||(R=!0,I.then(D)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function le(t,a,s,l,o,u,i=[-1]){const c=N;P(t);const d=a.props||{},f=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:n(),dirty:i,skip_bound:!1};let m=!1;if(f.ctx=s?s(t,d,(e,n,...r)=>{const a=r.length?r[0]:n;return f.ctx&&o(f.ctx[e],f.ctx[e]=a)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](a),m&&se(t,e)),n}):[],f.update(),m=!0,r(f.before_update),f.fragment=!!l&&l(f.ctx),a.target){if(a.hydrate){const e=function(e){return Array.from(e.childNodes)}(a.target);f.fragment&&f.fragment.l(e),e.forEach(p)}else f.fragment&&f.fragment.c();a.intro&&W(t.$$.fragment),re(t,a.target,a.anchor),D()}P(c)}class oe{$destroy(){ae(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var ue="1.0.0+master.f91aff8e";const ie=[];function ce(e){const t=e.substr(2),n=t.match(/^component\/(.*)$/),r=t.match(/^settings$/);return{component_id:n?"component-"+n[1]:null,component_selector:n?"#component-"+n[1]:null,component_path:n?n[1]:null,settings:!!r,root:""==t}}function pe(e){let t=[];function n(){if(t)for(let e of t)e&&(console.log("route away",e),e.classList.remove("target"));if(t=e(ce(window.location.hash)),t)for(let e of t)e&&(e.classList.add("target"),console.log("route to",e))}return window.addEventListener("hashchange",n,!1),window.addEventListener("load",n,!1),n}function de(e){return Object.keys(e).filter(t=>null!==e[t]&&void 0!==e[t]).reduce((t,n)=>(t[n]=e[n],t),{})}function fe(e,...t){let n=e;for(let e=0;e<t.length;e++)n=t[e](n);return n}function me(e){return e.reduce((e,t)=>Math.max(e,t.id+1),e.length)}function he(t){let n,r,a,s,l,o,u;return{c(){n=f("input"),C(n,"width",parseInt(t[1])+1+"em"),x(n,"type","number"),x(n,"placeholder",r=t[2].placeholder),x(n,"min",a=t[2].min),x(n,"max",s=t[2].max),x(n,"step",l=t[2].step)},m(e,r){c(e,n,r),w(n,t[0]),o||(u=_(n,"input",t[8]),o=!0)},p(e,[t]){2&t&&C(n,"width",parseInt(e[1])+1+"em"),4&t&&r!==(r=e[2].placeholder)&&x(n,"placeholder",r),4&t&&a!==(a=e[2].min)&&x(n,"min",a),4&t&&s!==(s=e[2].max)&&x(n,"max",s),4&t&&l!==(l=e[2].step)&&x(n,"step",l),1&t&&b(n.value)!==e[0]&&w(n,e[0])},i:e,o:e,d(e){e&&p(n),o=!1,u()}}}function ge(e,t,n){let r,{value:a=null}=t,{def:s=null}=t,{force:l=!1}=t,{min:o=null}=t,{max:u=null}=t,{step:i=null}=t,{size:c=5}=t;return e.$$set=e=>{"value"in e&&n(0,a=e.value),"def"in e&&n(3,s=e.def),"force"in e&&n(4,l=e.force),"min"in e&&n(5,o=e.min),"max"in e&&n(6,u=e.max),"step"in e&&n(7,i=e.step),"size"in e&&n(1,c=e.size)},e.$$.update=()=>{248&e.$$.dirty&&n(2,r={placeholder:s,min:l?s:o,max:l?s:u,step:i||"any"})},[a,c,r,s,l,o,u,i,function(){a=b(this.value),n(0,a)}]}class $e extends oe{constructor(e){super(),le(this,e,ge,he,s,{value:0,def:3,force:4,min:5,max:6,step:7,size:1})}}function _e(e){let t,n,r;return{c(){t=f("option"),n=h(e[3]),r=h(" (par dÃ©faut)"),t.__value=e[5],t.value=t.__value},m(e,a){c(e,t,a),i(t,n),i(t,r)},p(e,t){8&t&&y(n,e[3])},d(e){e&&p(t)}}}function ve(e){let t,n,r,a,s,o=null!=e[0]&&_e(e);const d=e[10].default,m=l(d,e,e[9],null);return{c(){t=f("select"),o&&o.c(),n=$(),m&&m.c(),x(t,"class","svelte-if5jk6"),void 0===e[2]&&U(()=>e[11].call(t)),j(t,"error",e[4])},m(l,u){c(l,t,u),o&&o.m(t,null),i(t,n),m&&m.m(t,null),k(t,e[2]),e[12](t),r=!0,a||(s=_(t,"change",e[11]),a=!0)},p(e,[r]){null!=e[0]?o?o.p(e,r):(o=_e(e),o.c(),o.m(t,n)):o&&(o.d(1),o=null),m&&m.p&&512&r&&u(m,d,e,e[9],r,null,null),4&r&&k(t,e[2]),16&r&&j(t,"error",e[4])},i(e){r||(W(m,e),r=!0)},o(e){V(m,e),r=!1},d(n){n&&p(t),o&&o.d(),m&&m.d(n),e[12](null),a=!1,s()}}}function xe(e,t,n){let r,{$$slots:a={},$$scope:s}=t,{value:l=null}=t,{def:o=null}=t,{force:u=!1}=t,{init:i=null}=t;null!=i&&null==l&&(l=i);let c,p=o,d=Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2),f=null!=o&&null==l?d:l;return e.$$set=e=>{"value"in e&&n(6,l=e.value),"def"in e&&n(0,o=e.def),"force"in e&&n(7,u=e.force),"init"in e&&n(8,i=e.init),"$$scope"in e&&n(9,s=e.$$scope)},e.$$.update=()=>{5&e.$$.dirty&&n(6,l=null!=o&&f==d?null:f),2&e.$$.dirty&&function(e){if(!e)return;let t=Array.from(e.options).find(e=>e.value==o);t&&n(3,p=t.textContent)}(c),193&e.$$.dirty&&n(4,r=u&&null!=l&&l!=o)},[o,c,f,p,r,d,l,u,i,s,a,function(){f=z(this),n(2,f)},function(e){L[e?"unshift":"push"](()=>{c=e,n(1,c),n(5,d)})}]}class be extends oe{constructor(e){super(),le(this,e,xe,ve,s,{value:6,def:0,force:7,init:8})}}function ye(t){let n,r,a,s;return{c(){n=f("input"),r=h(" min"),C(n,"width",t[2]+1+"em"),x(n,"type","number"),x(n,"placeholder",t[1]),x(n,"step",t[3]),x(n,"title",t[4])},m(e,l){c(e,n,l),w(n,t[0]),c(e,r,l),a||(s=_(n,"input",t[5]),a=!0)},p(e,[t]){4&t&&C(n,"width",e[2]+1+"em"),2&t&&x(n,"placeholder",e[1]),8&t&&x(n,"step",e[3]),16&t&&x(n,"title",e[4]),1&t&&b(n.value)!==e[0]&&w(n,e[0])},i:e,o:e,d(e){e&&p(n),e&&p(r),a=!1,s()}}}function we(e,t,n){let{value:r=null}=t,{def:a=null}=t,{size:s=5}=t,{step:l="any"}=t,{title:o=""}=t;return e.$$set=e=>{"value"in e&&n(0,r=e.value),"def"in e&&n(1,a=e.def),"size"in e&&n(2,s=e.size),"step"in e&&n(3,l=e.step),"title"in e&&n(4,o=e.title)},[r,a,s,l,o,function(){r=b(this.value),n(0,r)}]}class Ce extends oe{constructor(e){super(),le(this,e,we,ye,s,{value:0,def:1,size:2,step:3,title:4})}}function ke(t){let n,r,a,s,l;return{c(){n=f("input"),x(n,"type","checkbox"),x(n,"data-def",t[1]),x(n,"data-force",t[2]),x(n,"data-checked",t[0]),n.checked=r=t[0]||!1===t[0]?t[0]:t[1],n.readOnly=a=t[3]?!t[0]&&!1!==t[0]:t[2],n.disabled=t[2]},m(e,r){c(e,n,r),s||(l=_(n,"change",t[4]),s=!0)},p(e,[t]){2&t&&x(n,"data-def",e[1]),4&t&&x(n,"data-force",e[2]),1&t&&x(n,"data-checked",e[0]),3&t&&r!==(r=e[0]||!1===e[0]?e[0]:e[1])&&(n.checked=r),13&t&&a!==(a=e[3]?!e[0]&&!1!==e[0]:e[2])&&(n.readOnly=a),4&t&&(n.disabled=e[2])},i:e,o:e,d(e){e&&p(n),s=!1,l()}}}function ze(e,t,n){let{checked:r=null}=t,{def:a=null}=t,{force:s=!1}=t,{tristate:l=!0}=t;return e.$$set=e=>{"checked"in e&&n(0,r=e.checked),"def"in e&&n(1,a=e.def),"force"in e&&n(2,s=e.force),"tristate"in e&&n(3,l=e.tristate)},[r,a,s,l,function(e){let t=!e.target.checked,s=e.target.checked;e.target.readOnly?n(0,r=s):t==a&&l&&null!==a?(n(0,r=null),e.target.checked=t):n(0,r=s)}]}class je extends oe{constructor(e){super(),le(this,e,ze,ke,s,{checked:0,def:1,force:2,tristate:3})}}function Ne(e,t,n){const r=e.slice();return r[24]=t[n],r[25]=t,r[26]=n,r}function Pe(e,t,n){const r=e.slice();return r[27]=t[n],r[28]=t,r[29]=n,r}function Se(e,t,n){const r=e.slice();return r[27]=t[n],r}function Ae(e){let t,n,r,a,s;return{c(){t=f("option"),t.textContent="tenon et mortaise",n=g(),r=f("option"),r.textContent="contre profil",a=g(),s=f("option"),s.textContent="coupe d'onglet",t.__value="tenon-mortaise",t.value=t.__value,r.__value="contre-profil",r.value=r.__value,s.__value="onglet",s.value=s.__value},m(e,l){c(e,t,l),c(e,n,l),c(e,r,l),c(e,a,l),c(e,s,l)},d(e){e&&p(t),e&&p(n),e&&p(r),e&&p(a),e&&p(s)}}}function Ee(t){let n,r,a=t[27]+"";return{c(){n=f("th"),r=h(a)},m(e,t){c(e,n,t),i(n,r)},p:e,d(e){e&&p(n)}}}function Oe(e){let t,n,r,a,s,l,o,u=e[27].substr(0,2)+"";function d(t){e[20].call(null,t,e[26],e[27])}let m={title:e[27]};return void 0!==e[0].postes_estimations[e[26]].components[e[27]]&&(m.checked=e[0].postes_estimations[e[26]].components[e[27]]),r=new je({props:m}),L.push(()=>te(r,"checked",d)),{c(){t=f("td"),n=f("label"),ne(r.$$.fragment),s=g(),l=h(u),x(n,"class","svelte-x24czq")},m(e,a){c(e,t,a),i(t,n),re(r,n,null),i(n,s),i(n,l),o=!0},p(t,n){e=t;const s={};!a&&9&n[0]&&(a=!0,s.checked=e[0].postes_estimations[e[26]].components[e[27]],B(()=>a=!1)),r.$set(s)},i(e){o||(W(r.$$.fragment,e),o=!0)},o(e){V(r.$$.fragment,e),o=!1},d(e){e&&p(t),ae(r)}}}function Te(e){let t,n,a,s,l,o,u,m,$,v,b,w,C,z,j,N,P,S,A,E,O,T,q,F,M,I,R,J,G,D,H,Q,Z,Y,ee,se,le,oe,ue,ie,ce,pe,de,fe,me,he,ge,$e,_e,ve,xe,be=e[24].name+"",ye=e[8](e[0],e[26]).join(", ")+"";function we(t){e[16].call(null,t,e[26])}let ke={};function ze(){e[17].call(b,e[26])}function je(...t){return e[18](e[26],...t)}function Ne(...t){return e[19](e[26],...t)}void 0!==e[0].postes_estimations[e[26]].value&&(ke.value=e[0].postes_estimations[e[26]].value),u=new Ce({props:ke}),L.push(()=>te(u,"value",we));let Se=e[3],Ae=[];for(let t=0;t<Se.length;t+=1)Ae[t]=Oe(Pe(e,Se,t));const Ee=e=>V(Ae[e],1,1,()=>{Ae[e]=null});return{c(){t=f("tr"),n=f("td"),a=h(be),s=h(" :"),l=g(),o=f("td"),ne(u.$$.fragment),$=g(),v=f("td"),b=f("select"),w=f("option"),w.textContent="(dÃ©sactivÃ©)",C=f("optgroup"),z=f("option"),z.textContent="une fois pour toutes",j=f("option"),N=h("par Ã©lÃ©ment ("),P=h(ye),S=h(")"),A=f("option"),A.textContent="par ferrage de charniÃ¨res",E=f("option"),E.textContent="par tenon",O=f("optgroup"),T=f("option"),T.textContent="par mÂ² de montants ou traverses Ã  contre-profil",q=f("option"),q.textContent="par mÂ² de montants ou traverses (sauf contre-profil)",F=f("option"),F.textContent="par mÂ² de montants ou traverses (tous)",M=f("option"),M.textContent="par mÂ² de panneaux montÃ©s en rainure",I=f("option"),I.textContent="par mÂ² de panneaux libres",R=f("option"),R.textContent="par mÂ² de panneaux (tous)",J=f("option"),J.textContent="par mÂ² de cÃ´tÃ©s de tiroir",G=f("option"),G.textContent="par mÂ² (toutes piÃ¨ces)",D=f("option"),D.textContent="par nombre de montants ou traverses Ã  contre-profil",H=f("option"),H.textContent="par nombre de montants ou traverses (sauf contre-profil)",Q=f("option"),Q.textContent="par nombre de montants ou traverses (tous)",Z=f("option"),Z.textContent="par nombre de panneaux montÃ©s en rainure",Y=f("option"),Y.textContent="par nombre de panneaux libres",ee=f("option"),ee.textContent="par nombre de panneaux (tous)",se=f("option"),se.textContent="par nombre de cÃ´tÃ©s de tiroir",le=f("option"),le.textContent="par nombre total de piÃ¨ces",oe=f("optgroup"),ue=f("option"),ue.textContent="par mÂ² de panneau (ep â©½ 20)",ie=f("option"),ie.textContent="par mÂ² de piÃ¨ces (ep > 20)",ce=f("option"),ce.textContent="par panneau (ep â©½ 20)",pe=f("option"),pe.textContent="par nombre de piÃ¨ces (ep > 20)",de=g(),fe=f("td"),me=f("button"),me.textContent="ð",he=g(),ge=f("button"),ge.textContent="â",$e=g();for(let e=0;e<Ae.length;e+=1)Ae[e].c();w.__value="",w.value=w.__value,z.__value="constant",z.value=z.__value,j.__value="per_component",j.value=j.__value,A.__value="per_ferrage_charniere",A.value=A.__value,E.__value="tenon",E.value=E.__value,x(C,"label","par opÃ©ration..."),T.__value="m2_trav_mont_cp",T.value=T.__value,q.__value="m2_trav_mont_ncp",q.value=q.__value,F.__value="m2_trav_mont",F.value=F.__value,M.__value="m2_panneau",M.value=M.__value,I.__value="m2_panneau_seul",I.value=I.__value,R.__value="m2_panneau_tous",R.value=R.__value,J.__value="m2_cote",J.value=J.__value,G.__value="m2_plateau",G.value=G.__value,D.__value="nb_trav_mont_cp",D.value=D.__value,H.__value="nb_trav_mont_ncp",H.value=H.__value,Q.__value="nb_trav_mont",Q.value=Q.__value,Z.__value="nb_panneau",Z.value=Z.__value,Y.__value="nb_panneau_seul",Y.value=Y.__value,ee.__value="nb_panneau_tous",ee.value=ee.__value,se.__value="nb_cote",se.value=se.__value,le.__value="nb_plateau",le.value=le.__value,x(O,"label","par type de piÃ¨ce..."),ue.__value="m2_ep0_20",ue.value=ue.__value,ie.__value="m2_ep20_plus",ie.value=ie.__value,ce.__value="nb_ep0_20",ce.value=ce.__value,pe.__value="nb_ep20_plus",pe.value=pe.__value,x(oe,"label","par Ã©paisseur..."),void 0===e[0].postes_estimations[e[26]].indice&&U(ze)},m(r,p){c(r,t,p),i(t,n),i(n,a),i(n,s),i(t,l),i(t,o),re(u,o,null),i(t,$),i(t,v),i(v,b),i(b,w),i(b,C),i(C,z),i(C,j),i(j,N),i(j,P),i(j,S),i(C,A),i(C,E),i(b,O),i(O,T),i(O,q),i(O,F),i(O,M),i(O,I),i(O,R),i(O,J),i(O,G),i(O,D),i(O,H),i(O,Q),i(O,Z),i(O,Y),i(O,ee),i(O,se),i(O,le),i(b,oe),i(oe,ue),i(oe,ie),i(oe,ce),i(oe,pe),k(b,e[0].postes_estimations[e[26]].indice),i(t,de),i(t,fe),i(fe,me),i(fe,he),i(fe,ge),i(t,$e);for(let e=0;e<Ae.length;e+=1)Ae[e].m(t,null);_e=!0,ve||(xe=[_(b,"change",ze),_(me,"click",je),_(ge,"click",Ne)],ve=!0)},p(n,r){e=n,(!_e||2&r[0])&&be!==(be=e[24].name+"")&&y(a,be);const s={};if(!m&&1&r[0]&&(m=!0,s.value=e[0].postes_estimations[e[26]].value,B(()=>m=!1)),u.$set(s),(!_e||1&r[0])&&ye!==(ye=e[8](e[0],e[26]).join(", ")+"")&&y(P,ye),1&r[0]&&k(b,e[0].postes_estimations[e[26]].indice),9&r[0]){let n;for(Se=e[3],n=0;n<Se.length;n+=1){const a=Pe(e,Se,n);Ae[n]?(Ae[n].p(a,r),W(Ae[n],1)):(Ae[n]=Oe(a),Ae[n].c(),W(Ae[n],1),Ae[n].m(t,null))}for(K(),n=Se.length;n<Ae.length;n+=1)Ee(n);X()}},i(e){if(!_e){W(u.$$.fragment,e);for(let e=0;e<Se.length;e+=1)W(Ae[e]);_e=!0}},o(e){V(u.$$.fragment,e),Ae=Ae.filter(Boolean);for(let e=0;e<Ae.length;e+=1)V(Ae[e]);_e=!1},d(e){e&&p(t),ae(u),d(Ae,e),ve=!1,r(xe)}}}function qe(e){let t,n,a,s,l,o,u,m,$,v,b,w,C,k,z,j,N,P,S,A,E,O,T,q,F,M,I,R,U,J,G,D,H,Q,Z,Y,ee,se,le,oe,ie,ce,pe,de,fe,me,he,ge,_e,ve,xe,ye,we,Ce,ke,ze,je,Pe,Oe,qe=JSON.stringify(e[1],null,2)+"";function Le(t){e[13].call(null,t)}let Fe={def:e[4].porte_type,$$slots:{default:[Ae]},$$scope:{ctx:e}};function Me(t){e[14].call(null,t)}void 0!==e[0].porte_type&&(Fe.value=e[0].porte_type),w=new be({props:Fe}),L.push(()=>te(w,"value",Le));let Ie={def:e[4].cubeprice,min:"0"};function Re(t){e[15].call(null,t)}void 0!==e[0].cubeprice&&(Ie.value=e[0].cubeprice),S=new $e({props:Ie}),L.push(()=>te(S,"value",Me));let Ue={def:e[4].cubemargin,min:"0"};void 0!==e[0].cubemargin&&(Ue.value=e[0].cubemargin),F=new $e({props:Ue}),L.push(()=>te(F,"value",Re));let Be=e[3],Je=[];for(let t=0;t<Be.length;t+=1)Je[t]=Ee(Se(e,Be,t));let Ge=e[1].postes_estimations,De=[];for(let t=0;t<Ge.length;t+=1)De[t]=Te(Ne(e,Ge,t));const He=e=>V(De[e],1,1,()=>{De[e]=null});return{c(){t=f("div"),n=f("button"),n.textContent="Fermer",a=g(),s=f("p"),l=f("small"),l.textContent=`(version ${ue})`,o=g(),u=f("hr"),m=g(),$=f("label"),v=f("span"),v.textContent="Type de porte :",b=g(),ne(w.$$.fragment),k=g(),z=f("hr"),j=g(),N=f("label"),P=f("span"),P.textContent="Prix du bois : ",ne(S.$$.fragment),E=h(" â¬"),O=g(),T=f("label"),q=f("span"),q.textContent="Marge de cubage : ",ne(F.$$.fragment),I=h(" %"),R=g(),U=f("h2"),U.textContent="Postes",J=g(),G=f("table"),D=f("tr"),H=f("th"),H.textContent="Nom",Q=g(),Z=f("th"),Z.textContent="Temps (min)",Y=g(),ee=f("th"),ee.textContent="Indice",se=g(),le=f("th"),le.textContent="Â ",oe=g();for(let e=0;e<Je.length;e+=1)Je[e].c();ie=g();for(let e=0;e<De.length;e+=1)De[e].c();ce=g(),pe=f("li"),de=f("button"),de.textContent="Ajouter un poste",fe=g(),me=f("hr"),he=g(),ge=f("button"),ge.textContent="Fermer",_e=g(),ve=f("button"),ve.textContent="Ouvrir...",xe=g(),ye=f("details"),we=f("summary"),we.textContent="Contenu des prÃ©fÃ©rences",Ce=g(),ke=f("pre"),ze=h(qe),x(G,"class","estim svelte-x24czq"),x(t,"class","routable")},m(r,p){c(r,t,p),i(t,n),i(t,a),i(t,s),i(s,l),i(t,o),i(t,u),i(t,m),i(t,$),i($,v),i($,b),re(w,$,null),i(t,k),i(t,z),i(t,j),i(t,N),i(N,P),re(S,N,null),i(N,E),i(t,O),i(t,T),i(T,q),re(F,T,null),i(T,I),i(t,R),i(t,U),i(t,J),i(t,G),i(G,D),i(D,H),i(D,Q),i(D,Z),i(D,Y),i(D,ee),i(D,se),i(D,le),i(D,oe);for(let e=0;e<Je.length;e+=1)Je[e].m(D,null);i(G,ie);for(let e=0;e<De.length;e+=1)De[e].m(G,null);i(G,ce),i(G,pe),i(pe,de),i(t,fe),i(t,me),i(t,he),i(t,ge),i(t,_e),i(t,ve),i(t,xe),i(t,ye),i(ye,we),i(ye,Ce),i(ye,ke),i(ke,ze),e[23](t),je=!0,Pe||(Oe=[_(n,"click",e[12]),_(de,"click",e[21]),_(ge,"click",e[22]),_(ve,"click",e[9])],Pe=!0)},p(e,t){const n={};2&t[1]&&(n.$$scope={dirty:t,ctx:e}),!C&&1&t[0]&&(C=!0,n.value=e[0].porte_type,B(()=>C=!1)),w.$set(n);const r={};!A&&1&t[0]&&(A=!0,r.value=e[0].cubeprice,B(()=>A=!1)),S.$set(r);const a={};if(!M&&1&t[0]&&(M=!0,a.value=e[0].cubemargin,B(()=>M=!1)),F.$set(a),8&t[0]){let n;for(Be=e[3],n=0;n<Be.length;n+=1){const r=Se(e,Be,n);Je[n]?Je[n].p(r,t):(Je[n]=Ee(r),Je[n].c(),Je[n].m(D,null))}for(;n<Je.length;n+=1)Je[n].d(1);Je.length=Be.length}if(459&t[0]){let n;for(Ge=e[1].postes_estimations,n=0;n<Ge.length;n+=1){const r=Ne(e,Ge,n);De[n]?(De[n].p(r,t),W(De[n],1)):(De[n]=Te(r),De[n].c(),W(De[n],1),De[n].m(G,ce))}for(K(),n=Ge.length;n<De.length;n+=1)He(n);X()}(!je||2&t[0])&&qe!==(qe=JSON.stringify(e[1],null,2)+"")&&y(ze,qe)},i(e){if(!je){W(w.$$.fragment,e),W(S.$$.fragment,e),W(F.$$.fragment,e);for(let e=0;e<Ge.length;e+=1)W(De[e]);je=!0}},o(e){V(w.$$.fragment,e),V(S.$$.fragment,e),V(F.$$.fragment,e),De=De.filter(Boolean);for(let e=0;e<De.length;e+=1)V(De[e]);je=!1},d(n){n&&p(t),ae(w),ae(S),ae(F),d(Je,n),d(De,n),e[23](null),Pe=!1,r(Oe)}}}function Le(e,t,n){let{settings:r}=t,{settings_opened:a=!1}=t,s=Object.keys(O("App-components")),l={cubeprice:1440,cubemargin:135,porte_type:"contre-profil",postes_estimations:[]},o={};r.subscribe(e=>{n(0,o=e)});let u,i={};function c(){let e=prompt("Quel nom donner Ã  l'estimation :");e&&n(0,o.postes_estimations=[...o.postes_estimations,{name:e,value:0,indice:"constant",components:s.reduce((e,t)=>(e[t]=!0,e),{})}],o),console.log(o.postes_estimations)}function p(e){o.postes_estimations.splice(e,1),n(0,o)}function d(e){let t=o.postes_estimations[e],r=prompt(`Renommer la phase "${t.name}" en :`,t.name);r&&n(0,o.postes_estimations[e].name=r,o)}pe(e=>(n(10,a=e.settings),e.settings?[u]:[]));return e.$$set=e=>{"settings"in e&&n(11,r=e.settings),"settings_opened"in e&&n(10,a=e.settings_opened)},e.$$.update=()=>{1&e.$$.dirty[0]&&n(0,o={postes_estimations:[],...o}),1&e.$$.dirty[0]&&n(1,i={...l,...de(o)}),2050&e.$$.dirty[0]&&r.set(i)},[o,i,u,s,l,c,p,d,function(e,t){return s.filter(n=>e.postes_estimations[t].components[n])},function(){let e=document.createElement("input");e.style.display="none",e.setAttribute("type","file"),e.addEventListener("change",e=>{let t=e.target.files[0];if(!t)return;let n=new FileReader;n.onload=e=>{let t=JSON.parse(e.target.result);t.settings&&r.set(t.settings)},n.readAsText(t)},!1),document.body.appendChild(e),e.click(),document.body.removeChild(e)},a,r,e=>window.location.hash="#/",function(e){o.porte_type=e,n(0,o)},function(e){o.cubeprice=e,n(0,o)},function(e){o.cubemargin=e,n(0,o)},function(e,t){o.postes_estimations[t].value=e,n(0,o)},function(e){o.postes_estimations[e].indice=z(this),n(0,o)},(e,t)=>p(e),(e,t)=>d(e),function(e,t,r){o.postes_estimations[t].components[r]=e,n(0,o)},e=>c(),e=>window.location.hash="#/",function(e){L[e?"unshift":"push"](()=>{u=e,n(2,u)})}]}class Fe extends oe{constructor(e){super(),le(this,e,Le,qe,s,{settings:11,settings_opened:10},[-1,-1])}}function Me(e,t,n){const r=e.slice();return r[4]=t[n],r}function Ie(e){let t,n,r=e[0].children,a=[];for(let t=0;t<r.length;t+=1)a[t]=Ue(Me(e,r,t));const s=e=>V(a[e],1,1,()=>{a[e]=null});return{c(){t=f("ul");for(let e=0;e<a.length;e+=1)a[e].c()},m(e,r){c(e,t,r);for(let e=0;e<a.length;e+=1)a[e].m(t,null);n=!0},p(e,n){if(3&n){let l;for(r=e[0].children,l=0;l<r.length;l+=1){const s=Me(e,r,l);a[l]?(a[l].p(s,n),W(a[l],1)):(a[l]=Ue(s),a[l].c(),W(a[l],1),a[l].m(t,null))}for(K(),l=r.length;l<a.length;l+=1)s(l);X()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)W(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)V(a[e]);n=!1},d(e){e&&p(t),d(a,e)}}}function Re(e){let t,n,r,a;return n=new Ge({props:{path:e[1]+"-"+e[4].id,data:e[4]}}),{c(){t=f("li"),ne(n.$$.fragment),r=g()},m(e,s){c(e,t,s),re(n,t,null),i(t,r),a=!0},p(e,t){const r={};3&t&&(r.path=e[1]+"-"+e[4].id),1&t&&(r.data=e[4]),n.$set(r)},i(e){a||(W(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&p(t),ae(n)}}}function Ue(e){let t,n,r=e[4].type&&Re(e);return{c(){r&&r.c(),t=$()},m(e,a){r&&r.m(e,a),c(e,t,a),n=!0},p(e,n){e[4].type?r?(r.p(e,n),1&n&&W(r,1)):(r=Re(e),r.c(),W(r,1),r.m(t.parentNode,t)):r&&(K(),V(r,1,1,()=>{r=null}),X())},i(e){n||(W(r),n=!0)},o(e){V(r),n=!1},d(e){r&&r.d(e),e&&p(t)}}}function Be(e){let t,n,r,a,s,l,o,u,d=e[0].type+"",m=e[0].name+"",_=e[0].children&&Ie(e);return{c(){t=f("a"),n=h(d),r=g(),a=h(m),l=g(),_&&_.c(),o=$(),x(t,"href",s="#/component/"+e[1]),x(t,"class","svelte-99m9qk"),j(t,"selected",e[2])},m(e,s){c(e,t,s),i(t,n),i(t,r),i(t,a),c(e,l,s),_&&_.m(e,s),c(e,o,s),u=!0},p(e,[r]){(!u||1&r)&&d!==(d=e[0].type+"")&&y(n,d),(!u||1&r)&&m!==(m=e[0].name+"")&&y(a,m),(!u||2&r&&s!==(s="#/component/"+e[1]))&&x(t,"href",s),4&r&&j(t,"selected",e[2]),e[0].children?_?(_.p(e,r),1&r&&W(_,1)):(_=Ie(e),_.c(),W(_,1),_.m(o.parentNode,o)):_&&(K(),V(_,1,1,()=>{_=null}),X())},i(e){u||(W(_),u=!0)},o(e){V(_),u=!1},d(e){e&&p(t),e&&p(l),_&&_.d(e),e&&p(o)}}}function Je(e,t,n){let{data:r={}}=t,{path:a="0"}=t,s=!1;function l(){const e=ce(window.location.hash);n(2,s=e.component_selector==="#component-"+a)}return window.addEventListener("hashchange",l,!1),window.addEventListener("load",l,!1),e.$$set=e=>{"data"in e&&n(0,r=e.data),"path"in e&&n(1,a=e.path)},[r,a,s]}class Ge extends oe{constructor(e){super(),le(this,e,Je,Be,s,{data:0,path:1})}}function De(e,t,n){const r=e.slice();return r[6]=t[n],r}function He(e){let t,n,r=e[0].children,a=[];for(let t=0;t<r.length;t+=1)a[t]=Ze(De(e,r,t));const s=e=>V(a[e],1,1,()=>{a[e]=null});return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=$()},m(e,r){for(let t=0;t<a.length;t+=1)a[t].m(e,r);c(e,t,r),n=!0},p(e,n){if(15&n){let l;for(r=e[0].children,l=0;l<r.length;l+=1){const s=De(e,r,l);a[l]?(a[l].p(s,n),W(a[l],1)):(a[l]=Ze(s),a[l].c(),W(a[l],1),a[l].m(t.parentNode,t))}for(K(),l=r.length;l<a.length;l+=1)s(l);X()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)W(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)V(a[e]);n=!1},d(e){d(a,e),e&&p(t)}}}function Qe(e){let t,n;return t=new We({props:{path:e[1]+"-"+e[6].id,data:e[6],prefix:e[2]+e[3],indent:e[3]}}),{c(){ne(t.$$.fragment)},m(e,r){re(t,e,r),n=!0},p(e,n){const r={};3&n&&(r.path=e[1]+"-"+e[6].id),1&n&&(r.data=e[6]),12&n&&(r.prefix=e[2]+e[3]),8&n&&(r.indent=e[3]),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ae(t,e)}}}function Ze(e){let t,n,r=e[6].type&&Qe(e);return{c(){r&&r.c(),t=$()},m(e,a){r&&r.m(e,a),c(e,t,a),n=!0},p(e,n){e[6].type?r?(r.p(e,n),1&n&&W(r,1)):(r=Qe(e),r.c(),W(r,1),r.m(t.parentNode,t)):r&&(K(),V(r,1,1,()=>{r=null}),X())},i(e){n||(W(r),n=!0)},o(e){V(r),n=!1},d(e){r&&r.d(e),e&&p(t)}}}function Ke(e){let t,n,r,a,s,l,o,u,d,m,_=e[0].type+"",v=e[0].name+"",x=e[0].children&&He(e);return{c(){t=f("option"),n=h(e[2]),r=h(_),a=g(),s=h(v),u=g(),x&&x.c(),d=$(),t.__value=l="#/component/"+e[1],t.value=t.__value,t.selected=o=e[4]?"selected":"",j(t,"selected",e[4])},m(e,l){c(e,t,l),i(t,n),i(t,r),i(t,a),i(t,s),c(e,u,l),x&&x.m(e,l),c(e,d,l),m=!0},p(e,[a]){(!m||4&a)&&y(n,e[2]),(!m||1&a)&&_!==(_=e[0].type+"")&&y(r,_),(!m||1&a)&&v!==(v=e[0].name+"")&&y(s,v),(!m||2&a&&l!==(l="#/component/"+e[1]))&&(t.__value=l,t.value=t.__value),(!m||16&a&&o!==(o=e[4]?"selected":""))&&(t.selected=o),16&a&&j(t,"selected",e[4]),e[0].children?x?(x.p(e,a),1&a&&W(x,1)):(x=He(e),x.c(),W(x,1),x.m(d.parentNode,d)):x&&(K(),V(x,1,1,()=>{x=null}),X())},i(e){m||(W(x),m=!0)},o(e){V(x),m=!1},d(e){e&&p(t),e&&p(u),x&&x.d(e),e&&p(d)}}}function Xe(e,t,n){let{data:r={}}=t,{path:a="0"}=t,{prefix:s=""}=t,{indent:l="â"}=t,o=!1;function u(){const e=ce(window.location.hash);n(4,o=e.component_selector==="#component-"+a)}return window.addEventListener("hashchange",u,!1),window.addEventListener("load",u,!1),e.$$set=e=>{"data"in e&&n(0,r=e.data),"path"in e&&n(1,a=e.path),"prefix"in e&&n(2,s=e.prefix),"indent"in e&&n(3,l=e.indent)},[r,a,s,l,o]}class We extends oe{constructor(e){super(),le(this,e,Xe,Ke,s,{data:0,path:1,prefix:2,indent:3})}}function Ve(t){let n,r;return{c(){n=m("polyline"),x(n,"class","outline"),x(n,"points",t[1]),x(n,"fill","none"),x(n,"stroke","black"),x(n,"data-name",r=t[0].name)},m(e,t){c(e,n,t)},p(e,[t]){2&t&&x(n,"points",e[1]),1&t&&r!==(r=e[0].name)&&x(n,"data-name",r)},i:e,o:e,d(e){e&&p(n)}}}function Ye(e,t,n){let r,{piece:a}=t,{pos:s}=t;return e.$$set=e=>{"piece"in e&&n(0,a=e.piece),"pos"in e&&n(2,s=e.pos)},e.$$.update=()=>{5&e.$$.dirty&&n(1,r=a.projection_polyline(s).map(e=>e.join(",")).join(" "))},[a,r,s]}class et extends oe{constructor(e){super(),le(this,e,Ye,Ve,s,{piece:0,pos:2})}}function tt(e,t,n){const r=e.slice();return r[2]=t[n],r}function nt(t){let n,r=console.warn("Unknown item.type for",t[0])+"";return{c(){n=h(r)},m(e,t){c(e,n,t)},p(e,t){1&t&&r!==(r=console.warn("Unknown item.type for",e[0])+"")&&y(n,r)},i:e,o:e,d(e){e&&p(n)}}}function rt(e){let t,n,r,a,s=e[0].pieces,l=[];for(let t=0;t<s.length;t+=1)l[t]=st(tt(e,s,t));const o=e=>V(l[e],1,1,()=>{l[e]=null});return{c(){t=m("g");for(let e=0;e<l.length;e+=1)l[e].c();x(t,"transform",n="translate("+e[0].projection_position(e[1])[0]+", "+e[0].projection_position(e[1])[1]+")"),x(t,"data-name",r=e[0].name)},m(e,n){c(e,t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null);a=!0},p(e,u){if(3&u){let n;for(s=e[0].pieces,n=0;n<s.length;n+=1){const r=tt(e,s,n);l[n]?(l[n].p(r,u),W(l[n],1)):(l[n]=st(r),l[n].c(),W(l[n],1),l[n].m(t,null))}for(K(),n=s.length;n<l.length;n+=1)o(n);X()}(!a||3&u&&n!==(n="translate("+e[0].projection_position(e[1])[0]+", "+e[0].projection_position(e[1])[1]+")"))&&x(t,"transform",n),(!a||1&u&&r!==(r=e[0].name))&&x(t,"data-name",r)},i(e){if(!a){for(let e=0;e<s.length;e+=1)W(l[e]);a=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)V(l[e]);a=!1},d(e){e&&p(t),d(l,e)}}}function at(e){let t,n;return t=new et({props:{piece:e[0],pos:e[1]}}),{c(){ne(t.$$.fragment)},m(e,r){re(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.piece=e[0]),2&n&&(r.pos=e[1]),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ae(t,e)}}}function st(e){let t,n;return t=new ut({props:{item:e[2],pos:e[1]}}),{c(){ne(t.$$.fragment)},m(e,r){re(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.item=e[2]),2&n&&(r.pos=e[1]),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ae(t,e)}}}function lt(e){let t,n,r,a;const s=[at,rt,nt],l=[];function o(e,t){return"Piece"==e[0].type?0:"Group"==e[0].type?1:2}return t=o(e),n=l[t]=s[t](e),{c(){n.c(),r=$()},m(e,n){l[t].m(e,n),c(e,r,n),a=!0},p(e,[a]){let u=t;t=o(e),t===u?l[t].p(e,a):(K(),V(l[u],1,1,()=>{l[u]=null}),X(),n=l[t],n?n.p(e,a):(n=l[t]=s[t](e),n.c()),W(n,1),n.m(r.parentNode,r))},i(e){a||(W(n),a=!0)},o(e){V(n),a=!1},d(e){l[t].d(e),e&&p(r)}}}function ot(e,t,n){let{item:r}=t,{pos:a}=t;return e.$$set=e=>{"item"in e&&n(0,r=e.item),"pos"in e&&n(1,a=e.pos)},[r,a]}class ut extends oe{constructor(e){super(),le(this,e,ot,lt,s,{item:0,pos:1})}}function it(t){let n;return{c(){n=f("canvas")},m(e,r){c(e,n,r),t[1](n)},p:e,i:e,o:e,d(e){e&&p(n),t[1](null)}}}function ct(e,t,n){let r;return[r,function(e){L[e?"unshift":"push"](()=>{r=e,n(0,r)})}]}class pt extends oe{constructor(e){super(),le(this,e,ct,it,s,{})}}function dt(e,t,n){const r=e.slice();return r[15]=t[n],r}function ft(e,t,n){const r=e.slice();return r[15]=t[n],r}function mt(e,t,n){const r=e.slice();return r[15]=t[n],r}function ht(e){let t,n,r,a,s,l,o;return a=new pt({props:{item:e[2]}}),{c(){t=f("p"),n=f("a"),n.textContent="2D",r=g(),ne(a.$$.fragment),x(n,"href","javascript:void(0)")},m(u,p){c(u,t,p),i(t,n),c(u,r,p),re(a,u,p),s=!0,l||(o=_(n,"click",e[11]),l=!0)},p(e,t){const n={};4&t&&(n.item=e[2]),a.$set(n)},i(e){s||(W(a.$$.fragment,e),s=!0)},o(e){V(a.$$.fragment,e),s=!1},d(e){e&&p(t),e&&p(r),ae(a,e),l=!1,o()}}}function gt(e){let t,n,a,s,l,o,u,$,v,b,C,k,z,j,N,P,S,A,E,O,T,q,L,F,M,I=100*e[0]+"",R=e[2],U=[];for(let t=0;t<R.length;t+=1)U[t]=$t(mt(e,R,t));const B=e=>V(U[e],1,1,()=>{U[e]=null});let J=e[2],G=[];for(let t=0;t<J.length;t+=1)G[t]=_t(ft(e,J,t));const D=e=>V(G[e],1,1,()=>{G[e]=null});let H=e[2],Q=[];for(let t=0;t<H.length;t+=1)Q[t]=vt(dt(e,H,t));const Z=e=>V(Q[e],1,1,()=>{Q[e]=null});return{c(){t=f("p"),n=f("a"),n.textContent="3D",a=f("br"),s=h("\n  Zoom : "),l=f("input"),o=g(),u=h(I),$=h(" %\n  "),v=f("br"),b=g(),C=f("a"),C.textContent="Enregistrer image",k=g(),z=m("svg"),j=m("g");for(let e=0;e<U.length;e+=1)U[e].c();P=m("g");for(let e=0;e<G.length;e+=1)G[e].c();A=m("g");for(let e=0;e<Q.length;e+=1)Q[e].c();x(n,"href","javascript:void(0)"),x(l,"type","range"),x(l,"min","0"),x(l,"max","1"),x(l,"step",".05"),x(C,"href","javascript:void(0)"),x(j,"transform",N="translate(5, "+(5+e[0]*e[6])+") scale("+e[0]+" "+e[0]+")"),x(P,"transform",S="translate("+(5+e[0]*e[5]+10)+", "+(5+e[0]*e[6])+") scale("+e[0]+" "+e[0]+")"),x(A,"transform",E="translate(5, "+(5+e[0]*e[6]+5)+") scale("+e[0]+" "+e[0]+")"),x(z,"data-count",O=e[2].length),x(z,"width",T=5+e[0]*e[5]+5+e[0]*e[7]+5),x(z,"height",q=5+e[0]*e[6]+5+e[0]*e[7]+5)},m(r,p){c(r,t,p),i(t,n),i(t,a),i(t,s),i(t,l),w(l,e[0]),i(t,o),i(t,u),i(t,$),i(t,v),i(t,b),i(t,C),c(r,k,p),c(r,z,p),i(z,j);for(let e=0;e<U.length;e+=1)U[e].m(j,null);i(z,P);for(let e=0;e<G.length;e+=1)G[e].m(P,null);i(z,A);for(let e=0;e<Q.length;e+=1)Q[e].m(A,null);e[14](z),L=!0,F||(M=[_(n,"click",e[12]),_(l,"change",e[13]),_(l,"input",e[13]),_(C,"click",e[9])],F=!0)},p(e,t){if(1&t&&w(l,e[0]),(!L||1&t)&&I!==(I=100*e[0]+"")&&y(u,I),4&t){let n;for(R=e[2],n=0;n<R.length;n+=1){const r=mt(e,R,n);U[n]?(U[n].p(r,t),W(U[n],1)):(U[n]=$t(r),U[n].c(),W(U[n],1),U[n].m(j,null))}for(K(),n=R.length;n<U.length;n+=1)B(n);X()}if((!L||65&t&&N!==(N="translate(5, "+(5+e[0]*e[6])+") scale("+e[0]+" "+e[0]+")"))&&x(j,"transform",N),4&t){let n;for(J=e[2],n=0;n<J.length;n+=1){const r=ft(e,J,n);G[n]?(G[n].p(r,t),W(G[n],1)):(G[n]=_t(r),G[n].c(),W(G[n],1),G[n].m(P,null))}for(K(),n=J.length;n<G.length;n+=1)D(n);X()}if((!L||97&t&&S!==(S="translate("+(5+e[0]*e[5]+10)+", "+(5+e[0]*e[6])+") scale("+e[0]+" "+e[0]+")"))&&x(P,"transform",S),4&t){let n;for(H=e[2],n=0;n<H.length;n+=1){const r=dt(e,H,n);Q[n]?(Q[n].p(r,t),W(Q[n],1)):(Q[n]=vt(r),Q[n].c(),W(Q[n],1),Q[n].m(A,null))}for(K(),n=H.length;n<Q.length;n+=1)Z(n);X()}(!L||65&t&&E!==(E="translate(5, "+(5+e[0]*e[6]+5)+") scale("+e[0]+" "+e[0]+")"))&&x(A,"transform",E),(!L||4&t&&O!==(O=e[2].length))&&x(z,"data-count",O),(!L||161&t&&T!==(T=5+e[0]*e[5]+5+e[0]*e[7]+5))&&x(z,"width",T),(!L||193&t&&q!==(q=5+e[0]*e[6]+5+e[0]*e[7]+5))&&x(z,"height",q)},i(e){if(!L){for(let e=0;e<R.length;e+=1)W(U[e]);for(let e=0;e<J.length;e+=1)W(G[e]);for(let e=0;e<H.length;e+=1)W(Q[e]);L=!0}},o(e){U=U.filter(Boolean);for(let e=0;e<U.length;e+=1)V(U[e]);G=G.filter(Boolean);for(let e=0;e<G.length;e+=1)V(G[e]);Q=Q.filter(Boolean);for(let e=0;e<Q.length;e+=1)V(Q[e]);L=!1},d(n){n&&p(t),n&&p(k),n&&p(z),d(U,n),d(G,n),d(Q,n),e[14](null),F=!1,r(M)}}}function $t(e){let t,n;return t=new ut({props:{item:e[15],pos:"xy"}}),{c(){ne(t.$$.fragment)},m(e,r){re(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.item=e[15]),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ae(t,e)}}}function _t(e){let t,n;return t=new ut({props:{item:e[15],pos:"zy"}}),{c(){ne(t.$$.fragment)},m(e,r){re(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.item=e[15]),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ae(t,e)}}}function vt(e){let t,n;return t=new ut({props:{item:e[15],pos:"xZ"}}),{c(){ne(t.$$.fragment)},m(e,r){re(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.item=e[15]),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ae(t,e)}}}function xt(e){let t,n,r,a,s,l,o="3d"==e[3]&&ht(e),u="2d"==e[3]&&gt(e);return{c(){t=f("h3"),n=h(e[1]),r=g(),o&&o.c(),a=g(),u&&u.c(),s=$()},m(e,p){c(e,t,p),i(t,n),c(e,r,p),o&&o.m(e,p),c(e,a,p),u&&u.m(e,p),c(e,s,p),l=!0},p(e,[t]){(!l||2&t)&&y(n,e[1]),"3d"==e[3]?o?(o.p(e,t),8&t&&W(o,1)):(o=ht(e),o.c(),W(o,1),o.m(a.parentNode,a)):o&&(K(),V(o,1,1,()=>{o=null}),X()),"2d"==e[3]?u?(u.p(e,t),8&t&&W(u,1)):(u=gt(e),u.c(),W(u,1),u.m(s.parentNode,s)):u&&(K(),V(u,1,1,()=>{u=null}),X())},i(e){l||(W(o),W(u),l=!0)},o(e){V(o),V(u),l=!1},d(e){e&&p(t),e&&p(r),o&&o.d(e),e&&p(a),u&&u.d(e),e&&p(s)}}}function bt(e,t,n){let r,a,s,l,o,{pieces:u}=t,{zoom:i=.25}=t,{name:c=u.name||"Dessin"}=t,p="2d";function d(e){n(3,p=e)}return e.$$set=e=>{"pieces"in e&&n(10,u=e.pieces),"zoom"in e&&n(0,i=e.zoom),"name"in e&&n(1,c=e.name)},e.$$.update=()=>{1024&e.$$.dirty&&n(2,r=u instanceof Array?u:u.individual()),4&e.$$.dirty&&n(5,[a,s,l]=r.map(e=>e.bounding_box()).map(e=>[e.xmax,e.ymax,e.zmax]).reduce((e,t)=>[Math.max(e[0],t[0]),Math.max(e[1],t[1]),Math.max(e[2],t[2])],[0,0,0]),a,(n(6,s),n(2,r),n(10,u)),(n(7,l),n(2,r),n(10,u)))},[i,c,r,p,o,a,s,l,d,function(){let e=o.outerHTML,t=(prompt("Nom du fichier :",c)||"dessin")+".svg",n=new window.File([e],t,{type:"image/svg+xml"}),r=URL.createObjectURL(n);try{let e=document.createElement("a");e.href=r,e.style.display="none",e.setAttribute("download",t),document.body.appendChild(e),e.click(),document.body.removeChild(e)}finally{URL.revokeObjectURL(r)}},u,e=>d("2d"),e=>d("3d"),function(){i=b(this.value),n(0,i)},function(e){L[e?"unshift":"push"](()=>{o=e,n(4,o)})}]}class yt extends oe{constructor(e){super(),le(this,e,bt,xt,s,{pieces:10,zoom:0,name:1})}}function wt(e){switch(e){case"left":case"l":case"gauche":case"ga":case"zy":case"x":return"zy";case"right":case"r":case"droite":case"dr":case"Zy":case"X":return"Zy";case"top":case"t":case"haut":case"h":case"xZ":case"y":return"xZ";case"bottom":case"b":case"bas":case"xz":case"Y":return"xz";case"front":case"F":case"avant":case"av":case"xy":case"z":return"xy";case"back":case"B":case"arriÃ¨re":case"ar":case"Xy":case"Z":return"Xy";default:throw"Unknown position "+e}}function Ct(e){switch(e){case"xyz":case"xzy":case"yxz":case"yzx":case"zxy":case"zyx":return e;default:throw"Unknown orient "+e}}class kt{constructor(e,t,n){this.component_type=n,this.type="Group",this.pieces=e||[],this.name=t,this.x=0,this.y=0,this.z=0,this.features=[]}individual(){return this.pieces.reduce((e,t)=>e.concat(t.individual().map(e=>e.prefix_name(this.name))),[])}shallow(){return this.update({pieces:this.pieces.filter(e=>!(e instanceof kt))})}flat_groups(e,t){let n=[],r=[];for(let t of this.pieces)t instanceof kt?n=n.concat(t.flat_groups(`${e||""}${this.name} `)):r.push(t);return n=[this.update({pieces:r,name:`${e||""}${this.name}`})].concat(n),t&&n.push(this.update({pieces:this.individual(),name:`${e||""}Total ${this.name}`})),n}surface(){return this.pieces.reduce((e,t)=>e+t.surface(),0)}get nombre_tenons(){return this.pieces.reduce((e,t)=>e+t.nombre_tenons,0)}update(e){return this.update_new({...this,...e})}update_new(e){return Object.assign(Object.create(kt.prototype),e)}add_pieces(e){return this.update({pieces:[...this.pieces,...e]})}position(e,t,n){return this.update({x:e||0==e?e:this.x,y:t||0==t?t:this.y,z:n||0==n?n:this.z})}get largeur(){let e=this.bounding_box();return e.xmax-e.xmin}get hauteur(){let e=this.bounding_box();return e.ymax-e.ymin}get profondeur(){let e=this.bounding_box();return e.zmax-e.zmin}bounding_box(){let e={xmin:Math.min,ymin:Math.min,zmin:Math.min,xmax:Math.max,ymax:Math.max,zmax:Math.max},t=this.pieces.map(e=>e.bounding_box()).reduce((t,n)=>null===t?n:Object.keys(e).reduce((r,a)=>({...r,[a]:e[a](t[a],n[a])}),{}),null)||{};return{xmin:this.x+(t.xmin||0),xmax:this.x+(t.xmax||0),ymin:this.y+(t.ymin||0),ymax:this.y+(t.ymax||0),zmin:this.z+(t.zmin||0),zmax:this.z+(t.zmax||0)}}dim(e){return[(e==e.toLowerCase()?1:-1)*this[e=e.toLowerCase()]]}projection_position(e){return e=wt(e),[this.dim(e[0]),-this.dim(e[1])]}add_features(){return this.update({features:[...this.features,...Array.from(arguments,e=>e&&!this.features.includes(e))]})}count_features(){return this.pieces.map(e=>e.count_features(...arguments)).reduce((e,t)=>{for(let n in t)e[n]=(e[n]||0)+t[n];return e},this.features)}}function zt(e,t,n){const r=e.slice();return r[33]=t[n],r[35]=n,r}const jt=e=>({}),Nt=e=>({});function Pt(e,t,n){const r=e.slice();return r[33]=t[n],r[35]=n,r}const St=e=>({}),At=e=>({}),Et=e=>({}),Ot=e=>({}),Tt=e=>({}),qt=e=>({}),Lt=e=>({}),Ft=e=>({});function Mt(e){let t,n=e[0].children,r=[];for(let t=0;t<n.length;t+=1)r[t]=Ut(Pt(e,n,t));return{c(){t=f("table");for(let e=0;e<r.length;e+=1)r[e].c()},m(e,n){c(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,a){if(51&a[0]){let s;for(n=e[0].children,s=0;s<n.length;s+=1){const l=Pt(e,n,s);r[s]?r[s].p(l,a):(r[s]=Ut(l),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){e&&p(t),d(r,e)}}}function It(e){let t,n,a,s,l,o,u,d,m,$,b,w,C,k,z,j=e[33].type+"",N=e[33].name+"";function P(...t){return e[21](e[35],...t)}function S(...t){return e[22](e[35],...t)}let A=(e[33].source||[]).length>0&&Rt(e);return{c(){t=f("tr"),n=f("td"),a=f("a"),s=h(j),l=g(),o=h(N),d=g(),m=f("a"),m.textContent="â",$=g(),b=f("a"),b.textContent="ð",w=g(),A&&A.c(),C=g(),x(a,"href",u="#/component/"+e[1]+"-"+e[33].id),x(m,"href","@"),x(b,"href","@")},m(e,r){c(e,t,r),i(t,n),i(n,a),i(a,s),i(a,l),i(a,o),i(n,d),i(n,m),i(n,$),i(n,b),i(n,w),A&&A.m(n,null),i(t,C),k||(z=[_(m,"click",v(P)),_(b,"click",v(S))],k=!0)},p(t,r){e=t,1&r[0]&&j!==(j=e[33].type+"")&&y(s,j),1&r[0]&&N!==(N=e[33].name+"")&&y(o,N),3&r[0]&&u!==(u="#/component/"+e[1]+"-"+e[33].id)&&x(a,"href",u),(e[33].source||[]).length>0?A?A.p(e,r):(A=Rt(e),A.c(),A.m(n,null)):A&&(A.d(1),A=null)},d(e){e&&p(t),A&&A.d(),k=!1,r(z)}}}function Rt(e){let t,n,r,a,s=e[33].source.join("-")+"";return{c(){t=f("em"),n=h("(automatique : "),r=h(s),a=h(")")},m(e,s){c(e,t,s),i(t,n),i(t,r),i(t,a)},p(e,t){1&t[0]&&s!==(s=e[33].source.join("-")+"")&&y(r,s)},d(e){e&&p(t)}}}function Ut(e){let t,n=e[33].type&&It(e);return{c(){n&&n.c(),t=$()},m(e,r){n&&n.m(e,r),c(e,t,r)},p(e,r){e[33].type?n?n.p(e,r):(n=It(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&p(t)}}}function Bt(e){let t,n,r=[],a=new Map,s=e[0].children;const l=e=>e[33].id;for(let t=0;t<s.length;t+=1){let n=zt(e,s,t),o=l(n);a.set(o,r[t]=Jt(o,n))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=$()},m(e,a){for(let t=0;t<r.length;t+=1)r[t].m(e,a);c(e,t,a),n=!0},p(e,n){75&n[0]&&(s=e[0].children,K(),r=ee(r,n,l,1,e,s,a,t.parentNode,Y,Jt,t,zt),X())},i(e){if(!n){for(let e=0;e<s.length;e+=1)W(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)V(r[e]);n=!1},d(e){for(let t=0;t<r.length;t+=1)r[t].d(e);e&&p(t)}}}function Jt(e,t){let n,r,a,s;function l(...e){return t[30](t[35],...e)}var o=t[3][t[33].type];function u(e){return{props:{initdata:e[33],path:e[1]+"-"+e[33].id}}}return o&&(r=new o(u(t)),r.$on("datachange",l)),{key:e,first:null,c(){n=$(),r&&ne(r.$$.fragment),a=$(),this.first=n},m(e,t){c(e,n,t),r&&re(r,e,t),c(e,a,t),s=!0},p(e,n){t=e;const s={};if(1&n[0]&&(s.initdata=t[33]),3&n[0]&&(s.path=t[1]+"-"+t[33].id),o!==(o=t[3][t[33].type])){if(r){K();const e=r;V(e.$$.fragment,1,0,()=>{ae(e,1)}),X()}o?(r=new o(u(t)),r.$on("datachange",l),ne(r.$$.fragment),W(r.$$.fragment,1),re(r,a.parentNode,a)):r=null}else o&&r.$set(s)},i(e){s||(r&&W(r.$$.fragment,e),s=!0)},o(e){r&&V(r.$$.fragment,e),s=!1},d(e){e&&p(n),e&&p(a),r&&ae(r,e)}}}function Gt(e){let t,n,a,s,o,d,m,v,b,w,C,k,z,N,P,S,A,E,O,T,q,L,F,M,I,R,U,B,J,G,D,H,Q,Z,Y,ee,te,ne,re,ae,se,le,oe,ue,ie,ce,pe,de,fe,me,he,ge,$e,_e,ve,xe=JSON.stringify(e[0],null,2)+"";const be=e[13].plan,ye=l(be,e,e[12],Ft),we=e[13].dim,Ce=l(we,e,e[12],qt),ke=e[13].default,ze=l(ke,e,e[12],null),je=e[13].tables,Ne=l(je,e,e[12],Ot),Pe=e[13].children,Se=l(Pe,e,e[12],At);let Ae=e[0].children&&e[0].children.length&&Mt(e);const Ee=e[13].debug,Oe=l(Ee,e,e[12],Nt);let Te=e[0].children&&e[0].children.length&&Bt(e);return{c(){t=f("div"),n=f("div"),a=f("div"),s=f("button"),s.textContent="Nouvelle porte",o=g(),d=f("button"),d.textContent="Nouveau caisson",m=g(),v=f("button"),v.textContent="Nouvelle Ã©tagÃ¨re",b=g(),w=f("button"),w.textContent="Nouvelle plinthe",C=g(),k=f("button"),k.textContent="Nouvelle faÃ§ade",z=g(),N=f("button"),N.textContent="Nouveau tiroir",P=g(),S=f("button"),S.textContent="Nouveau sous-ensemble",A=g(),E=f("div"),ye&&ye.c(),O=g(),T=f("div"),Ce&&Ce.c(),q=g(),L=f("div"),ze&&ze.c(),F=g(),M=f("div"),Ne&&Ne.c(),I=g(),R=f("div"),Se&&Se.c(),U=g(),Ae&&Ae.c(),B=g(),J=f("button"),J.textContent="Nouvelle porte",G=g(),D=f("button"),D.textContent="Nouveau caisson",H=g(),Q=f("button"),Q.textContent="Nouvelle Ã©tagÃ¨re",Z=g(),Y=f("button"),Y.textContent="Nouvelle plinthe",ee=g(),te=f("button"),te.textContent="Nouvelle faÃ§ade",ne=g(),re=f("button"),re.textContent="Nouveau tiroir",ae=g(),se=f("button"),se.textContent="Nouveau sous-ensemble",le=g(),oe=f("div"),Oe&&Oe.c(),ue=g(),ie=f("details"),ce=f("summary"),ce.textContent="debug",pe=g(),de=f("pre"),fe=h(xe),he=g(),Te&&Te.c(),ge=$(),x(a,"class","svelte-s3eokf"),x(E,"class","component-grid-plan svelte-s3eokf"),x(T,"class","component-grid-dim svelte-s3eokf"),x(L,"class","component-grid-main svelte-s3eokf"),x(M,"class","component-grid-tables svelte-s3eokf"),x(R,"class","component-grid-children svelte-s3eokf"),x(oe,"class","component-grid-debug svelte-s3eokf"),x(n,"class","component-grid svelte-s3eokf"),x(t,"class","routable component svelte-s3eokf"),x(t,"id",me="component-"+e[1]),j(t,"target",e[2])},m(r,l){c(r,t,l),i(t,n),i(n,a),i(a,s),i(a,o),i(a,d),i(a,m),i(a,v),i(a,b),i(a,w),i(a,C),i(a,k),i(a,z),i(a,N),i(a,P),i(a,S),i(n,A),i(n,E),ye&&ye.m(E,null),i(n,O),i(n,T),Ce&&Ce.m(T,null),i(n,q),i(n,L),ze&&ze.m(L,null),i(n,F),i(n,M),Ne&&Ne.m(M,null),i(n,I),i(n,R),Se&&Se.m(R,null),i(R,U),Ae&&Ae.m(R,null),i(R,B),i(R,J),i(R,G),i(R,D),i(R,H),i(R,Q),i(R,Z),i(R,Y),i(R,ee),i(R,te),i(R,ne),i(R,re),i(R,ae),i(R,se),i(n,le),i(n,oe),Oe&&Oe.m(oe,null),i(t,ue),i(t,ie),i(ie,ce),i(ie,pe),i(ie,de),i(de,fe),c(r,he,l),Te&&Te.m(r,l),c(r,ge,l),$e=!0,_e||(ve=[_(s,"click",e[14]),_(d,"click",e[15]),_(v,"click",e[16]),_(w,"click",e[17]),_(k,"click",e[18]),_(N,"click",e[19]),_(S,"click",e[20]),_(J,"click",e[23]),_(D,"click",e[24]),_(Q,"click",e[25]),_(Y,"click",e[26]),_(te,"click",e[27]),_(re,"click",e[28]),_(se,"click",e[29])],_e=!0)},p(e,n){ye&&ye.p&&4096&n[0]&&u(ye,be,e,e[12],n,Lt,Ft),Ce&&Ce.p&&4096&n[0]&&u(Ce,we,e,e[12],n,Tt,qt),ze&&ze.p&&4096&n[0]&&u(ze,ke,e,e[12],n,null,null),Ne&&Ne.p&&4096&n[0]&&u(Ne,je,e,e[12],n,Et,Ot),Se&&Se.p&&4096&n[0]&&u(Se,Pe,e,e[12],n,St,At),e[0].children&&e[0].children.length?Ae?Ae.p(e,n):(Ae=Mt(e),Ae.c(),Ae.m(R,B)):Ae&&(Ae.d(1),Ae=null),Oe&&Oe.p&&4096&n[0]&&u(Oe,Ee,e,e[12],n,jt,Nt),(!$e||1&n[0])&&xe!==(xe=JSON.stringify(e[0],null,2)+"")&&y(fe,xe),(!$e||2&n[0]&&me!==(me="component-"+e[1]))&&x(t,"id",me),4&n[0]&&j(t,"target",e[2]),e[0].children&&e[0].children.length?Te?(Te.p(e,n),1&n[0]&&W(Te,1)):(Te=Bt(e),Te.c(),W(Te,1),Te.m(ge.parentNode,ge)):Te&&(K(),V(Te,1,1,()=>{Te=null}),X())},i(e){$e||(W(ye,e),W(Ce,e),W(ze,e),W(Ne,e),W(Se,e),W(Oe,e),W(Te),$e=!0)},o(e){V(ye,e),V(Ce,e),V(ze,e),V(Ne,e),V(Se,e),V(Oe,e),V(Te),$e=!1},d(e){e&&p(t),ye&&ye.d(e),Ce&&Ce.d(e),ze&&ze.d(e),Ne&&Ne.d(e),Se&&Se.d(e),Ae&&Ae.d(),Oe&&Oe.d(e),e&&p(he),Te&&Te.d(e),e&&p(ge),_e=!1,r(ve)}}}function Dt(e,t,n){let{$$slots:r={},$$scope:a}=t;const s=A();let l=O("App-components"),{data:o}=t,{state:u={}}=t,{childrenState:i=[]}=t,{children:c=o.children||[]}=t,{path:p=`${O("Component-path")}-${o.id}`}=t,{multi_drawings:d=!1}=t;function f(e){let t=prompt(`Renommer "${c[e].name}" en :`,c[e].name)||c[e].name;n(9,c[e].name=t,c)}function m(e){if(!confirm(`Supprimer ${c[e].name} (#${e}) ?`))return;let t=[...c];t.splice(e,1),console.log("delete",e,c,t),n(9,c=t)}function h(e,t){e.detail.data&&n(9,c[t]=e.detail.data,c),e.detail.state&&n(8,i[t]=e.detail.state,i)}E("Component-path",p),s("datachange",{data:o,state:u});let g=!1;function $(e){let t=me(c),r=prompt("Nom du sous-ensemble :",`${p}-${t}`)||`${p}-${t}`;n(9,c=[...c,{type:e,name:r,id:t}])}pe(e=>{n(2,g=e.component_path==p)});return e.$$set=e=>{"data"in e&&n(0,o=e.data),"state"in e&&n(10,u=e.state),"childrenState"in e&&n(8,i=e.childrenState),"children"in e&&n(9,c=e.children),"path"in e&&n(1,p=e.path),"multi_drawings"in e&&n(11,d=e.multi_drawings),"$$scope"in e&&n(12,a=e.$$scope)},e.$$.update=()=>{1025&e.$$.dirty[0]&&function(e,t){s("datachange",{state:e,data:t})}(u,o)},[o,p,g,l,f,m,h,$,i,c,u,d,a,r,e=>$("Porte"),e=>$("Caisson"),e=>$("Etagere"),e=>$("Plinthe"),e=>$("Facade"),e=>$("Tiroir"),e=>$("Ensemble"),(e,t)=>f(e),(e,t)=>m(e),e=>$("Porte"),e=>$("Caisson"),e=>$("Etagere"),e=>$("Plinthe"),e=>$("Facade"),e=>$("Tiroir"),e=>$("Ensemble"),(e,t)=>h(t,e)]}class Ht extends oe{constructor(e){super(),le(this,e,Dt,Gt,s,{data:0,state:10,childrenState:8,children:9,path:1,multi_drawings:11},[-1,-1])}}function Qt(e,t,n){const r=e.slice();return r[15]=t[n],r[16]=t,r[17]=n,r}function Zt(e){let t,n,r,a,s,l,o,u,m,h,$,_,v,b,y,w,k=e[2]&&Kt(),z=e[0],j=[];for(let t=0;t<z.length;t+=1)j[t]=Vt(Qt(e,z,t));const N=e=>V(j[e],1,1,()=>{j[e]=null});return{c(){t=f("table"),n=f("tr"),r=f("th"),r.textContent="ÃlÃ©ments (activer)",a=g(),s=f("th"),s.textContent="dimensions (LÂ xÂ hÂ xÂ p)",l=g(),k&&k.c(),o=g(),u=f("th"),u.textContent="de la gauche",m=g(),h=f("th"),h.textContent="du bas",$=g(),_=f("th"),_.textContent="du mur",v=g(),b=f("td"),y=g();for(let e=0;e<j.length;e+=1)j[e].c();C(r,"text-align","left"),x(r,"colspan","2"),C(s,"text-align","right"),C(u,"text-align","right"),C(h,"text-align","right"),C(_,"text-align","right")},m(e,p){c(e,t,p),i(t,n),i(n,r),i(n,a),i(n,s),i(n,l),k&&k.m(n,null),i(n,o),i(n,u),i(n,m),i(n,h),i(n,$),i(n,_),i(n,v),i(n,b),i(t,y);for(let e=0;e<j.length;e+=1)j[e].m(t,null);w=!0},p(e,r){if(e[2]?k||(k=Kt(),k.c(),k.m(n,o)):k&&(k.d(1),k=null),31&r){let n;for(z=e[0],n=0;n<z.length;n+=1){const a=Qt(e,z,n);j[n]?(j[n].p(a,r),W(j[n],1)):(j[n]=Vt(a),j[n].c(),W(j[n],1),j[n].m(t,null))}for(K(),n=z.length;n<j.length;n+=1)N(n);X()}},i(e){if(!w){for(let e=0;e<z.length;e+=1)W(j[e]);w=!0}},o(e){j=j.filter(Boolean);for(let e=0;e<j.length;e+=1)V(j[e]);w=!1},d(e){e&&p(t),k&&k.d(),d(j,e)}}}function Kt(e){let t;return{c(){t=f("th"),t.textContent="nÂ° dessin",C(t,"text-align","right"),x(t,"colspan","2")},m(e,n){c(e,t,n)},d(e){e&&p(t)}}}function Xt(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,x,b,w,k,z,j,N,P,S,A,E,O,T,q,F,M,I,R,U,J,G=e[15].type+"",D=e[15].name+"",H=(e[4][e[17]]||{}).largeur+"",Q=(e[4][e[17]]||{}).hauteur+"",Z=(e[4][e[17]]||{}).profondeur+"";function Y(t){e[9].call(null,t,e[17])}let ee={tristate:!1};void 0!==e[3][e[17]].show&&(ee.checked=e[3][e[17]].show),r=new je({props:ee}),L.push(()=>te(r,"checked",Y));let se=e[2]&&Wt(e);function le(t){e[11].call(null,t,e[17])}let oe={def:(e[1][e[17]]||{}).x||0};function ue(t){e[12].call(null,t,e[17])}void 0!==e[3][e[17]].x&&(oe.value=e[3][e[17]].x),N=new $e({props:oe}),L.push(()=>te(N,"value",le));let ie={def:(e[1][e[17]]||{}).y||0};function ce(t){e[13].call(null,t,e[17])}void 0!==e[3][e[17]].y&&(ie.value=e[3][e[17]].y),E=new $e({props:ie}),L.push(()=>te(E,"value",ue));let pe={def:(e[1][e[17]]||{}).z||0};return void 0!==e[3][e[17]].z&&(pe.value=e[3][e[17]].z),F=new $e({props:pe}),L.push(()=>te(F,"value",ce)),{c(){t=f("tr"),n=f("td"),ne(r.$$.fragment),s=g(),l=f("td"),o=h(G),u=g(),d=h(D),m=g(),$=f("td"),_=h(H),v=h("x"),x=h(Q),b=h("x"),w=h(Z),k=g(),se&&se.c(),z=g(),j=f("td"),ne(N.$$.fragment),S=g(),A=f("td"),ne(E.$$.fragment),T=g(),q=f("td"),ne(F.$$.fragment),I=g(),R=f("td"),R.textContent="mm",U=g(),C($,"text-align","right")},m(e,a){c(e,t,a),i(t,n),re(r,n,null),i(t,s),i(t,l),i(l,o),i(l,u),i(l,d),i(t,m),i(t,$),i($,_),i($,v),i($,x),i($,b),i($,w),i(t,k),se&&se.m(t,null),i(t,z),i(t,j),re(N,j,null),i(t,S),i(t,A),re(E,A,null),i(t,T),i(t,q),re(F,q,null),i(t,I),i(t,R),i(t,U),J=!0},p(n,s){e=n;const l={};!a&&8&s&&(a=!0,l.checked=e[3][e[17]].show,B(()=>a=!1)),r.$set(l),(!J||1&s)&&G!==(G=e[15].type+"")&&y(o,G),(!J||1&s)&&D!==(D=e[15].name+"")&&y(d,D),(!J||16&s)&&H!==(H=(e[4][e[17]]||{}).largeur+"")&&y(_,H),(!J||16&s)&&Q!==(Q=(e[4][e[17]]||{}).hauteur+"")&&y(x,Q),(!J||16&s)&&Z!==(Z=(e[4][e[17]]||{}).profondeur+"")&&y(w,Z),e[2]?se?(se.p(e,s),4&s&&W(se,1)):(se=Wt(e),se.c(),W(se,1),se.m(t,z)):se&&(K(),V(se,1,1,()=>{se=null}),X());const u={};2&s&&(u.def=(e[1][e[17]]||{}).x||0),!P&&8&s&&(P=!0,u.value=e[3][e[17]].x,B(()=>P=!1)),N.$set(u);const i={};2&s&&(i.def=(e[1][e[17]]||{}).y||0),!O&&8&s&&(O=!0,i.value=e[3][e[17]].y,B(()=>O=!1)),E.$set(i);const c={};2&s&&(c.def=(e[1][e[17]]||{}).z||0),!M&&8&s&&(M=!0,c.value=e[3][e[17]].z,B(()=>M=!1)),F.$set(c)},i(e){J||(W(r.$$.fragment,e),W(se),W(N.$$.fragment,e),W(E.$$.fragment,e),W(F.$$.fragment,e),J=!0)},o(e){V(r.$$.fragment,e),V(se),V(N.$$.fragment,e),V(E.$$.fragment,e),V(F.$$.fragment,e),J=!1},d(e){e&&p(t),ae(r),se&&se.d(),ae(N),ae(E),ae(F)}}}function Wt(e){let t,n,r,a;function s(t){e[10].call(null,t,e[17])}let l={def:(e[1][e[17]]||{}).d||1,min:1};return void 0!==e[3][e[17]].d&&(l.value=e[3][e[17]].d),n=new $e({props:l}),L.push(()=>te(n,"value",s)),{c(){t=f("td"),ne(n.$$.fragment)},m(e,r){c(e,t,r),re(n,t,null),a=!0},p(t,a){e=t;const s={};2&a&&(s.def=(e[1][e[17]]||{}).d||1),!r&&8&a&&(r=!0,s.value=e[3][e[17]].d,B(()=>r=!1)),n.$set(s)},i(e){a||(W(n.$$.fragment,e),a=!0)},o(e){V(n.$$.fragment,e),a=!1},d(e){e&&p(t),ae(n)}}}function Vt(e){let t,n,r=e[15].type&&Xt(e);return{c(){r&&r.c(),t=$()},m(e,a){r&&r.m(e,a),c(e,t,a),n=!0},p(e,n){e[15].type?r?(r.p(e,n),1&n&&W(r,1)):(r=Xt(e),r.c(),W(r,1),r.m(t.parentNode,t)):r&&(K(),V(r,1,1,()=>{r=null}),X())},i(e){n||(W(r),n=!0)},o(e){V(r),n=!1},d(e){r&&r.d(e),e&&p(t)}}}function Yt(e){let t,n,r=e[0].length>0&&Zt(e);return{c(){r&&r.c(),t=$()},m(e,a){r&&r.m(e,a),c(e,t,a),n=!0},p(e,[n]){e[0].length>0?r?(r.p(e,n),1&n&&W(r,1)):(r=Zt(e),r.c(),W(r,1),r.m(t.parentNode,t)):r&&(K(),V(r,1,1,()=>{r=null}),X())},i(e){n||(W(r),n=!0)},o(e){V(r),n=!1},d(e){r&&r.d(e),e&&p(t)}}}function en(e,t,n){let r,{children:a=[]}=t,{childrenState:s=[]}=t,{pieces:l=[]}=t,{pieces_drawings:o=[]}=t,{childrenPos:u}=t,{defaultChildrenPos:i=[]}=t,{drawings:c=!1}=t,p=[];return e.$$set=e=>{"children"in e&&n(0,a=e.children),"childrenState"in e&&n(8,s=e.childrenState),"pieces"in e&&n(6,l=e.pieces),"pieces_drawings"in e&&n(5,o=e.pieces_drawings),"childrenPos"in e&&n(7,u=e.childrenPos),"defaultChildrenPos"in e&&n(1,i=e.defaultChildrenPos),"drawings"in e&&n(2,c=e.drawings)},e.$$.update=()=>{1&e.$$.dirty&&n(3,p=function(e){return e.map((e,t)=>de(p[t]||{})).map(e=>({...e,show:null===e.show||void 0===e.show||e.show}))}(a)),8&e.$$.dirty&&n(7,u=p),267&e.$$.dirty&&n(4,r=a.map((e,t)=>{const n=s[t]||{};return n.pieces_group||new kt(n.pieces||[],`${e.type} ${e.name}`,e.type)}).map((e,t)=>{let{x:n,y:r,z:a}={x:0,y:0,z:0,...i[t]||{},...de(p[t]||{})};return e.position(n,r,a)})),26&e.$$.dirty&&n(5,o=r.reduce((e,t,n)=>{let r={d:1,show:!0,...i[n]||{},...de(p[n]||{})},a=r.d||1;return r.show&&(e[a-1]=[...e[a-1]||[],t]),e},[])),32&e.$$.dirty&&n(6,l=o.reduce((e,t)=>[...e,...t],[]))},[a,i,c,p,r,o,l,u,s,function(e,t){p[t].show=e,n(3,p),n(0,a)},function(e,t){p[t].d=e,n(3,p),n(0,a)},function(e,t){p[t].x=e,n(3,p),n(0,a)},function(e,t){p[t].y=e,n(3,p),n(0,a)},function(e,t){p[t].z=e,n(3,p),n(0,a)}]}class tn extends oe{constructor(e){super(),le(this,e,en,Yt,s,{children:0,childrenState:8,pieces:6,pieces_drawings:5,childrenPos:7,defaultChildrenPos:1,drawings:2})}}function nn(e,t){let n={},r=t.flat_groups("",!1).map(t=>function(e,t,n){let r=t.component_type,a=(e.postes_estimations||[]).map((e,t)=>({...e,estim_idx:t})).filter(e=>e.components[r]).map(e=>({...e,type:r,...rn(e,t,n,r)})).map(e=>({computed:e.value*e.base_value,...e})).filter(e=>0!=e.computed),s=a.reduce((e,t)=>e+t.computed,0);return{type:r,name:t.name,postes:a,total:s}}(e,t,n)),a=r.reduce((e,t)=>e+t.total,0);return{components:r,total:a}}function rn(e,t,n,r){switch(e.indice){case"m2_ep0_20":return{base_value:t.pieces.filter(e=>e.epaisseur<=20).reduce((e,t)=>e+t.surface(),0),base_unit:"mÂ²"};case"m2_ep20_plus":return{base_value:t.pieces.filter(e=>e.epaisseur>20).reduce((e,t)=>e+t.surface(),0),base_unit:"mÂ²"};case"m2_panneau":return{base_value:t.pieces.filter(e=>e.features.includes("panneau")).reduce((e,t)=>e+t.surface(),0),base_unit:"mÂ²"};case"m2_panneau_seul":return{base_value:t.pieces.filter(e=>e.features.includes("panneau-seul")).reduce((e,t)=>e+t.surface(),0),base_unit:"mÂ²"};case"m2_panneau_tous":return{base_value:t.pieces.filter(e=>e.features.includes("panneau")||e.features.includes("panneau-seul")).reduce((e,t)=>e+t.surface(),0),base_unit:"mÂ²"};case"m2_trav_mont_ncp":return{base_value:t.pieces.filter(e=>e.features.includes("traverse")||e.features.includes("montant")).reduce((e,t)=>e+t.surface(),0),base_unit:"mÂ²"};case"m2_trav_mont_cp":return{base_value:t.pieces.filter(e=>e.features.includes("traverse-cp")||e.features.includes("montant-cp")).reduce((e,t)=>e+t.surface(),0),base_unit:"mÂ²"};case"m2_trav_mont":return{base_value:t.pieces.filter(e=>e.features.includes("traverse")||e.features.includes("montant")||e.features.includes("traverse-cp")||e.features.includes("montant-cp")).reduce((e,t)=>e+t.surface(),0),base_unit:"mÂ²"};case"m2_cote":return{base_value:t.pieces.filter(e=>e.features.includes("cote")).reduce((e,t)=>e+t.surface(),0),base_unit:"mÂ²"};case"m2_plateau":return{base_value:t.surface(),base_unit:"mÂ²"};case"nb_ep0_20":return{base_value:t.pieces.filter(e=>e.epaisseur<=20).length,base_unit:"piÃ¨ces"};case"nb_ep20_plus":return{base_value:t.pieces.filter(e=>e.epaisseur>20).length,base_unit:"piÃ¨ces"};case"nb_panneau":return{base_value:t.pieces.filter(e=>e.features.includes("panneau")).length,base_unit:"panneaux"};case"nb_panneau_seul":return{base_value:t.pieces.filter(e=>e.features.includes("panneau-seul")).length,base_unit:"panneaux"};case"nb_panneau_tous":return{base_value:t.pieces.filter(e=>e.features.includes("panneau")||e.features.includes("panneau-seul")).length,base_unit:"panneaux"};case"nb_trav_mont_ncp":return{base_value:t.pieces.filter(e=>e.features.includes("traverse")||e.features.includes("montant")).length,base_unit:"piÃ¨ces"};case"nb_trav_mont_cp":return{base_value:t.pieces.filter(e=>e.features.includes("traverse-cp")||e.features.includes("montant-cp")).length,base_unit:"piÃ¨ces"};case"nb_trav_mont":return{base_value:t.pieces.filter(e=>e.features.includes("traverse")||e.features.includes("montant")||e.features.includes("traverse-cp")||e.features.includes("montant-cp")).length,base_unit:"piÃ¨ces"};case"nb_cote":return{base_value:t.pieces.filter(e=>e.features.includes("cote")).length,base_unit:"cÃ´tÃ©"};case"nb_plateau":return{base_value:t.pieces.length,base_unit:"piÃ¨ces"};case"tenon":return{base_value:t.nombre_tenons,base_unit:"tenons"};case"constant":let a=`${r}/${e.name}`,s=n[a]?0:1;return n[a]=!0,{base_value:s,base_unit:"fois"};case"per_component":return{base_value:1,base_unit:r};case"per_ferrage_charniere":return{base_value:t.features.includes("ferrage-charniere")?1:0,base_unit:r};default:return{base_value:0,base_unit:""}}}function an(e,t,n){const r=e.slice();return r[6]=t[n],r}function sn(e,t,n){const r=e.slice();return r[9]=t[n],r}function ln(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,x,b,w,C,k,z=e[9].name+"",j=e[9].base_value.toFixed(4)+"",N=e[9].base_unit+"",P=cn(e[9].value,e[2])+"",S=e[9].base_unit+"",A=cn(e[9].computed,e[2])+"";return{c(){t=f("tr"),n=f("td"),r=g(),a=f("td"),s=h(z),l=g(),o=f("td"),u=h(j),d=g(),m=h(N),$=g(),_=f("td"),v=h(P),x=h(" / "),b=h(S),w=g(),C=f("td"),k=h(A)},m(e,p){c(e,t,p),i(t,n),i(t,r),i(t,a),i(a,s),i(t,l),i(t,o),i(o,u),i(o,d),i(o,m),i(t,$),i(t,_),i(_,v),i(_,x),i(_,b),i(t,w),i(t,C),i(C,k)},p(e,t){1&t&&z!==(z=e[9].name+"")&&y(s,z),1&t&&j!==(j=e[9].base_value.toFixed(4)+"")&&y(u,j),1&t&&N!==(N=e[9].base_unit+"")&&y(m,N),5&t&&P!==(P=cn(e[9].value,e[2])+"")&&y(v,P),1&t&&S!==(S=e[9].base_unit+"")&&y(b,S),5&t&&A!==(A=cn(e[9].computed,e[2])+"")&&y(k,A)},d(e){e&&p(t)}}}function on(e){let t,n,r,a,s,l,o,u,m,_,v,b,w=e[6].type+"",C=e[6].name+"",k=cn(e[6].total,e[2])+"",z=e[6].postes,j=[];for(let t=0;t<z.length;t+=1)j[t]=ln(sn(e,z,t));return{c(){t=f("tr"),n=f("th"),r=h(w),a=g(),s=f("th"),l=h(C),o=g(),u=f("td"),m=f("em"),_=h(k),v=g();for(let e=0;e<j.length;e+=1)j[e].c();b=$(),x(s,"colspan","3")},m(e,p){c(e,t,p),i(t,n),i(n,r),i(t,a),i(t,s),i(s,l),i(t,o),i(t,u),i(u,m),i(m,_),c(e,v,p);for(let t=0;t<j.length;t+=1)j[t].m(e,p);c(e,b,p)},p(e,t){if(1&t&&w!==(w=e[6].type+"")&&y(r,w),1&t&&C!==(C=e[6].name+"")&&y(l,C),5&t&&k!==(k=cn(e[6].total,e[2])+"")&&y(_,k),5&t){let n;for(z=e[6].postes,n=0;n<z.length;n+=1){const r=sn(e,z,n);j[n]?j[n].p(r,t):(j[n]=ln(r),j[n].c(),j[n].m(b.parentNode,b))}for(;n<j.length;n+=1)j[n].d(1);j.length=z.length}},d(e){e&&p(t),e&&p(v),d(j,e),e&&p(b)}}}function un(t){let n,a,s,l,o,u,m,$,v,b,w,k,z,j,N,P,S,A,E,O,T=t[1].name+"",q=cn(t[0].total,t[2])+"",L=t[0].components,F=[];for(let e=0;e<L.length;e+=1)F[e]=on(an(t,L,e));return{c(){n=f("table"),a=f("caption"),s=h("Estimations pour "),l=h(T),o=h(" (afficher "),u=f("label"),m=f("input"),$=h(" les minutes\n  seulement"),v=h(", "),b=f("a"),b.textContent="ouvrir dans un\n  tableur",w=h(")"),k=g();for(let e=0;e<F.length;e+=1)F[e].c();z=g(),j=f("tr"),N=f("th"),N.textContent="Total",P=g(),S=f("td"),A=h(q),x(m,"type","checkbox"),C(u,"display","inline"),x(b,"href","javascript:void(0)"),x(N,"colspan","4"),x(n,"class","large styled")},m(e,r){c(e,n,r),i(n,a),i(a,s),i(a,l),i(a,o),i(a,u),i(u,m),m.checked=t[2],i(u,$),i(a,v),i(a,b),i(a,w),i(n,k);for(let e=0;e<F.length;e+=1)F[e].m(n,null);i(n,z),i(n,j),i(j,N),i(j,P),i(j,S),i(S,A),E||(O=[_(m,"change",t[5]),_(b,"click",t[3])],E=!0)},p(e,[t]){if(2&t&&T!==(T=e[1].name+"")&&y(l,T),4&t&&(m.checked=e[2]),5&t){let r;for(L=e[0].components,r=0;r<L.length;r+=1){const a=an(e,L,r);F[r]?F[r].p(a,t):(F[r]=on(a),F[r].c(),F[r].m(n,z))}for(;r<F.length;r+=1)F[r].d(1);F.length=L.length}5&t&&q!==(q=cn(e[0].total,e[2])+"")&&y(A,q)},i:e,o:e,d(e){e&&p(n),d(F,e),E=!1,r(O)}}}function cn(e,t){if(t)return e.toFixed()+" min";{let t=e%60;return`${((e-t)/60).toFixed()} h ${t.toFixed()} min`}}function pn(e){return e.map(e=>(""+e).replaceAll('"','""')).map(e=>`"${e}"`).join(",")}function dn(e,t,n){let r,{pieces:a}=t,{estimations:s}=t,l=!1;return O("settings").subscribe(e=>{n(4,r=e)}),e.$$set=e=>{"pieces"in e&&n(1,a=e.pieces),"estimations"in e&&n(0,s=e.estimations)},e.$$.update=()=>{18&e.$$.dirty&&n(0,s=nn(r,a))},[s,a,l,function(){let e=[],t=e.length+1;e.push(pn(["Indices"]));let n=e.length+1;for(let n of r.postes_estimations)t=e.length+1,e.push(pn(["",n.name,"","",n.value,"min",n.indice,"",`=CONCAT(TRUNC(E${t}/60), "h ", TRUNC(MOD(E${t}, 60)), "min")`]));t=e.length+1;let a=t;for(let r of s.components){e.push(""),t=e.length+1,e.push(pn([r.type,r.name,"","","","",`=SUBTOTAL(9;G${t+1}:G${t+r.postes.length})`,"min",`=CONCAT(TRUNC(G${t}/60), "h ", TRUNC(MOD(G${t}, 60)), "min")`]));for(let a of r.postes)t=e.length+1,e.push(pn(["","=B"+(a.estim_idx+n),a.base_value.toFixed(4),a.base_unit,"=E"+(a.estim_idx+n),"min / "+a.base_unit,`=C${t}*E${t}`,"min",`=CONCAT(TRUNC(G${t}/60), "h ", TRUNC(MOD(G${t}, 60)), "min")`]))}e.push(""),t=e.length+1,e.push(pn(["Total","","","","","",`=SUBTOTAL(9;G${a}:G${t-1})`,"min",`=CONCAT(TRUNC(G${t}/60), "h ", TRUNC(MOD(G${t}, 60)), "min")`]));let l="\ufeff"+e.join("\n"),o=(prompt("Nom du fichier :","estimation - "+name)||"liste de dÃ©bit")+".csv",u=new window.File([l],o,{type:"text/csv"}),i=URL.createObjectURL(u);try{let e=document.createElement("a");e.href=i,e.style.display="none",e.setAttribute("download",o),document.body.appendChild(e),e.click(),document.body.removeChild(e)}finally{URL.revokeObjectURL(i)}},r,function(){l=this.checked,n(2,l)}]}class fn extends oe{constructor(e){super(),le(this,e,dn,un,s,{pieces:1,estimations:0})}}function mn(e,t,n){const r=e.slice();return r[25]=t[n],r}function hn(e,t,n){const r=e.slice();return r[28]=t[n],r[30]=n,r}function gn(e,t,n){const r=e.slice();return r[31]=t[n],r}function $n(e,t,n){const r=e.slice();return r[34]=t[n],r}function _n(e,t,n){const r=e.slice();return r[34]=t[n],r}function vn(e,t,n){const r=e.slice();return r[34]=t[n],r}function xn(e){let t,n=e[12],r=[];for(let t=0;t<n.length;t+=1)r[t]=bn(vn(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=$()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);c(e,t,n)},p(e,a){if(4096&a[0]){let s;for(n=e[12],s=0;s<n.length;s+=1){const l=vn(e,n,s);r[s]?r[s].p(l,a):(r[s]=bn(l),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){d(r,e),e&&p(t)}}}function bn(e){let t,n,r,a=e[34]+"";return{c(){t=f("th"),n=h("PiÃ¨ces Ã©p="),r=h(a),x(t,"colspan","2")},m(e,a){c(e,t,a),i(t,n),i(t,r)},p(e,t){4096&t[0]&&a!==(a=e[34]+"")&&y(r,a)},d(e){e&&p(t)}}}function yn(e){let t;return{c(){t=f("th"),t.textContent="Panneaux",x(t,"colspan","2")},m(e,n){c(e,t,n)},d(e){e&&p(t)}}}function wn(e){let t,n,r=e[8]&&Cn(e),a=e[9]&&zn();return{c(){t=f("tr"),r&&r.c(),n=g(),a&&a.c()},m(e,s){c(e,t,s),r&&r.m(t,null),i(t,n),a&&a.m(t,null)},p(e,s){e[8]?r?r.p(e,s):(r=Cn(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),e[9]?a||(a=zn(),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(e){e&&p(t),r&&r.d(),a&&a.d()}}}function Cn(e){let t,n=e[12],r=[];for(let t=0;t<n.length;t+=1)r[t]=kn(_n(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=$()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);c(e,t,n)},p(e,a){if(4096&a[0]){const a=n.length;let s;for(n=e[12],s=a;s<n.length;s+=1){_n(e,n,s);r[s]||(r[s]=kn(),r[s].c(),r[s].m(t.parentNode,t))}for(s=n.length;s<a;s+=1)r[s].d(1);r.length=n.length}},d(e){d(r,e),e&&p(t)}}}function kn(e){let t,n,r;return{c(){t=f("th"),t.textContent="Nbre",n=g(),r=f("th"),r.textContent="mÂ²"},m(e,a){c(e,t,a),c(e,n,a),c(e,r,a)},d(e){e&&p(t),e&&p(n),e&&p(r)}}}function zn(e){let t,n,r;return{c(){t=f("th"),t.textContent="Nbre",n=g(),r=f("th"),r.textContent="mÂ²"},m(e,a){c(e,t,a),c(e,n,a),c(e,r,a)},d(e){e&&p(t),e&&p(n),e&&p(r)}}}function jn(e){let t,n=e[12],r=[];for(let t=0;t<n.length;t+=1)r[t]=Nn($n(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=$()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);c(e,t,n)},p(e,a){if(4128&a[0]){let s;for(n=e[12],s=0;s<n.length;s+=1){const l=$n(e,n,s);r[s]?r[s].p(l,a):(r[s]=Nn(l),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){d(r,e),e&&p(t)}}}function Nn(e){let t,n,r,a,s,l=((e[31].epaisseurs.find(u)||{}).nb_pieces||0)+"",o=((e[31].epaisseurs.find(d)||{}).surface||0).toFixed(6)+"";function u(...t){return e[19](e[34],...t)}function d(...t){return e[20](e[34],...t)}return{c(){t=f("td"),n=h(l),r=g(),a=f("td"),s=h(o)},m(e,l){c(e,t,l),i(t,n),c(e,r,l),c(e,a,l),i(a,s)},p(t,r){e=t,4128&r[0]&&l!==(l=((e[31].epaisseurs.find(u)||{}).nb_pieces||0)+"")&&y(n,l),4128&r[0]&&o!==(o=((e[31].epaisseurs.find(d)||{}).surface||0).toFixed(6)+"")&&y(s,o)},d(e){e&&p(t),e&&p(r),e&&p(a)}}}function Pn(e){let t,n,r,a,s,l=e[31].nb_panneaux+"",o=e[31].m2_panneaux.toFixed(6)+"";return{c(){t=f("td"),n=h(l),r=g(),a=f("td"),s=h(o)},m(e,l){c(e,t,l),i(t,n),c(e,r,l),c(e,a,l),i(a,s)},p(e,t){32&t[0]&&l!==(l=e[31].nb_panneaux+"")&&y(n,l),32&t[0]&&o!==(o=e[31].m2_panneaux.toFixed(6)+"")&&y(s,o)},d(e){e&&p(t),e&&p(r),e&&p(a)}}}function Sn(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,x,b,w,C,k,z,j,N,P,S=e[31].name+"",A=e[31].dimension_x+"",E=e[31].dimension_y+"",O=e[31].dimension_z+"",T=e[31].nb_pieces+"",q=e[31].nb_tenons+"",L=e[31].surface.toFixed(6)+"",F=e[8]&&jn(e),M=e[9]&&Pn(e);return{c(){t=f("tr"),n=f("td"),r=h(S),a=g(),s=f("td"),l=h(A),o=h(" x "),u=h(E),d=h(" x "),m=h(O),$=g(),_=f("td"),v=h(T),x=g(),b=f("td"),w=h(q),C=g(),k=f("td"),z=h(L),j=g(),F&&F.c(),N=g(),M&&M.c(),P=g()},m(e,p){c(e,t,p),i(t,n),i(n,r),i(t,a),i(t,s),i(s,l),i(s,o),i(s,u),i(s,d),i(s,m),i(t,$),i(t,_),i(_,v),i(t,x),i(t,b),i(b,w),i(t,C),i(t,k),i(k,z),i(t,j),F&&F.m(t,null),i(t,N),M&&M.m(t,null),i(t,P)},p(e,n){32&n[0]&&S!==(S=e[31].name+"")&&y(r,S),32&n[0]&&A!==(A=e[31].dimension_x+"")&&y(l,A),32&n[0]&&E!==(E=e[31].dimension_y+"")&&y(u,E),32&n[0]&&O!==(O=e[31].dimension_z+"")&&y(m,O),32&n[0]&&T!==(T=e[31].nb_pieces+"")&&y(v,T),32&n[0]&&q!==(q=e[31].nb_tenons+"")&&y(w,q),32&n[0]&&L!==(L=e[31].surface.toFixed(6)+"")&&y(z,L),e[8]?F?F.p(e,n):(F=jn(e),F.c(),F.m(t,N)):F&&(F.d(1),F=null),e[9]?M?M.p(e,n):(M=Pn(e),M.c(),M.m(t,P)):M&&(M.d(1),M=null)},d(e){e&&p(t),F&&F.d(),M&&M.d()}}}function An(e){let t,n=e[25].name+"";return{c(){t=h(n)},m(e,n){c(e,t,n)},p(e,r){64&r[0]&&n!==(n=e[25].name+"")&&y(t,n)},d(e){e&&p(t)}}}function En(e){let t,n=e[25].name_list,r=[];for(let t=0;t<n.length;t+=1)r[t]=On(hn(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=$()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);c(e,t,n)},p(e,a){if(64&a[0]){let s;for(n=e[25].name_list,s=0;s<n.length;s+=1){const l=hn(e,n,s);r[s]?r[s].p(l,a):(r[s]=On(l),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){d(r,e),e&&p(t)}}}function On(e){let t,n,r=e[28]+"",a=0!=e[30]&&function(e){let t;return{c(){t=f("br")},m(e,n){c(e,t,n)},d(e){e&&p(t)}}}();return{c(){a&&a.c(),t=g(),n=h(r)},m(e,r){a&&a.m(e,r),c(e,t,r),c(e,n,r)},p(e,t){64&t[0]&&r!==(r=e[28]+"")&&y(n,r)},d(e){a&&a.d(e),e&&p(t),e&&p(n)}}}function Tn(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,x,b,w,C,k,z,j,N,P,S,A=(e[25].que||1)+"",E=e[25].string_dimentions()+"",O=e[25].string_arrasement()+"",T=e[25].largeur*e[25].longueur/1e6+"",q=e[25].epaisseur_plateau+"",L=e[25].que*e[25].cubage(e[4]/100).toFixed(9)+"",F=e[25].que*e[25].prix(e[3],e[4]/100).toFixed(2)+"";function M(e,t){return e[7]?En:An}let I=M(e),R=I(e);return{c(){t=f("tr"),n=f("td"),R.c(),r=g(),a=f("td"),s=h(A),l=g(),o=f("td"),u=h(E),d=g(),m=f("td"),$=h(O),_=g(),v=f("td"),x=h(T),b=g(),w=f("td"),C=h(q),k=g(),z=f("td"),j=h(L),N=g(),P=f("td"),S=h(F)},m(e,p){c(e,t,p),i(t,n),R.m(n,null),i(t,r),i(t,a),i(a,s),i(t,l),i(t,o),i(o,u),i(t,d),i(t,m),i(m,$),i(t,_),i(t,v),i(v,x),i(t,b),i(t,w),i(w,C),i(t,k),i(t,z),i(z,j),i(t,N),i(t,P),i(P,S)},p(e,t){I===(I=M(e))&&R?R.p(e,t):(R.d(1),R=I(e),R&&(R.c(),R.m(n,null))),64&t[0]&&A!==(A=(e[25].que||1)+"")&&y(s,A),64&t[0]&&E!==(E=e[25].string_dimentions()+"")&&y(u,E),64&t[0]&&O!==(O=e[25].string_arrasement()+"")&&y($,O),64&t[0]&&T!==(T=e[25].largeur*e[25].longueur/1e6+"")&&y(x,T),64&t[0]&&q!==(q=e[25].epaisseur_plateau+"")&&y(C,q),80&t[0]&&L!==(L=e[25].que*e[25].cubage(e[4]/100).toFixed(9)+"")&&y(j,L),88&t[0]&&F!==(F=e[25].que*e[25].prix(e[3],e[4]/100).toFixed(2)+"")&&y(S,F)},d(e){e&&p(t),R.d()}}}function qn(e){let t,n,a,s,l,o,u,m,$,v,k,z,j,N,P,S,A,E,O,T,q,F,M,I,R,U,J,G,D,H,Q,Z,K,X,Y,ee,se,le,oe,ue,ie,ce,pe,de,fe,me,he,ge,$e,_e,ve,xe,be,ye,we,Ce,ke,ze,je,Ne,Pe,Se,Ae,Ee,Oe,Te,qe,Le,Fe,Me,Ie,Re,Ue,Be,Je,Ge,De,He,Qe,Ze,Ke,Xe,We,Ve,Ye,et,tt,nt,rt,at,st,lt,ot,ut,it,ct,pt,dt,ft,mt,ht,gt,$t,_t,vt,xt,bt,yt,wt=e[1].name+"",Ct=e[10].toFixed(9)+"",kt=e[11].toFixed(2)+"",zt=e[8]&&xn(e),jt=e[9]&&yn(),Nt=(e[8]||e[9])&&wn(e),Pt=e[5],St=[];for(let t=0;t<Pt.length;t+=1)St[t]=Sn(gn(e,Pt,t));let At=e[6],Et=[];for(let t=0;t<At.length;t+=1)Et[t]=Tn(mn(e,At,t));function Ot(t){e[24].call(null,t)}let Tt={pieces:e[1]};return void 0!==e[0]&&(Tt.estimations=e[0]),_t=new fn({props:Tt}),L.push(()=>te(_t,"estimations",Ot)),{c(){t=f("table"),n=f("caption"),a=h("Statistiques pour "),s=h(wt),l=h(" (afficher "),o=f("label"),u=f("input"),m=h(" totaux"),$=h(", "),v=f("label"),k=f("input"),z=h(" par Ã©paisseur"),j=h(", "),N=f("label"),P=f("input"),S=h(" par type"),A=h(")"),E=g(),O=f("tr"),T=f("th"),q=h("Ensemble"),M=g(),I=f("th"),R=h("Dimensions"),J=g(),G=f("th"),D=h("Nombre de piÃ¨ces"),Q=g(),Z=f("th"),K=h("Nombre de tenons"),Y=g(),ee=f("th"),se=h("Surface des piÃ¨ces"),oe=g(),zt&&zt.c(),ue=g(),jt&&jt.c(),ie=g(),Nt&&Nt.c(),ce=g();for(let e=0;e<St.length;e+=1)St[e].c();pe=g(),de=f("hr"),fe=g(),me=f("table"),he=f("caption"),ge=h("Liste de dÃ©bit ("),$e=f("a"),$e.textContent="ouvrir dans un tableur",_e=h(")"),ve=g(),xe=f("tr"),be=f("th"),ye=h("PiÃ¨ce ("),we=f("label"),Ce=f("input"),ke=h(" sÃ©parer"),ze=h(")"),je=g(),Ne=f("th"),Ne.textContent="QuÃ©",Pe=g(),Se=f("th"),Se.textContent="L x l x e",Ae=g(),Ee=f("th"),Ee.textContent="Arrasement",Oe=g(),Te=f("th"),Te.textContent="Surface (mÂ²)",qe=g(),Le=f("th"),Le.textContent="epaisseur plateau (mm)",Fe=g(),Me=f("th"),Ie=h("Cubage"),Re=f("br"),Ue=h("(x"),Be=f("input"),Je=h("%)"),Ge=g(),De=f("th"),He=h("Prix au mÂ³"),Qe=f("br"),Ze=f("input"),Ke=g();for(let e=0;e<Et.length;e+=1)Et[e].c();Xe=g(),We=f("tr"),Ve=f("td"),Ve.textContent="Total",Ye=g(),et=f("td"),tt=g(),nt=f("td"),rt=g(),at=f("td"),st=g(),lt=f("td"),ot=g(),ut=f("td"),it=g(),ct=f("td"),pt=h(Ct),dt=g(),ft=f("td"),mt=h(kt),ht=g(),gt=f("hr"),$t=g(),ne(_t.$$.fragment),x(u,"type","checkbox"),C(o,"display","inline"),x(k,"type","checkbox"),C(v,"display","inline"),x(P,"type","checkbox"),C(N,"display","inline"),x(T,"rowspan",F=e[8]||e[9]?2:1),x(I,"rowspan",U=e[8]||e[9]?2:1),x(G,"rowspan",H=e[8]||e[9]?2:1),x(Z,"rowspan",X=e[8]||e[9]?2:1),x(ee,"rowspan",le=e[8]||e[9]?2:1),x(t,"class","large styled"),x($e,"href","javascript:void(0)"),x(Ce,"type","checkbox"),C(we,"display","inline"),x(Be,"type","number"),x(Be,"size","3"),x(Be,"min","100"),x(Be,"step","5"),x(Be,"class","svelte-fy3499"),x(Ze,"type","number"),x(Ze,"size","5"),x(Ze,"step","10"),x(Ze,"class","svelte-fy3499"),x(me,"class","large styled")},m(r,p){c(r,t,p),i(t,n),i(n,a),i(n,s),i(n,l),i(n,o),i(o,u),u.checked=e[2],i(o,m),i(n,$),i(n,v),i(v,k),k.checked=e[8],i(v,z),i(n,j),i(n,N),i(N,P),P.checked=e[9],i(N,S),i(n,A),i(t,E),i(t,O),i(O,T),i(T,q),i(O,M),i(O,I),i(I,R),i(O,J),i(O,G),i(G,D),i(O,Q),i(O,Z),i(Z,K),i(O,Y),i(O,ee),i(ee,se),i(O,oe),zt&&zt.m(O,null),i(O,ue),jt&&jt.m(O,null),i(t,ie),Nt&&Nt.m(t,null),i(t,ce);for(let e=0;e<St.length;e+=1)St[e].m(t,null);c(r,pe,p),c(r,de,p),c(r,fe,p),c(r,me,p),i(me,he),i(he,ge),i(he,$e),i(he,_e),i(me,ve),i(me,xe),i(xe,be),i(be,ye),i(be,we),i(we,Ce),Ce.checked=e[7],i(we,ke),i(be,ze),i(xe,je),i(xe,Ne),i(xe,Pe),i(xe,Se),i(xe,Ae),i(xe,Ee),i(xe,Oe),i(xe,Te),i(xe,qe),i(xe,Le),i(xe,Fe),i(xe,Me),i(Me,Ie),i(Me,Re),i(Me,Ue),i(Me,Be),w(Be,e[4]),i(Me,Je),i(xe,Ge),i(xe,De),i(De,He),i(De,Qe),i(De,Ze),w(Ze,e[3]),i(me,Ke);for(let e=0;e<Et.length;e+=1)Et[e].m(me,null);i(me,Xe),i(me,We),i(We,Ve),i(We,Ye),i(We,et),i(We,tt),i(We,nt),i(We,rt),i(We,at),i(We,st),i(We,lt),i(We,ot),i(We,ut),i(We,it),i(We,ct),i(ct,pt),i(We,dt),i(We,ft),i(ft,mt),c(r,ht,p),c(r,gt,p),c(r,$t,p),re(_t,r,p),xt=!0,bt||(yt=[_(u,"change",e[16]),_(k,"change",e[17]),_(P,"change",e[18]),_($e,"click",e[13]),_(Ce,"change",e[21]),_(Be,"input",e[22]),_(Ze,"input",e[23])],bt=!0)},p(e,n){if((!xt||2&n[0])&&wt!==(wt=e[1].name+"")&&y(s,wt),4&n[0]&&(u.checked=e[2]),256&n[0]&&(k.checked=e[8]),512&n[0]&&(P.checked=e[9]),(!xt||768&n[0]&&F!==(F=e[8]||e[9]?2:1))&&x(T,"rowspan",F),(!xt||768&n[0]&&U!==(U=e[8]||e[9]?2:1))&&x(I,"rowspan",U),(!xt||768&n[0]&&H!==(H=e[8]||e[9]?2:1))&&x(G,"rowspan",H),(!xt||768&n[0]&&X!==(X=e[8]||e[9]?2:1))&&x(Z,"rowspan",X),(!xt||768&n[0]&&le!==(le=e[8]||e[9]?2:1))&&x(ee,"rowspan",le),e[8]?zt?zt.p(e,n):(zt=xn(e),zt.c(),zt.m(O,ue)):zt&&(zt.d(1),zt=null),e[9]?jt||(jt=yn(),jt.c(),jt.m(O,null)):jt&&(jt.d(1),jt=null),e[8]||e[9]?Nt?Nt.p(e,n):(Nt=wn(e),Nt.c(),Nt.m(t,ce)):Nt&&(Nt.d(1),Nt=null),4896&n[0]){let r;for(Pt=e[5],r=0;r<Pt.length;r+=1){const a=gn(e,Pt,r);St[r]?St[r].p(a,n):(St[r]=Sn(a),St[r].c(),St[r].m(t,null))}for(;r<St.length;r+=1)St[r].d(1);St.length=Pt.length}if(128&n[0]&&(Ce.checked=e[7]),16&n[0]&&b(Be.value)!==e[4]&&w(Be,e[4]),8&n[0]&&b(Ze.value)!==e[3]&&w(Ze,e[3]),216&n[0]){let t;for(At=e[6],t=0;t<At.length;t+=1){const r=mn(e,At,t);Et[t]?Et[t].p(r,n):(Et[t]=Tn(r),Et[t].c(),Et[t].m(me,Xe))}for(;t<Et.length;t+=1)Et[t].d(1);Et.length=At.length}(!xt||1024&n[0])&&Ct!==(Ct=e[10].toFixed(9)+"")&&y(pt,Ct),(!xt||2048&n[0])&&kt!==(kt=e[11].toFixed(2)+"")&&y(mt,kt);const r={};2&n[0]&&(r.pieces=e[1]),!vt&&1&n[0]&&(vt=!0,r.estimations=e[0],B(()=>vt=!1)),_t.$set(r)},i(e){xt||(W(_t.$$.fragment,e),xt=!0)},o(e){V(_t.$$.fragment,e),xt=!1},d(e){e&&p(t),zt&&zt.d(),jt&&jt.d(),Nt&&Nt.d(),d(St,e),e&&p(pe),e&&p(de),e&&p(fe),e&&p(me),d(Et,e),e&&p(ht),e&&p(gt),e&&p($t),ae(_t,e),bt=!1,r(yt)}}}function Ln(e,t){return e.epaisseur_plateau<t.epaisseur_plateau?1:e.epaisseur_plateau>t.epaisseur_plateau?-1:e.longueur<t.longueur?1:e.longueur>t.longueur?-1:e.largeur<t.largeur?1:e.largeur>t.largeur?-1:0}function Fn(e,t,n){let r,a,s,l,o,u,i,{pieces:c=[]}=t,{merge:p=!0}=t,{estimations:d}=t,f=!0,m=!0,h=!1,g=!0;O("settings").subscribe(e=>{n(3,u=e.cubeprice),n(4,i=e.cubemargin)});let $=[];return e.$$set=e=>{"pieces"in e&&n(1,c=e.pieces),"merge"in e&&n(14,p=e.merge),"estimations"in e&&n(0,d=e.estimations)},e.$$.update=()=>{2&e.$$.dirty[0]&&n(15,r=c.pieces.reduce((e,t)=>e.concat(t.individual()),[]).map(e=>e.piece?e.piece.update_new({...e.piece,names:e.nom?e.nom.split(" "):e.piece.names,que:quantite*(e.que||e.piece.que||1)}):e).sort(Ln)),49152&e.$$.dirty[0]&&n(6,a=p?Object.values(r.reduce((e,t)=>(e[t.signature()]=[...e[t.signature()]||[],t],e),{})).map(e=>e.reduce((e,t)=>null==e?t:e.merge(t),null)).sort(Ln):r),80&e.$$.dirty[0]&&n(10,s=a.map(e=>e.que*e.cubage(i/100)).reduce((e,t)=>e+t,0)),88&e.$$.dirty[0]&&n(11,l=a.map(e=>e.que*e.prix(u,i/100)).reduce((e,t)=>e+t,0)),6&e.$$.dirty[0]&&n(5,$=function(e,t){return e.flat_groups("",t).map(e=>{const t=e.pieces.reduce((e,t)=>({...e,[t.epaisseur]:[...e[t.epaisseur]||[],t]}),{}),n=Object.keys(t).map(e=>({epaisseur:e,nb_pieces:t[e].length,surface:t[e].reduce((e,t)=>e+t.surface(),0)})),{xmin:r,xmax:a,ymin:s,ymax:l,zmin:o,zmax:u}=e.bounding_box(),i=e.pieces.filter(e=>e.features.includes("panneau")||e.features.includes("panneau-seul"));return{name:e.name,dimension_x:a-r,dimension_y:l-s,dimension_z:u-o,nb_tenons:e.pieces.reduce((e,t)=>e+t.nombre_tenons,0),nb_pieces:e.pieces.length,surface:e.surface(),epaisseurs:n,nb_panneaux:i.length,m2_panneaux:i.reduce((e,t)=>e+t.surface(),0)}}).filter(e=>e.nb_pieces>0)}(c,m)),32&e.$$.dirty[0]&&n(12,o=Object.keys($.reduce((e,t)=>(t.epaisseurs.forEach(t=>e[t.epaisseur]=!0),e),{})))},[d,c,m,u,i,$,a,f,h,g,s,l,o,function(){let e=[["PiÃ¨ce",f?"Num":"QuÃ©","long","larg","ep","Arrasement","Surface (mÂ²)","epaisseur plateau","Cubage (sans marge)","Cubage (avec marge)","Prix au mÂ³"].map(e=>`"${e}"`).join(","),["","","","","","","","","",i+"%",u].map(e=>`"${e}"`).join(",")];f&&e.push("");let t=e.length+1;for(let r of a){t=e.length+1;let a=[r.longueur,r.largeur,r.epaisseur,r.string_arrasement(),`=C${t}*D${t}/1000000`,r.epaisseur_plateau,`=${f?"":`B${t}*`}G${t}*H${t}/1000`,`=I${t}*$J$2`,`=J${t}*$K$2`];if(f){var n=1;for(name of r.name_list)e.push([name,n].concat(a).map(e=>`"${e}"`).join(",")),n=`=B${t}+1`,t=e.length+1;e.push("")}else e.push([r.name,r.que||1].concat(a).map(e=>`"${e}"`).join(","))}t=e.length+1,e.push(["Total","","","","","","","",`=SUM(I2:I${t-1})`,`=SUM(J2:J${t-1})`,`=SUM(K2:K${t-1})`].map(e=>`"${e}"`).join(","));let r="\ufeff"+e.join("\n"),s=(prompt("Nom du fichier :","dÃ©bit - "+name)||"liste de dÃ©bit")+".csv",l=new window.File([r],s,{type:"text/csv"}),o=URL.createObjectURL(l);try{let e=document.createElement("a");e.href=o,e.style.display="none",e.setAttribute("download",s),document.body.appendChild(e),e.click(),document.body.removeChild(e)}finally{URL.revokeObjectURL(o)}},p,r,function(){m=this.checked,n(2,m)},function(){h=this.checked,n(8,h)},function(){g=this.checked,n(9,g)},(e,t)=>t.epaisseur==e,(e,t)=>t.epaisseur==e,function(){f=this.checked,n(7,f)},function(){i=b(this.value),n(4,i)},function(){u=b(this.value),n(3,u)},function(e){d=e,n(0,d)}]}class Mn extends oe{constructor(e){super(),le(this,e,Fn,qn,s,{pieces:1,merge:14,estimations:0},[-1,-1])}}function In(e,t,n){const r=e.slice();return r[23]=t[n],r[25]=n,r}function Rn(e){let t,n,r,a,s,l;function o(t){e[12].call(null,t)}let u={pieces:e[23]||[],name:"Dessin "+(e[25]+1)};return void 0!==e[8]&&(u.zoom=e[8]),n=new yt({props:u}),L.push(()=>te(n,"zoom",o)),{c(){t=f("div"),ne(n.$$.fragment),a=g(),x(t,"data-count",s=e[6].length)},m(e,r){c(e,t,r),re(n,t,null),i(t,a),l=!0},p(e,a){const o={};128&a&&(o.pieces=e[23]||[]),!r&&256&a&&(r=!0,o.zoom=e[8],B(()=>r=!1)),n.$set(o),(!l||64&a&&s!==(s=e[6].length))&&x(t,"data-count",s)},i(e){l||(W(n.$$.fragment,e),l=!0)},o(e){V(n.$$.fragment,e),l=!1},d(e){e&&p(t),ae(n)}}}function Un(e){let t,n,r,a,s,l,o,u,m,$,b,w=e[5].type+"",C=e[5].name+"",k=e[7],z=[];for(let t=0;t<k.length;t+=1)z[t]=Rn(In(e,k,t));const j=e=>V(z[e],1,1,()=>{z[e]=null});return{c(){t=f("div"),n=f("h2"),r=h(w),a=g(),s=h(C),l=g(),o=f("a"),o.textContent="â",u=g();for(let e=0;e<z.length;e+=1)z[e].c();x(o,"href","@"),x(t,"slot","plan")},m(p,d){c(p,t,d),i(t,n),i(n,r),i(n,a),i(n,s),i(n,l),i(n,o),i(t,u);for(let e=0;e<z.length;e+=1)z[e].m(t,null);m=!0,$||(b=_(o,"click",v(e[9])),$=!0)},p(e,n){if((!m||32&n)&&w!==(w=e[5].type+"")&&y(r,w),(!m||32&n)&&C!==(C=e[5].name+"")&&y(s,C),448&n){let r;for(k=e[7],r=0;r<k.length;r+=1){const a=In(e,k,r);z[r]?(z[r].p(a,n),W(z[r],1)):(z[r]=Rn(a),z[r].c(),W(z[r],1),z[r].m(t,null))}for(K(),r=k.length;r<z.length;r+=1)j(r);X()}},i(e){if(!m){for(let e=0;e<k.length;e+=1)W(z[e]);m=!0}},o(e){z=z.filter(Boolean);for(let e=0;e<z.length;e+=1)V(z[e]);m=!1},d(e){e&&p(t),d(z,e),$=!1,b()}}}function Bn(e){let t,n,r,a,s,l;function o(t){e[13].call(null,t)}function u(t){e[14].call(null,t)}function i(t){e[15].call(null,t)}let d={children:e[2],childrenState:e[4],drawings:!0};return void 0!==e[3]&&(d.childrenPos=e[3]),void 0!==e[6]&&(d.pieces=e[6]),void 0!==e[7]&&(d.pieces_drawings=e[7]),n=new tn({props:d}),L.push(()=>te(n,"childrenPos",o)),L.push(()=>te(n,"pieces",u)),L.push(()=>te(n,"pieces_drawings",i)),{c(){t=f("div"),ne(n.$$.fragment),x(t,"slot","children")},m(e,r){c(e,t,r),re(n,t,null),l=!0},p(e,t){const l={};4&t&&(l.children=e[2]),16&t&&(l.childrenState=e[4]),!r&&8&t&&(r=!0,l.childrenPos=e[3],B(()=>r=!1)),!a&&64&t&&(a=!0,l.pieces=e[6],B(()=>a=!1)),!s&&128&t&&(s=!0,l.pieces_drawings=e[7],B(()=>s=!1)),n.$set(l)},i(e){l||(W(n.$$.fragment,e),l=!0)},o(e){V(n.$$.fragment,e),l=!1},d(e){e&&p(t),ae(n)}}}function Jn(e){let t,n,r;return n=new Mn({props:{pieces:new kt(e[6],"Ensemble "+e[5].name,"Ensemble")}}),{c(){t=f("div"),ne(n.$$.fragment),x(t,"slot","tables")},m(e,a){c(e,t,a),re(n,t,null),r=!0},p(e,t){const r={};96&t&&(r.pieces=new kt(e[6],"Ensemble "+e[5].name,"Ensemble")),n.$set(r)},i(e){r||(W(n.$$.fragment,e),r=!0)},o(e){V(n.$$.fragment,e),r=!1},d(e){e&&p(t),ae(n)}}}function Gn(t){let n,r;return{c(){n=g(),r=g()},m(e,t){c(e,n,t),c(e,r,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r)}}}function Dn(e){let t,n,r,a,s;function l(t){e[16].call(null,t)}function o(t){e[17].call(null,t)}function u(t){e[18].call(null,t)}let i={state:e[1],path:e[0],multi_drawings:!0,$$slots:{default:[Gn],tables:[Jn],children:[Bn],plan:[Un]},$$scope:{ctx:e}};return void 0!==e[5]&&(i.data=e[5]),void 0!==e[2]&&(i.children=e[2]),void 0!==e[4]&&(i.childrenState=e[4]),t=new Ht({props:i}),L.push(()=>te(t,"data",l)),L.push(()=>te(t,"children",o)),L.push(()=>te(t,"childrenState",u)),t.$on("datachange",e[19]),{c(){ne(t.$$.fragment)},m(e,n){re(t,e,n),s=!0},p(e,[s]){const l={};2&s&&(l.state=e[1]),1&s&&(l.path=e[0]),67109372&s&&(l.$$scope={dirty:s,ctx:e}),!n&&32&s&&(n=!0,l.data=e[5],B(()=>n=!1)),!r&&4&s&&(r=!0,l.children=e[2],B(()=>r=!1)),!a&&16&s&&(a=!0,l.childrenState=e[4],B(()=>a=!1)),t.$set(l)},i(e){s||(W(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){ae(t,e)}}}function Hn(e,t,n){let r,{name:a=null}=t,{path:s="0"}=t,{initdata:l={}}=t,{state:o={}}=t,u=[],i={children:[],childrenPos:[],type:"Ensemble",id:0},c=l.children,p=l.childrenPos;let d=[],f=[],m=.5;return e.$$set=e=>{"name"in e&&n(10,a=e.name),"path"in e&&n(0,s=e.path),"initdata"in e&&n(11,l=e.initdata),"state"in e&&n(1,o=e.state)},e.$$.update=()=>{2048&e.$$.dirty&&function(e){console.log("initdata changed"),n(3,p=e.childrenPos),n(2,c=e.children)}(l),3084&e.$$.dirty&&function(e,t,a,s,l){n(5,r={...e,name:t,...a,childrenPos:s,children:l})}(i,a,l,p,c)},[s,o,c,p,u,r,d,f,m,function(){n(5,r.name=prompt(`Renommer "${r.name}" en :`,r.name)||r.name,r)},a,l,function(e){m=e,n(8,m)},function(e){p=e,n(3,p)},function(e){d=e,n(6,d)},function(e){f=e,n(7,f)},function(e){r=e,n(5,r)},function(e){c=e,n(2,c)},function(e){u=e,n(4,u)},function(t){T(e,t)}]}class Qn extends oe{constructor(e){super(),le(this,e,Hn,Dn,s,{name:10,path:0,initdata:11,state:1})}}function Zn(e,t,n){const r=e.slice();return r[9]=t[n],r}function Kn(e){let t,n,r,a,s,l,o,u,d,f,g,$,_,v,b,w,k,z,j,N,P,S,A,E,O,T,q,L=e[9].text+"",F=e[9].length+"",M=e[9].text_suffix+"";return{c(){t=m("circle"),a=m("circle"),o=m("text"),u=h(L),d=h(F),f=h(M),_=m("line"),z=m("line"),A=m("line"),x(t,"cx",n=e[9].zstart),x(t,"cy",r=20*e[9].row+15),x(t,"r","2"),x(t,"stroke","black"),x(t,"stroke-width","1"),x(t,"fill","white"),x(a,"cx",s=e[9].zstart+e[9].zlength),x(a,"cy",l=20*e[9].row+15),x(a,"r","2"),x(a,"stroke","black"),x(a,"stroke-width","1"),x(a,"fill","white"),x(o,"x",g=e[9].zstart+e[9].zlength/2),x(o,"y",$=20*e[9].row+13),x(o,"text-anchor","middle"),x(o,"font-size","10pt"),x(_,"x1",v=e[9].zstart-5*e[2]),x(_,"y1",b=20*e[9].row+15),x(_,"x2",w=e[9].zstart+e[9].zlength+5*e[2]),x(_,"y2",k=20*e[9].row+15),C(_,"stroke-width","1"),C(_,"stroke","rgb(0,0,0)"),x(z,"x1",j=e[9].zstart),x(z,"y1",N=20*e[9].row+10),x(z,"x2",P=e[9].zstart),x(z,"y2",S=20*e[9].row+19),C(z,"stroke-width","1"),C(z,"stroke","rgb(0,0,0)"),x(A,"x1",E=e[9].zstart+e[9].zlength),x(A,"y1",O=20*e[9].row+10),x(A,"x2",T=e[9].zstart+e[9].zlength),x(A,"y2",q=20*e[9].row+19),C(A,"stroke-width","1"),C(A,"stroke","rgb(0,0,0)")},m(e,n){c(e,t,n),c(e,a,n),c(e,o,n),i(o,u),i(o,d),i(o,f),c(e,_,n),c(e,z,n),c(e,A,n)},p(e,i){16&i&&n!==(n=e[9].zstart)&&x(t,"cx",n),16&i&&r!==(r=20*e[9].row+15)&&x(t,"cy",r),16&i&&s!==(s=e[9].zstart+e[9].zlength)&&x(a,"cx",s),16&i&&l!==(l=20*e[9].row+15)&&x(a,"cy",l),16&i&&L!==(L=e[9].text+"")&&y(u,L),16&i&&F!==(F=e[9].length+"")&&y(d,F),16&i&&M!==(M=e[9].text_suffix+"")&&y(f,M),16&i&&g!==(g=e[9].zstart+e[9].zlength/2)&&x(o,"x",g),16&i&&$!==($=20*e[9].row+13)&&x(o,"y",$),20&i&&v!==(v=e[9].zstart-5*e[2])&&x(_,"x1",v),16&i&&b!==(b=20*e[9].row+15)&&x(_,"y1",b),20&i&&w!==(w=e[9].zstart+e[9].zlength+5*e[2])&&x(_,"x2",w),16&i&&k!==(k=20*e[9].row+15)&&x(_,"y2",k),16&i&&j!==(j=e[9].zstart)&&x(z,"x1",j),16&i&&N!==(N=20*e[9].row+10)&&x(z,"y1",N),16&i&&P!==(P=e[9].zstart)&&x(z,"x2",P),16&i&&S!==(S=20*e[9].row+19)&&x(z,"y2",S),16&i&&E!==(E=e[9].zstart+e[9].zlength)&&x(A,"x1",E),16&i&&O!==(O=20*e[9].row+10)&&x(A,"y1",O),16&i&&T!==(T=e[9].zstart+e[9].zlength)&&x(A,"x2",T),16&i&&q!==(q=20*e[9].row+19)&&x(A,"y2",q)},d(e){e&&p(t),e&&p(a),e&&p(o),e&&p(_),e&&p(z),e&&p(A)}}}function Xn(t){let n,r,a=t[4],s=[];for(let e=0;e<a.length;e+=1)s[e]=Kn(Zn(t,a,e));return{c(){n=m("g");for(let e=0;e<s.length;e+=1)s[e].c();x(n,"transform",r="translate("+t[0]+", "+t[1]+") "+t[3])},m(e,t){c(e,n,t);for(let e=0;e<s.length;e+=1)s[e].m(n,null)},p(e,[t]){if(20&t){let r;for(a=e[4],r=0;r<a.length;r+=1){const l=Zn(e,a,r);s[r]?s[r].p(l,t):(s[r]=Kn(l),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}11&t&&r!==(r="translate("+e[0]+", "+e[1]+") "+e[3])&&x(n,"transform",r)},i:e,o:e,d(e){e&&p(n),d(s,e)}}}function Wn(e,t,n){let r,a,s,{dim:l=[]}=t,{zoom:o=1}=t,{suffix:u=""}=t,{pos:i="top"}=t,{x:c=0}=t,{y:p=0}=t;return e.$$set=e=>{"dim"in e&&n(5,l=e.dim),"zoom"in e&&n(6,o=e.zoom),"suffix"in e&&n(7,u=e.suffix),"pos"in e&&n(8,i=e.pos),"x"in e&&n(0,c=e.x),"y"in e&&n(1,p=e.y)},e.$$.update=()=>{256&e.$$.dirty&&n(3,r="left"==i?"rotate(-90)":""),256&e.$$.dirty&&n(2,a="left"==i?-1:1),228&e.$$.dirty&&n(4,s=l.map(e=>({row:0,text:"",text_suffix:u,...e,zstart:o*e.start*a,zlength:o*e.length*a})))},[c,p,a,r,s,l,o,u,i]}class Vn extends oe{constructor(e){super(),le(this,e,Wn,Xn,s,{dim:5,zoom:6,suffix:7,pos:8,x:0,y:1})}}class Yn{constructor(){this.type="Piece",this.longueur=0,this.largeur=0,this.epaisseur=0,this.arrasement=0,this.x=0,this.y=0,this.z=0,this.orient="xyz",this.names=[],this.que=1,this.features=[]}update_if(e,t){return e?this.update(t):this}update(e){if(e.features&&1==e.features.length&&1==e.features[0])throw console.log("WARNING: incorrect feature %o",e),new Exception;return this.update_new({...this,props:e})}update_new(e){let t=Object.assign(Object.create(Yn.prototype),e);if(t.features&&1==t.features.length&&1==t.features[0])throw console.log("WARNING: incorrect feature %o",t),new Exception;return t}get epaisseur_plateau(){return this.epaisseur<=10?this.epaisseur+3:this.epaisseur<=17?20:this.epaisseur<=27?30:this.epaisseur<=32?35:this.epaisseur<=42?45:this.epaisseur+10}get nombre_tenons(){return(this.longueur_tenon1?1:0)+(this.longueur_tenon2?1:0)}get name(){return this.names.join(" ")}get name_list(){return(this.names_list||[this.names]).map(e=>e.join(" "))}set_name(){return this.update_new({...this,names:Array.from(arguments).filter(e=>e)})}add_name(){return this.update_new({...this,names:this.names.concat(Array.from(arguments).filter(e=>e))})}prefix_name(){return this.update_new({...this,names:Array.from(arguments).filter(e=>e).concat(this.names)})}add_features(){return this.update_new({...this,features:[...this.features,...Array.from(arguments).filter(e=>e&&!this.features.includes(e))]})}count_features(){return Array.from(arguments,e=>[e,this.features.includes(e)?this.que:0]).reduce((e=0,t=1,(n,r)=>(n||(n={}),n[r[e||0]]=null==e||t?r[t||1]:r,n)),{});var e,t}multiply_que(e){return this.update_new({...this,que:this.que*e})}build_if(e,t,n,r){return e?this.build(t,n,r):this}build(e,t,n){return this.update_new({...this,arrasement:e||this.arrasement,longueur:e||this.longueur,largeur:t||this.largeur,epaisseur:n||this.epaisseur})}ajout_tenons(e,t){return void 0===t&&(t=e),this.update_new({...this,arrasement:this.arrasement||this.longueur,longueur:this.longueur+e+t,longueur_tenon1:(this.longueur_tenon1||0)+e,longueur_tenon2:(this.longueur_tenon2||0)+t})}usine_tenons(e,t){return void 0===t&&(t=e),this.update_new({...this,arrasement:this.arrasement-e-t,longueur_tenon1:(this.longueur_tenon1||0)+e,longueur_tenon2:(this.longueur_tenon2||0)+t})}put(e,t,n,r){return this.update_new({...this,x:e||this.x,y:t||this.y,z:n||this.z,orient:r?Ct(r):this.orient})}dim(e,t,n,r){t=null==t?"longueur":t,n=null==n?"largeur":n,r=null==r?"epaisseur":r;let a=e==e.toLowerCase()?1:-1;e=e.toLowerCase();let s=[0==t?0:this[t]||0,0==n?0:this[n]||0,0==r?0:this[r]||0];return[a*this[e],a*s[this.orient.indexOf(e)]]}bounding_box(){let[e,t]=this.dim("x"),[n,r]=this.dim("y"),[a,s]=this.dim("z");return{dx:t,dy:r,dz:s,xmin:e,ymin:n,zmin:a,xmax:e+t,ymax:n+r,zmax:a+s}}projection_polyline(e){e=wt(e);let[t,n]=this.dim(e[0]),[r,a]=this.dim(e[1]),[s,l]=this.dim(e[0],"longueur_tenon1",0,0),[o,u]=this.dim(e[0],"longueur_tenon2",0,0),[i,c]=this.dim(e[1],"longueur_tenon1",0,0),[p,d]=this.dim(e[1],"longueur_tenon2",0,0),f=Math.floor(n/3),m=n-f,h=Math.floor(a/3),g=a-h;return[[t+l,r+c],[t+f,r+c],[t+f,r],[t+m,r],[t+m,r+c],[t+n-u,r+c],[t+n-u,r+h],[t+n,r+h],[t+n,r+g],[t+n-u,r+g],[t+n-u,r+a-d],[t+m,r+a-d],[t+m,r+a],[t+f,r+a],[t+f,r+a-d],[t+l,r+a-d],[t+l,r+g],[t,r+g],[t,r+h],[t+l,r+h],[t+l,r+c]].map(e=>[e[0],-e[1]])}string_arrasement(){return this.arrasement&&this.arrasement!=this.longueur?this.arrasement:""}string_dimentions(){return`${this.longueur} x ${this.largeur} x ${this.epaisseur}`}string_dimentions_plateau(){return`${this.longueur} x ${this.largeur} x ${this.epaisseur_plateau}`}surface(){return this.longueur*this.largeur*1e-6}cubage(e){return this.longueur*this.largeur*this.epaisseur_plateau*1e-9*(e||1)}prix(e,t){return this.cubage(t)*e}individual(){return[this]}signature(){return JSON.stringify(Object.keys(this).sort().filter(e=>!["names","names_list","x","y","z","orient","que"].includes(e)).map(e=>[e,this[e]]).reduce((e,t)=>e.concat(t),[]))}merge(e){return console.assert(this.signature()==e.signature()),this.update_new({...this,que:(this.que||1)+(e.que||1),names_list:[...this.names_list||[this.names],e.names],names:this.names.filter(t=>e.names.includes(t)).concat(this.names.filter(t=>!e.names.includes(t)&&!e.names.includes(`(${t})`)).map(e=>"("==e[0]?e:`(${e})`)).concat(e.names.filter(e=>!this.names.includes(e)&&!this.names.includes(`(${e})`)).map(e=>"("==e[0]?e:`(${e})`))})}}function er(e,t,n){const r=e.slice();return r[39]=t[n],r}function tr(e){let t,n;return t=new et({props:{piece:e[39],pos:"avant"}}),{c(){ne(t.$$.fragment)},m(e,r){re(t,e,r),n=!0},p(e,n){const r={};128&n[0]&&(r.piece=e[39]),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ae(t,e)}}}function nr(e){let t,n,a,s,l,o,u,$,v,b,C,k,z,j,N,P,S,A,E,O,T=100*e[9]+"";n=new yt({props:{pieces:e[7],name:"Porte "+e[1].name}}),k=new Vn({props:{zoom:e[9],x:"20",y:"0",dim:[{text:"largeur: ",start:0,length:e[2].largeur,row:2},{text:"lon. traverse: ",start:e[6].x,length:e[6].longueur,row:1},{start:e[4].x,length:e[4].largeur,row:0},{start:e[5].x,length:e[5].largeur,row:0}]}}),z=new Vn({props:{zoom:e[9],x:"0",y:"60",pos:"left",dim:[{text:"hauteur: ",start:0,length:e[2].hauteur,row:0}]}});let q=e[7],L=[];for(let t=0;t<q.length;t+=1)L[t]=tr(er(e,q,t));const F=e=>V(L[e],1,1,()=>{L[e]=null});return{c(){t=f("div"),ne(n.$$.fragment),a=g(),s=f("p"),l=h("Zoom : "),o=f("input"),u=g(),$=h(T),v=h(" %"),b=g(),C=m("svg"),ne(k.$$.fragment),ne(z.$$.fragment),j=m("g");for(let e=0;e<L.length;e+=1)L[e].c();x(o,"type","range"),x(o,"min","0"),x(o,"max","1"),x(o,"step",".05"),x(j,"transform",N="translate(20, "+(60+e[9]*e[2].hauteur)+") scale("+e[9]+" "+e[9]+")"),x(C,"width",P=e[9]*e[2].largeur+25),x(C,"height",S=e[9]*e[2].hauteur+65),x(t,"slot","plan")},m(r,p){c(r,t,p),re(n,t,null),i(t,a),i(t,s),i(s,l),i(s,o),w(o,e[9]),i(s,u),i(s,$),i(s,v),i(t,b),i(t,C),re(k,C,null),re(z,C,null),i(C,j);for(let e=0;e<L.length;e+=1)L[e].m(j,null);A=!0,E||(O=[_(o,"change",e[19]),_(o,"input",e[19])],E=!0)},p(e,t){const r={};128&t[0]&&(r.pieces=e[7]),2&t[0]&&(r.name="Porte "+e[1].name),n.$set(r),512&t[0]&&w(o,e[9]),(!A||512&t[0])&&T!==(T=100*e[9]+"")&&y($,T);const a={};512&t[0]&&(a.zoom=e[9]),116&t[0]&&(a.dim=[{text:"largeur: ",start:0,length:e[2].largeur,row:2},{text:"lon. traverse: ",start:e[6].x,length:e[6].longueur,row:1},{start:e[4].x,length:e[4].largeur,row:0},{start:e[5].x,length:e[5].largeur,row:0}]),k.$set(a);const s={};if(512&t[0]&&(s.zoom=e[9]),4&t[0]&&(s.dim=[{text:"hauteur: ",start:0,length:e[2].hauteur,row:0}]),z.$set(s),128&t[0]){let n;for(q=e[7],n=0;n<q.length;n+=1){const r=er(e,q,n);L[n]?(L[n].p(r,t),W(L[n],1)):(L[n]=tr(r),L[n].c(),W(L[n],1),L[n].m(j,null))}for(K(),n=q.length;n<L.length;n+=1)F(n);X()}(!A||516&t[0]&&N!==(N="translate(20, "+(60+e[9]*e[2].hauteur)+") scale("+e[9]+" "+e[9]+")"))&&x(j,"transform",N),(!A||516&t[0]&&P!==(P=e[9]*e[2].largeur+25))&&x(C,"width",P),(!A||516&t[0]&&S!==(S=e[9]*e[2].hauteur+65))&&x(C,"height",S)},i(e){if(!A){W(n.$$.fragment,e),W(k.$$.fragment,e),W(z.$$.fragment,e);for(let e=0;e<q.length;e+=1)W(L[e]);A=!0}},o(e){V(n.$$.fragment,e),V(k.$$.fragment,e),V(z.$$.fragment,e),L=L.filter(Boolean);for(let e=0;e<L.length;e+=1)V(L[e]);A=!1},d(e){e&&p(t),ae(n),ae(k),ae(z),d(L,e),E=!1,r(O)}}}function rr(e){let t,n,r;return{c(){t=f("option"),t.textContent="aucun",n=g(),r=f("option"),r.textContent="charniÃ¨res",t.__value="aucun",t.value=t.__value,x(t,"class","svelte-18serza"),r.__value="charnieres",r.value=r.__value,x(r,"class","svelte-18serza")},m(e,a){c(e,t,a),c(e,n,a),c(e,r,a)},d(e){e&&p(t),e&&p(n),e&&p(r)}}}function ar(e){let t,n,r,a,s;return{c(){t=f("option"),t.textContent="tenon et mortaise",n=g(),r=f("option"),r.textContent="contre profil",a=g(),s=f("option"),s.textContent="coupe d'onglet",t.__value="tenon-mortaise",t.value=t.__value,x(t,"class","svelte-18serza"),r.__value="contre-profil",r.value=r.__value,x(r,"class","svelte-18serza"),s.__value="onglet",s.value=s.__value,x(s,"class","svelte-18serza")},m(e,l){c(e,t,l),c(e,n,l),c(e,r,l),c(e,a,l),c(e,s,l)},d(e){e&&p(t),e&&p(n),e&&p(r),e&&p(a),e&&p(s)}}}function sr(e){let t,n,r,a,s,l;function o(t){e[33].call(null,t)}let u={min:"0",def:e[10].profondeur_profil};return void 0!==e[3].profondeur_profil&&(u.value=e[3].profondeur_profil),r=new $e({props:u}),L.push(()=>te(r,"value",o)),{c(){t=f("label"),n=f("span"),n.textContent="Profondeur profil : ",ne(r.$$.fragment),s=h(" mm"),x(n,"class","svelte-18serza"),x(t,"class","svelte-18serza")},m(e,a){c(e,t,a),i(t,n),re(r,t,null),i(t,s),l=!0},p(e,t){const n={};!a&&8&t[0]&&(a=!0,n.value=e[3].profondeur_profil,B(()=>a=!1)),r.$set(n)},i(e){l||(W(r.$$.fragment,e),l=!0)},o(e){V(r.$$.fragment,e),l=!1},d(e){e&&p(t),ae(r)}}}function lr(e){let t,n,r,a,s,l;function o(t){e[32].call(null,t)}let u={min:"0",def:e[10].profondeur_tenons};return void 0!==e[3].profondeur_tenons&&(u.value=e[3].profondeur_tenons),r=new $e({props:u}),L.push(()=>te(r,"value",o)),{c(){t=f("label"),n=f("span"),n.textContent="Profondeur tenons : ",ne(r.$$.fragment),s=h(" mm"),x(n,"class","svelte-18serza"),x(t,"class","svelte-18serza")},m(e,a){c(e,t,a),i(t,n),re(r,t,null),i(t,s),l=!0},p(e,t){const n={};!a&&8&t[0]&&(a=!0,n.value=e[3].profondeur_tenons,B(()=>a=!1)),r.$set(n)},i(e){l||(W(r.$$.fragment,e),l=!0)},o(e){V(r.$$.fragment,e),l=!1},d(e){e&&p(t),ae(r)}}}function or(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,b,y,w,C,k,z,j,N,P,S,A,E,O,T,q,F,M,I,R,U,J,G,D,H,Q,Z,Y,ee,se,le,oe,ue,ie,ce,pe,de,fe,me,he,ge,_e,ve,xe,ye,we,Ce,ke,ze,Ne,Pe,Se,Ae,Ee,Oe,Te,qe,Le,Fe,Me,Ie,Re,Ue,Be,Je,Ge,De,He,Qe,Ze,Ke,Xe,We,Ve,Ye,et,tt,nt,rt,at,st,lt,ot,ut,it,ct,pt;function dt(t){e[20].call(null,t)}let ft={def:e[10].ferrage,force:e[10].force_ferrage,$$slots:{default:[rr]},$$scope:{ctx:e}};function mt(t){e[21].call(null,t)}void 0!==e[3].ferrage&&(ft.value=e[3].ferrage),l=new be({props:ft}),L.push(()=>te(l,"value",dt));let ht={def:e[10].type,$$slots:{default:[ar]},$$scope:{ctx:e}};function gt(t){e[22].call(null,t)}void 0!==e[3].type&&(ht.value=e[3].type),_=new be({props:ht}),L.push(()=>te(_,"value",mt));let $t={min:"0",def:e[10].largeur,force:e[10].force_largeur};function _t(t){e[23].call(null,t)}void 0!==e[3].largeur&&($t.value=e[3].largeur),C=new $e({props:$t}),L.push(()=>te(C,"value",gt));let vt={min:"0",def:e[10].hauteur,force:e[10].force_hauteur};function xt(t){e[24].call(null,t)}void 0!==e[3].hauteur&&(vt.value=e[3].hauteur),S=new $e({props:vt}),L.push(()=>te(S,"value",_t));let bt={min:"0",def:e[10].epaisseur,force:e[10].force_epaisseur};function yt(t){e[25].call(null,t)}void 0!==e[3].epaisseur&&(bt.value=e[3].epaisseur),F=new $e({props:bt}),L.push(()=>te(F,"value",xt));let wt={min:"0",def:e[10].largeur_montants};function Ct(t){e[26].call(null,t)}void 0!==e[3].largeur_montants&&(wt.value=e[3].largeur_montants),H=new $e({props:wt}),L.push(()=>te(H,"value",yt));let kt={min:"0",def:e[10].largeur_traverses};function zt(t){e[27].call(null,t)}void 0!==e[3].largeur_traverses&&(kt.value=e[3].largeur_traverses),le=new $e({props:kt}),L.push(()=>te(le,"value",Ct));let jt={min:"0",def:e[2].largeur_traverses};function Nt(t){e[28].call(null,t)}void 0!==e[3].largeur_traverse_h&&(jt.value=e[3].largeur_traverse_h),de=new $e({props:jt}),L.push(()=>te(de,"value",zt));let Pt={min:"0",def:e[2].largeur_traverses};function St(t){e[29].call(null,t)}void 0!==e[3].largeur_traverse_b&&(Pt.value=e[3].largeur_traverse_b),ve=new $e({props:Pt}),L.push(()=>te(ve,"value",Nt));let At={min:"0",def:e[10].epaisseur_panneau};function Et(t){e[30].call(null,t)}void 0!==e[3].epaisseur_panneau&&(At.value=e[3].epaisseur_panneau),Pe=new $e({props:At}),L.push(()=>te(Pe,"value",St));let Ot={min:"0",def:e[10].profondeur_rainure};function Tt(t){e[31].call(null,t)}void 0!==e[3].profondeur_rainure&&(Ot.value=e[3].profondeur_rainure),qe=new $e({props:Ot}),L.push(()=>te(qe,"value",Et));let qt={min:"0",def:e[10].jeu_rainure};void 0!==e[3].jeu_rainure&&(qt.value=e[3].jeu_rainure),Ue=new $e({props:qt}),L.push(()=>te(Ue,"value",Tt));const Lt=[lr,sr],Ft=[];function Mt(e,t){return"tenon-mortaise"==e[2].type?0:"contre-profil"==e[2].type?1:-1}function It(t){e[34].call(null,t)}~(De=Mt(e))&&(He=Ft[De]=Lt[De](e));let Rt={def:e[10].inclure_panneau};function Ut(t){e[35].call(null,t)}void 0!==e[3].inclure_panneau&&(Rt.checked=e[3].inclure_panneau),Xe=new je({props:Rt}),L.push(()=>te(Xe,"checked",It));let Bt={def:e[10].encastree};function Jt(t){e[36].call(null,t)}void 0!==e[3].encastree&&(Bt.checked=e[3].encastree),rt=new je({props:Bt}),L.push(()=>te(rt,"checked",Ut));let Gt={min:"0",def:e[10].jeu_encastrement};return void 0!==e[3].jeu_encastrement&&(Gt.value=e[3].jeu_encastrement),ut=new $e({props:Gt}),L.push(()=>te(ut,"value",Jt)),{c(){t=f("div"),n=f("form"),r=f("label"),a=f("span"),a.textContent="Ferrage :",s=g(),ne(l.$$.fragment),u=g(),d=f("label"),m=f("span"),m.textContent="Type :",$=g(),ne(_.$$.fragment),b=g(),y=f("label"),w=f("span"),w.textContent="Largeur   : ",ne(C.$$.fragment),z=h(" mm"),j=g(),N=f("label"),P=f("span"),P.textContent="Hauteur   : ",ne(S.$$.fragment),E=h(" mm"),O=g(),T=f("label"),q=f("span"),q.textContent="Ãpaisseur : ",ne(F.$$.fragment),I=h(" mm"),R=g(),U=f("hr"),J=g(),G=f("label"),D=f("span"),D.textContent="Largeur montants : ",ne(H.$$.fragment),Z=h(" mm"),Y=g(),ee=f("label"),se=f("span"),se.textContent="largeur traverses : ",ne(le.$$.fragment),ue=h(" mm"),ie=g(),ce=f("label"),pe=f("span"),pe.textContent="largeur traverse haut : ",ne(de.$$.fragment),me=h(" mm"),he=g(),ge=f("label"),_e=f("span"),_e.textContent="largeur traverse bas : ",ne(ve.$$.fragment),ye=h(" mm"),we=g(),Ce=f("hr"),ke=g(),ze=f("label"),Ne=f("span"),Ne.textContent="Ãpaisseur panneau : ",ne(Pe.$$.fragment),Ae=h(" mm"),Ee=g(),Oe=f("label"),Te=f("span"),Te.textContent="Profondeur rainures : ",ne(qe.$$.fragment),Fe=h(" mm"),Me=g(),Ie=f("label"),Re=f("span"),Re.textContent="Jeu paneau / rainure : ",ne(Ue.$$.fragment),Je=h(" mm"),Ge=g(),He&&He.c(),Qe=g(),Ze=f("label"),Ke=f("span"),Ke.textContent="Inclure le paneau",ne(Xe.$$.fragment),Ve=g(),Ye=f("hr"),et=g(),tt=f("label"),nt=f("span"),nt.textContent="EncastrÃ©e",ne(rt.$$.fragment),st=g(),lt=f("label"),ot=f("span"),ot.textContent="jeu encastrement (tout autour) : ",ne(ut.$$.fragment),ct=h(" mm"),x(a,"class","svelte-18serza"),x(r,"class","svelte-18serza"),x(m,"class","svelte-18serza"),x(d,"class","svelte-18serza"),x(w,"class","svelte-18serza"),x(y,"class","svelte-18serza"),x(P,"class","svelte-18serza"),x(N,"class","svelte-18serza"),x(q,"class","svelte-18serza"),x(T,"class","svelte-18serza"),x(U,"class","svelte-18serza"),x(D,"class","svelte-18serza"),x(G,"class","svelte-18serza"),x(se,"class","svelte-18serza"),x(ee,"class","svelte-18serza"),x(pe,"class","svelte-18serza"),x(ce,"class","svelte-18serza"),x(_e,"class","svelte-18serza"),x(ge,"class","svelte-18serza"),x(Ce,"class","svelte-18serza"),x(Ne,"class","svelte-18serza"),x(ze,"class","svelte-18serza"),x(Te,"class","svelte-18serza"),x(Oe,"class","svelte-18serza"),x(Re,"class","svelte-18serza"),x(Ie,"class","svelte-18serza"),x(Ke,"class","svelte-18serza"),x(Ze,"class","svelte-18serza"),x(Ye,"class","svelte-18serza"),x(nt,"class","svelte-18serza"),x(tt,"class","svelte-18serza"),x(ot,"class","svelte-18serza"),x(lt,"class","svelte-18serza"),x(n,"class","svelte-18serza"),x(t,"class","main"),x(t,"slot","dim")},m(e,o){c(e,t,o),i(t,n),i(n,r),i(r,a),i(r,s),re(l,r,null),i(n,u),i(n,d),i(d,m),i(d,$),re(_,d,null),i(n,b),i(n,y),i(y,w),re(C,y,null),i(y,z),i(n,j),i(n,N),i(N,P),re(S,N,null),i(N,E),i(n,O),i(n,T),i(T,q),re(F,T,null),i(T,I),i(n,R),i(n,U),i(n,J),i(n,G),i(G,D),re(H,G,null),i(G,Z),i(n,Y),i(n,ee),i(ee,se),re(le,ee,null),i(ee,ue),i(n,ie),i(n,ce),i(ce,pe),re(de,ce,null),i(ce,me),i(n,he),i(n,ge),i(ge,_e),re(ve,ge,null),i(ge,ye),i(n,we),i(n,Ce),i(n,ke),i(n,ze),i(ze,Ne),re(Pe,ze,null),i(ze,Ae),i(n,Ee),i(n,Oe),i(Oe,Te),re(qe,Oe,null),i(Oe,Fe),i(n,Me),i(n,Ie),i(Ie,Re),re(Ue,Ie,null),i(Ie,Je),i(n,Ge),~De&&Ft[De].m(n,null),i(n,Qe),i(n,Ze),i(Ze,Ke),re(Xe,Ze,null),i(n,Ve),i(n,Ye),i(n,et),i(n,tt),i(tt,nt),re(rt,tt,null),i(n,st),i(n,lt),i(lt,ot),re(ut,lt,null),i(lt,ct),pt=!0},p(e,t){const r={};2048&t[1]&&(r.$$scope={dirty:t,ctx:e}),!o&&8&t[0]&&(o=!0,r.value=e[3].ferrage,B(()=>o=!1)),l.$set(r);const a={};2048&t[1]&&(a.$$scope={dirty:t,ctx:e}),!v&&8&t[0]&&(v=!0,a.value=e[3].type,B(()=>v=!1)),_.$set(a);const s={};!k&&8&t[0]&&(k=!0,s.value=e[3].largeur,B(()=>k=!1)),C.$set(s);const u={};!A&&8&t[0]&&(A=!0,u.value=e[3].hauteur,B(()=>A=!1)),S.$set(u);const i={};!M&&8&t[0]&&(M=!0,i.value=e[3].epaisseur,B(()=>M=!1)),F.$set(i);const c={};!Q&&8&t[0]&&(Q=!0,c.value=e[3].largeur_montants,B(()=>Q=!1)),H.$set(c);const p={};!oe&&8&t[0]&&(oe=!0,p.value=e[3].largeur_traverses,B(()=>oe=!1)),le.$set(p);const d={};4&t[0]&&(d.def=e[2].largeur_traverses),!fe&&8&t[0]&&(fe=!0,d.value=e[3].largeur_traverse_h,B(()=>fe=!1)),de.$set(d);const f={};4&t[0]&&(f.def=e[2].largeur_traverses),!xe&&8&t[0]&&(xe=!0,f.value=e[3].largeur_traverse_b,B(()=>xe=!1)),ve.$set(f);const m={};!Se&&8&t[0]&&(Se=!0,m.value=e[3].epaisseur_panneau,B(()=>Se=!1)),Pe.$set(m);const h={};!Le&&8&t[0]&&(Le=!0,h.value=e[3].profondeur_rainure,B(()=>Le=!1)),qe.$set(h);const g={};!Be&&8&t[0]&&(Be=!0,g.value=e[3].jeu_rainure,B(()=>Be=!1)),Ue.$set(g);let $=De;De=Mt(e),De===$?~De&&Ft[De].p(e,t):(He&&(K(),V(Ft[$],1,1,()=>{Ft[$]=null}),X()),~De?(He=Ft[De],He?He.p(e,t):(He=Ft[De]=Lt[De](e),He.c()),W(He,1),He.m(n,Qe)):He=null);const x={};!We&&8&t[0]&&(We=!0,x.checked=e[3].inclure_panneau,B(()=>We=!1)),Xe.$set(x);const b={};!at&&8&t[0]&&(at=!0,b.checked=e[3].encastree,B(()=>at=!1)),rt.$set(b);const y={};!it&&8&t[0]&&(it=!0,y.value=e[3].jeu_encastrement,B(()=>it=!1)),ut.$set(y)},i(e){pt||(W(l.$$.fragment,e),W(_.$$.fragment,e),W(C.$$.fragment,e),W(S.$$.fragment,e),W(F.$$.fragment,e),W(H.$$.fragment,e),W(le.$$.fragment,e),W(de.$$.fragment,e),W(ve.$$.fragment,e),W(Pe.$$.fragment,e),W(qe.$$.fragment,e),W(Ue.$$.fragment,e),W(He),W(Xe.$$.fragment,e),W(rt.$$.fragment,e),W(ut.$$.fragment,e),pt=!0)},o(e){V(l.$$.fragment,e),V(_.$$.fragment,e),V(C.$$.fragment,e),V(S.$$.fragment,e),V(F.$$.fragment,e),V(H.$$.fragment,e),V(le.$$.fragment,e),V(de.$$.fragment,e),V(ve.$$.fragment,e),V(Pe.$$.fragment,e),V(qe.$$.fragment,e),V(Ue.$$.fragment,e),V(He),V(Xe.$$.fragment,e),V(rt.$$.fragment,e),V(ut.$$.fragment,e),pt=!1},d(e){e&&p(t),ae(l),ae(_),ae(C),ae(S),ae(F),ae(H),ae(le),ae(de),ae(ve),ae(Pe),ae(qe),ae(Ue),~De&&Ft[De].d(),ae(Xe),ae(rt),ae(ut)}}}function ur(e){let t,n,r;return n=new Mn({props:{pieces:e[8].pieces_group}}),{c(){t=f("div"),ne(n.$$.fragment),x(t,"slot","tables")},m(e,a){c(e,t,a),re(n,t,null),r=!0},p(e,t){const r={};256&t[0]&&(r.pieces=e[8].pieces_group),n.$set(r)},i(e){r||(W(n.$$.fragment,e),r=!0)},o(e){V(n.$$.fragment,e),r=!1},d(e){e&&p(t),ae(n)}}}function ir(t){let n,r;return{c(){n=g(),r=g()},m(e,t){c(e,n,t),c(e,r,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r)}}}function cr(e){let t,n,r;function a(t){e[37].call(null,t)}let s={state:e[8],path:e[0],$$slots:{default:[ir],tables:[ur],dim:[or],plan:[nr]},$$scope:{ctx:e}};return void 0!==e[1]&&(s.data=e[1]),t=new Ht({props:s}),L.push(()=>te(t,"data",a)),t.$on("datachange",e[38]),{c(){ne(t.$$.fragment)},m(e,n){re(t,e,n),r=!0},p(e,r){const a={};256&r[0]&&(a.state=e[8]),1&r[0]&&(a.path=e[0]),1022&r[0]|2048&r[1]&&(a.$$scope={dirty:r,ctx:e}),!n&&2&r[0]&&(n=!0,a.data=e[1],B(()=>n=!1)),t.$set(a)},i(e){r||(W(t.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),r=!1},d(e){ae(t,e)}}}function pr(e,t,n){let r,a,s,l,o,u,i,c,p,d,f,{path:m}=t,{initdata:h={}}=t;O("settings").subscribe(e=>{n(12,f=e)});let g={...h},$={quantite:1,type:"contre-profil",largeur:400,hauteur:600,epaisseur:22,largeur_montants:70,largeur_traverses:70,profondeur_tenons:30,profondeur_rainure:10,profondeur_profil:15,encastree:!1,jeu_encastrement:2,jeu_rainure:1,epaisseur_panneau:16,inclure_panneau:!0,ferrage:"charnieres",...h.defaults},_={...h.opt},v={...h.ui||h.opt},x={},y=.25;return e.$$set=e=>{"path"in e&&n(0,m=e.path),"initdata"in e&&n(11,h=e.initdata)},e.$$.update=()=>{4104&e.$$.dirty[0]&&n(2,_=fe({...$,...de({type:f.porte_type}),...de(v)},e=>({largeur_traverse_h:e.largeur_traverses,largeur_traverse_b:e.largeur_traverses,...e}))),4&e.$$.dirty[0]&&n(1,g.opt=_,g),8&e.$$.dirty[0]&&n(1,g.ui=v,g),4&e.$$.dirty[0]&&n(13,r=_.encastree?_.jeu_encastrement:0),8196&e.$$.dirty[0]&&n(14,a=(new Yn).add_name("Montant").add_features("contre-profil"==_.type?"montant-cp":"montant").build(_.hauteur-2*r,_.largeur_montants,_.epaisseur)),24576&e.$$.dirty[0]&&n(4,s=a.add_name("gauche").put(r,r,0,"yxz")),24580&e.$$.dirty[0]&&n(5,l=a.add_name("droit").put(r+_.largeur-_.largeur_montants,r,0,"yxz")),8196&e.$$.dirty[0]&&n(15,o="contre-profil"==_.type?(new Yn).add_name("Traverse").add_features("traverse-cp").build(_.largeur-2*(_.largeur_montants-_.profondeur_profil)-2*r,0,_.epaisseur):"tenon-mortaise"==_.type?(new Yn).add_name("Traverse").add_features("traverse").build(_.largeur-2*_.largeur_montants-2*r,0,_.epaisseur).ajout_tenons(_.profondeur_tenons):"onglet"==_.type?(new Yn).add_name("Traverse").add_features("traverse").build(_.largeur,0,_.epaisseur):new Yn),4&e.$$.dirty[0]&&n(16,u="contre-profil"==_.type?_.largeur_montants-_.profondeur_profil:"tenon-mortaise"==_.type?_.largeur_montants-_.profondeur_tenons:(_.type,0)),106500&e.$$.dirty[0]&&n(6,i=o.add_name("haut").build(null,_.largeur_traverse_h).put(r+u,r+_.hauteur-_.largeur_traverse_h,0,"xyz")),106500&e.$$.dirty[0]&&n(17,c=o.add_name("bas").build(null,_.largeur_traverse_b).put(r+u,r,0,"xyz")),155652&e.$$.dirty[0]&&n(18,p=("contre-profil"==_.type?(new Yn).build(_.largeur-2*(_.largeur_montants-_.profondeur_rainure+_.jeu_rainure)-2*r,_.hauteur+2*(_.profondeur_rainure-_.jeu_rainure)-_.largeur_traverse_h-_.largeur_traverse_b-2*r,_.epaisseur_panneau):"tenon-mortaise"==_.type||"onglet"==_.type?(new Yn).build(_.largeur-2*(_.largeur_montants-_.profondeur_rainure+_.jeu_rainure),_.hauteur+2*(_.profondeur_rainure-_.jeu_rainure)-_.largeur_traverse_h-_.largeur_traverse_b,_.epaisseur_panneau):new Yn).add_name("Panneau").add_features("panneau").put(r+a.largeur-_.profondeur_rainure+_.jeu_rainure,r+c.largeur-_.profondeur_rainure+_.jeu_rainure,0,"xyz")),393332&e.$$.dirty[0]&&n(7,d=[_.inclure_panneau?p:null,i,c,s,l].filter(e=>null!=e).map(e=>e.multiply_que(_.quantite))),134&e.$$.dirty[0]&&n(8,x.pieces_group=new kt(d,"Porte "+g.name,"Porte").add_features("ferrage-"+_.ferrage),x)},[m,g,_,v,s,l,i,d,x,y,$,h,f,r,a,o,u,c,p,function(){y=b(this.value),n(9,y)},function(e){v.ferrage=e,n(3,v)},function(e){v.type=e,n(3,v)},function(e){v.largeur=e,n(3,v)},function(e){v.hauteur=e,n(3,v)},function(e){v.epaisseur=e,n(3,v)},function(e){v.largeur_montants=e,n(3,v)},function(e){v.largeur_traverses=e,n(3,v)},function(e){v.largeur_traverse_h=e,n(3,v)},function(e){v.largeur_traverse_b=e,n(3,v)},function(e){v.epaisseur_panneau=e,n(3,v)},function(e){v.profondeur_rainure=e,n(3,v)},function(e){v.jeu_rainure=e,n(3,v)},function(e){v.profondeur_tenons=e,n(3,v)},function(e){v.profondeur_profil=e,n(3,v)},function(e){v.inclure_panneau=e,n(3,v)},function(e){v.encastree=e,n(3,v)},function(e){v.jeu_encastrement=e,n(3,v)},function(e){g=e,n(1,g),n(2,_),n(3,v),n(10,$),n(12,f)},function(t){T(e,t)}]}class dr extends oe{constructor(e){super(),le(this,e,pr,cr,s,{path:0,initdata:11},[-1,-1])}}function fr(e,t,n){const r=e.slice();return r[112]=t[n],r}function mr(e,t,n){const r=e.slice();return r[115]=t[n],r[116]=t,r[117]=n,r}function hr(e,t,n){const r=e.slice();return r[115]=t[n],r[118]=t,r[117]=n,r}function gr(e,t,n){const r=e.slice();return r[112]=t[n],r}function $r(e,t,n){const r=e.slice();return r[121]=t[n],r[123]=n,r}function _r(e,t,n){const r=e.slice();return r[124]=t[n],r[126]=n,r}function vr(e,t,n){const r=e.slice();return r[126]=t[n],r}function xr(e,t,n){const r=e.slice();return r[129]=t[n],r[123]=n,r}function br(e,t,n){const r=e.slice();return r[129]=t[n],r[123]=n,r}function yr(e,t,n){const r=e.slice();return r[129]=t[n],r[123]=n,r}function wr(e,t,n){const r=e.slice();return r[129]=t[n],r[123]=n,r}function Cr(e,t,n){const r=e.slice();return r[121]=t[n],r[134]=t,r[123]=n,r}function kr(e,t,n){const r=e.slice();return r[124]=t[n],r[135]=t,r[126]=n,r}function zr(e,t,n){const r=e.slice();return r[121]=t[n],r[136]=t,r[123]=n,r}function jr(e,t,n){const r=e.slice();return r[121]=t[n],r[137]=t,r[123]=n,r}function Nr(e,t,n){const r=e.slice();return r[121]=t[n],r[123]=n,r}function Pr(e){let t,n,r,a,s,l,o,u,d,m,$,b,w=e[16].type+"",C=e[16].name+"";return d=new yt({props:{pieces:e[12],name:"Dessin"}}),{c(){t=f("div"),n=f("h2"),r=h(w),a=g(),s=h(C),l=g(),o=f("a"),o.textContent="â",u=g(),ne(d.$$.fragment),x(o,"href","@"),x(t,"slot","plan")},m(p,f){c(p,t,f),i(t,n),i(n,r),i(n,a),i(n,s),i(n,l),i(n,o),i(t,u),re(d,t,null),m=!0,$||(b=_(o,"click",v(e[21])),$=!0)},p(e,t){(!m||65536&t[0])&&w!==(w=e[16].type+"")&&y(r,w),(!m||65536&t[0])&&C!==(C=e[16].name+"")&&y(s,C);const n={};4096&t[0]&&(n.pieces=e[12]),d.$set(n)},i(e){m||(W(d.$$.fragment,e),m=!0)},o(e){V(d.$$.fragment,e),m=!1},d(e){e&&p(t),ae(d),$=!1,b()}}}function Sr(t){let n,r,a,s,l=t[123]+1+"",o=t[123]>0&&function(e){let t,n,r;return{c(){t=f("td"),n=h("cloison nÂ°"),r=h(e[123]),x(t,"class","vertical-text"),x(t,"rowspan","4")},m(e,a){c(e,t,a),i(t,n),i(t,r)},d(e){e&&p(t)}}}(t);return{c(){o&&o.c(),n=g(),r=f("th"),a=h("Colonne nÂ°"),s=h(l)},m(e,t){o&&o.m(e,t),c(e,n,t),c(e,r,t),i(r,a),i(r,s)},p:e,d(e){o&&o.d(e),e&&p(n),e&&p(r)}}}function Ar(e){let t,n,r,a,s;function l(){e[61].call(n,e[123])}return{c(){t=f("td"),n=f("input"),x(n,"type","number"),x(n,"min","0"),x(n,"placeholder",r=e[121].largeur),C(n,"width","5em")},m(r,o){c(r,t,o),i(t,n),w(n,e[4][e[123]]),a||(s=_(n,"input",l),a=!0)},p(t,a){e=t,2&a[0]&&r!==(r=e[121].largeur)&&x(n,"placeholder",r),16&a[0]&&b(n.value)!==e[4][e[123]]&&w(n,e[4][e[123]])},d(e){e&&p(t),a=!1,s()}}}function Er(e){let t,n,r,a;function s(){e[62].call(n,e[123])}return{c(){t=f("td"),n=f("input"),x(n,"type","number"),x(n,"min","1"),C(n,"width","5em")},m(l,o){c(l,t,o),i(t,n),w(n,e[5][e[123]]),r||(a=_(n,"input",s),r=!0)},p(t,r){e=t,32&r[0]&&b(n.value)!==e[5][e[123]]&&w(n,e[5][e[123]])},d(e){e&&p(t),r=!1,a()}}}function Or(e){let t,n,r,a,s,l,o=e[126]>0&&function(e){let t;return{c(){t=f("br")},m(e,n){c(e,t,n)},d(e){e&&p(t)}}}();function u(){e[63].call(n,e[123],e[126])}return{c(){o&&o.c(),t=g(),n=f("input"),x(n,"type","number"),x(n,"min","1"),x(n,"title",r=`colonne nÂ° ${e[123]+1}, casier nÂ°${e[126]+1}`),x(n,"placeholder",a=e[121].casiers[e[126]].hauteur),C(n,"width","5em")},m(r,a){o&&o.m(r,a),c(r,t,a),c(r,n,a),w(n,e[6][e[123]][e[126]]),s||(l=_(n,"input",u),s=!0)},p(t,r){e=t,2&r[0]&&a!==(a=e[121].casiers[e[126]].hauteur)&&x(n,"placeholder",a),64&r[0]&&b(n.value)!==e[6][e[123]][e[126]]&&w(n,e[6][e[123]][e[126]])},d(e){o&&o.d(e),e&&p(t),e&&p(n),s=!1,l()}}}function Tr(e){let t,n=e[121].casiers,r=[];for(let t=0;t<n.length;t+=1)r[t]=Or(kr(e,n,t));return{c(){t=f("td");for(let e=0;e<r.length;e+=1)r[e].c()},m(e,n){c(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,a){if(66&a[0]){let s;for(n=e[121].casiers,s=0;s<n.length;s+=1){const l=kr(e,n,s);r[s]?r[s].p(l,a):(r[s]=Or(l),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){e&&p(t),d(r,e)}}}function qr(e){let t;return{c(){t=f("p"),t.textContent="Attention : trop de largeurs sont dÃ©finies en mÃªme temps"},m(e,n){c(e,t,n)},d(e){e&&p(t)}}}function Lr(e){let t,n,r;return{c(){t=f("th"),n=h("cloison nÂ°"),r=h(e[123]),x(t,"colspan","2")},m(e,a){c(e,t,a),i(t,n),i(t,r)},d(e){e&&p(t)}}}function Fr(e){let t;return{c(){t=f("th"),t.textContent="cotÃ© droit",x(t,"colspan","2")},m(e,n){c(e,t,n)},d(e){e&&p(t)}}}function Mr(e){let t;return{c(){t=f("th"),t.textContent="cotÃ© gauche",x(t,"colspan","2")},m(e,n){c(e,t,n)},d(e){e&&p(t)}}}function Ir(e){let t;function n(e,t){return 0==e[123]?Mr:e[123]==e[8].length-1?Fr:Lr}let r=n(e),a=r(e);return{c(){a.c(),t=$()},m(e,n){a.m(e,n),c(e,t,n)},p(e,s){r!==(r=n(e))&&(a.d(1),a=r(e),a&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&p(t)}}}function Rr(e){let t,n,r;return n=new $e({props:{size:"5",def:e[1].montants[e[123]].traverses.length}}),{c(){t=f("td"),ne(n.$$.fragment),x(t,"colspan","2")},m(e,a){c(e,t,a),re(n,t,null),r=!0},p(e,t){const r={};2&t[0]&&(r.def=e[1].montants[e[123]].traverses.length),n.$set(r)},i(e){r||(W(n.$$.fragment,e),r=!0)},o(e){V(n.$$.fragment,e),r=!1},d(e){e&&p(t),ae(n)}}}function Ur(e){let t,n,r;return{c(){t=f("td"),t.textContent="hauteur traverse",n=g(),r=f("td"),r.textContent="position du bas"},m(e,a){c(e,t,a),c(e,n,a),c(e,r,a)},d(e){e&&p(t),e&&p(n),e&&p(r)}}}function Br(t){let n,r;return{c(){n=f("td"),r=f("td")},m(e,t){c(e,n,t),c(e,r,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r)}}}function Jr(e){let t,n,r,a,s,l;return n=new $e({props:{size:"5",def:e[1].montants[e[123]].traverses[e[126]].h}}),s=new $e({props:{size:"5",def:e[1].montants[e[123]].traverses[e[126]][0]}}),{c(){t=f("td"),ne(n.$$.fragment),r=g(),a=f("td"),ne(s.$$.fragment)},m(e,o){c(e,t,o),re(n,t,null),c(e,r,o),c(e,a,o),re(s,a,null),l=!0},p(e,t){const r={};2&t[0]&&(r.def=e[1].montants[e[123]].traverses[e[126]].h),n.$set(r);const a={};2&t[0]&&(a.def=e[1].montants[e[123]].traverses[e[126]][0]),s.$set(a)},i(e){l||(W(n.$$.fragment,e),W(s.$$.fragment,e),l=!0)},o(e){V(n.$$.fragment,e),V(s.$$.fragment,e),l=!1},d(e){e&&p(t),ae(n),e&&p(r),e&&p(a),ae(s)}}}function Gr(e){let t,n,r,a;const s=[Jr,Br],l=[];function o(e,t){return e[126]<e[1].montants[e[123]].traverses.length?0:1}return t=o(e),n=l[t]=s[t](e),{c(){n.c(),r=$()},m(e,n){l[t].m(e,n),c(e,r,n),a=!0},p(e,a){let u=t;t=o(e),t===u?l[t].p(e,a):(K(),V(l[u],1,1,()=>{l[u]=null}),X(),n=l[t],n?n.p(e,a):(n=l[t]=s[t](e),n.c()),W(n,1),n.m(r.parentNode,r))},i(e){a||(W(n),a=!0)},o(e){V(n),a=!1},d(e){l[t].d(e),e&&p(r)}}}function Dr(e){let t,n,r,a,s,l,o,u=e[126]+1+"",m=e[8],$=[];for(let t=0;t<m.length;t+=1)$[t]=Gr(xr(e,m,t));const _=e=>V($[e],1,1,()=>{$[e]=null});return{c(){t=f("tr"),n=f("td"),r=h("Traverse nÂ°"),a=h(u),s=g();for(let e=0;e<$.length;e+=1)$[e].c();l=g()},m(e,u){c(e,t,u),i(t,n),i(n,r),i(n,a),i(t,s);for(let e=0;e<$.length;e+=1)$[e].m(t,null);i(t,l),o=!0},p(e,n){if((!o||2&n[0])&&u!==(u=e[126]+1+"")&&y(a,u),258&n[0]){let r;for(m=e[8],r=0;r<m.length;r+=1){const a=xr(e,m,r);$[r]?($[r].p(a,n),W($[r],1)):($[r]=Gr(a),$[r].c(),W($[r],1),$[r].m(t,l))}for(K(),r=m.length;r<$.length;r+=1)_(r);X()}},i(e){if(!o){for(let e=0;e<m.length;e+=1)W($[e]);o=!0}},o(e){$=$.filter(Boolean);for(let e=0;e<$.length;e+=1)V($[e]);o=!1},d(e){e&&p(t),d($,e)}}}function Hr(e){let t,n,r,a,s,l;function o(...t){return e[66](e[126],e[123],...t)}function u(...t){return e[67](e[126],e[123],...t)}function d(...t){return e[68](e[126],e[123],...t)}function m(...t){return e[69](e[126],e[123],...t)}return{c(){t=f("label"),n=f("input"),x(n,"type","radio"),x(n,"name","selection-casier"),n.__value=r=`${e[123]},${e[126]}`,n.value=n.__value,e[65][0].push(n),x(t,"class",a="casier casier-"+e[123]+"-"+e[126]),C(t,"flex-grow",e[124].hauteur),j(t,"panneau-haut",e[126]>0?e[1].colonnes[e[123]].casiers[e[126]-1].panneau_dessous:e[1].separer_haut?e[1].colonnes[e[123]].panneau_haut:e[1].panneau_dessus),j(t,"panneau-bas",e[126]<e[7][e[123]].casiers.length-1?e[1].colonnes[e[123]].casiers[e[126]].panneau_dessous:e[1].separer_bas?e[1].colonnes[e[123]].panneau_bas:e[1].panneau_dessous),j(t,"panneau-gauche",e[1].montants[e[123]].panneaux.map(o).reduce(ha,!0)),j(t,"panneau-droit",e[1].montants[e[123]+1].panneaux.map(u).reduce(ga,!0)),j(t,"panneau-gauche-partiel",e[1].montants[e[123]].panneaux.map(d).reduce($a,!1)),j(t,"panneau-droit-partiel",e[1].montants[e[123]+1].panneaux.map(m).reduce(_a,!1)),j(t,"panneau-dos",e[1].colonnes[e[123]].casiers[e[126]].panneau_dos),j(t,"tiroir",e[1].colonnes[e[123]].casiers[e[126]].tiroir)},m(r,a){c(r,t,a),i(t,n),n.checked=n.__value===e[9],s||(l=_(n,"change",e[64]),s=!0)},p(r,a){e=r,512&a[0]&&(n.checked=n.__value===e[9]),2&a[0]&&C(t,"flex-grow",e[124].hauteur),2&a[0]&&j(t,"panneau-haut",e[126]>0?e[1].colonnes[e[123]].casiers[e[126]-1].panneau_dessous:e[1].separer_haut?e[1].colonnes[e[123]].panneau_haut:e[1].panneau_dessus),130&a[0]&&j(t,"panneau-bas",e[126]<e[7][e[123]].casiers.length-1?e[1].colonnes[e[123]].casiers[e[126]].panneau_dessous:e[1].separer_bas?e[1].colonnes[e[123]].panneau_bas:e[1].panneau_dessous),2&a[0]&&j(t,"panneau-gauche",e[1].montants[e[123]].panneaux.map(o).reduce(ha,!0)),2&a[0]&&j(t,"panneau-droit",e[1].montants[e[123]+1].panneaux.map(u).reduce(ga,!0)),2&a[0]&&j(t,"panneau-gauche-partiel",e[1].montants[e[123]].panneaux.map(d).reduce($a,!1)),2&a[0]&&j(t,"panneau-droit-partiel",e[1].montants[e[123]+1].panneaux.map(m).reduce(_a,!1)),2&a[0]&&j(t,"panneau-dos",e[1].colonnes[e[123]].casiers[e[126]].panneau_dos),2&a[0]&&j(t,"tiroir",e[1].colonnes[e[123]].casiers[e[126]].tiroir)},d(r){r&&p(t),e[65][0].splice(e[65][0].indexOf(n),1),s=!1,l()}}}function Qr(e){let t,n,r,a=e[121].casiers,s=[];for(let t=0;t<a.length;t+=1)s[t]=Hr(_r(e,a,t));return{c(){t=f("div");for(let e=0;e<s.length;e+=1)s[e].c();n=g(),x(t,"class",r="colonne colonne-"+e[123])},m(e,r){c(e,t,r);for(let e=0;e<s.length;e+=1)s[e].m(t,null);i(t,n)},p(e,r){if(642&r[0]){let l;for(a=e[121].casiers,l=0;l<a.length;l+=1){const o=_r(e,a,l);s[l]?s[l].p(o,r):(s[l]=Hr(o),s[l].c(),s[l].m(t,n))}for(;l<s.length;l+=1)s[l].d(1);s.length=a.length}},d(e){e&&p(t),d(s,e)}}}function Zr(e){let t,n,r,a,s,l,o;return{c(){t=f("option"),t.textContent="Aucune",n=g(),r=f("option"),r.textContent="Recouvrement total",a=g(),s=f("option"),s.textContent="Recouvrement Ã  moitiÃ©",l=g(),o=f("option"),o.textContent="EncastrÃ©",t.__value="",t.value=t.__value,r.__value="total",r.value=r.__value,s.__value="demi",s.value=s.__value,o.__value="encastre",o.value=o.__value},m(e,u){c(e,t,u),c(e,n,u),c(e,r,u),c(e,a,u),c(e,s,u),c(e,l,u),c(e,o,u)},d(e){e&&p(t),e&&p(n),e&&p(r),e&&p(a),e&&p(s),e&&p(l),e&&p(o)}}}function Kr(e,t){let n,r,a,s,l,o,u,d,m,$,_,v,x,b,w,k,z,j,N,P,S,A,E=t[14]+1+"",O=t[14]+1+"";function T(e){t[70].call(null,e)}let q={init:t[1].colonnes[t[14]].porte.type,$$slots:{default:[Zr]},$$scope:{ctx:t}};function F(e){t[71].call(null,e)}void 0!==t[7][t[14]].porte.type&&(q.value=t[7][t[14]].porte.type),b=new be({props:q}),L.push(()=>te(b,"value",T));let M={tristate:!1,def:t[1].colonnes[t[14]].porte.double};return void 0!==t[7][t[14]].porte.double&&(M.checked=t[7][t[14]].porte.double),j=new je({props:M}),L.push(()=>te(j,"checked",F)),{key:e,first:null,c(){n=f("p"),r=f("strong"),a=h("Colonne nÂ°"),s=h(E),l=g(),o=f("fieldset"),u=f("legend"),d=h("Porte colonne nÂ°"),m=h(O),$=g(),_=f("label"),v=f("span"),v.textContent="Type :Â ",x=g(),ne(b.$$.fragment),k=g(),z=f("label"),ne(j.$$.fragment),P=h(" porte double"),S=g(),C(z,"display","none"),this.first=n},m(e,t){c(e,n,t),i(n,r),i(r,a),i(r,s),c(e,l,t),c(e,o,t),i(o,u),i(u,d),i(u,m),i(o,$),i(o,_),i(_,v),i(_,x),re(b,_,null),i(o,k),i(o,z),re(j,z,null),i(z,P),i(o,S),A=!0},p(e,n){t=e,(!A||16384&n[0])&&E!==(E=t[14]+1+"")&&y(s,E),(!A||16384&n[0])&&O!==(O=t[14]+1+"")&&y(m,O);const r={};16386&n[0]&&(r.init=t[1].colonnes[t[14]].porte.type),32768&n[4]&&(r.$$scope={dirty:n,ctx:t}),!w&&16512&n[0]&&(w=!0,r.value=t[7][t[14]].porte.type,B(()=>w=!1)),b.$set(r);const a={};16386&n[0]&&(a.def=t[1].colonnes[t[14]].porte.double),!N&&16512&n[0]&&(N=!0,a.checked=t[7][t[14]].porte.double,B(()=>N=!1)),j.$set(a)},i(e){A||(W(b.$$.fragment,e),W(j.$$.fragment,e),A=!0)},o(e){V(b.$$.fragment,e),V(j.$$.fragment,e),A=!1},d(e){e&&p(n),e&&p(l),e&&p(o),ae(b),ae(j)}}}function Xr(e){let t,n,r,a,s,l,o;return{c(){t=f("option"),t.textContent="Aucune",n=g(),r=f("option"),r.textContent="Recouvrement total",a=g(),s=f("option"),s.textContent="Recouvrement Ã  moitiÃ©",l=g(),o=f("option"),o.textContent="EncastrÃ©",t.__value="",t.value=t.__value,r.__value="total",r.value=r.__value,s.__value="demi",s.value=s.__value,o.__value="encastre",o.value=o.__value},m(e,u){c(e,t,u),c(e,n,u),c(e,r,u),c(e,a,u),c(e,s,u),c(e,l,u),c(e,o,u)},d(e){e&&p(t),e&&p(n),e&&p(r),e&&p(a),e&&p(s),e&&p(l),e&&p(o)}}}function Wr(e){let t,n,r,a,s;function l(t){e[79].call(null,t)}let o={tristate:!1,def:e[1].colonnes[e[14]].casiers[e[15]-1].panneau_dessous};return void 0!==e[7][e[14]].casiers[e[15]-1].panneau_dessous&&(o.checked=e[7][e[14]].casiers[e[15]-1].panneau_dessous),n=new je({props:o}),L.push(()=>te(n,"checked",l)),{c(){t=f("label"),ne(n.$$.fragment),a=h(" panneau dessus")},m(e,r){c(e,t,r),re(n,t,null),i(t,a),s=!0},p(e,t){const a={};49154&t[0]&&(a.def=e[1].colonnes[e[14]].casiers[e[15]-1].panneau_dessous),!r&&49280&t[0]&&(r=!0,a.checked=e[7][e[14]].casiers[e[15]-1].panneau_dessous,B(()=>r=!1)),n.$set(a)},i(e){s||(W(n.$$.fragment,e),s=!0)},o(e){V(n.$$.fragment,e),s=!1},d(e){e&&p(t),ae(n)}}}function Vr(e){let t,n,r,a,s;function l(t){e[78].call(null,t)}let o={tristate:!1,def:e[1].panneau_dessus};return void 0!==e[2].panneau_dessus&&(o.checked=e[2].panneau_dessus),n=new je({props:o}),L.push(()=>te(n,"checked",l)),{c(){t=f("label"),ne(n.$$.fragment),a=h(" panneau dessus (tout le meuble)")},m(e,r){c(e,t,r),re(n,t,null),i(t,a),s=!0},p(e,t){const a={};2&t[0]&&(a.def=e[1].panneau_dessus),!r&&4&t[0]&&(r=!0,a.checked=e[2].panneau_dessus,B(()=>r=!1)),n.$set(a)},i(e){s||(W(n.$$.fragment,e),s=!0)},o(e){V(n.$$.fragment,e),s=!1},d(e){e&&p(t),ae(n)}}}function Yr(e){let t,n,r,a,s;function l(t){e[77].call(null,t)}let o={tristate:!1,def:e[1].colonnes[e[14]].panneau_haut};return void 0!==e[7][e[14]].panneau_haut&&(o.checked=e[7][e[14]].panneau_haut),n=new je({props:o}),L.push(()=>te(n,"checked",l)),{c(){t=f("label"),ne(n.$$.fragment),a=h(" panneau dessus (colonne)")},m(e,r){c(e,t,r),re(n,t,null),i(t,a),s=!0},p(e,t){const a={};16386&t[0]&&(a.def=e[1].colonnes[e[14]].panneau_haut),!r&&16512&t[0]&&(r=!0,a.checked=e[7][e[14]].panneau_haut,B(()=>r=!1)),n.$set(a)},i(e){s||(W(n.$$.fragment,e),s=!0)},o(e){V(n.$$.fragment,e),s=!1},d(e){e&&p(t),ae(n)}}}function ea(e){let t,n,r,a,s;function l(t){e[83].call(null,t)}let o={tristate:!1,def:e[1].panneau_dessous};return void 0!==e[2].panneau_dessous&&(o.checked=e[2].panneau_dessous),n=new je({props:o}),L.push(()=>te(n,"checked",l)),{c(){t=f("label"),ne(n.$$.fragment),a=h(" panneau dessous (tout le meuble)")},m(e,r){c(e,t,r),re(n,t,null),i(t,a),s=!0},p(e,t){const a={};2&t[0]&&(a.def=e[1].panneau_dessous),!r&&4&t[0]&&(r=!0,a.checked=e[2].panneau_dessous,B(()=>r=!1)),n.$set(a)},i(e){s||(W(n.$$.fragment,e),s=!0)},o(e){V(n.$$.fragment,e),s=!1},d(e){e&&p(t),ae(n)}}}function ta(e){let t,n,r,a,s;function l(t){e[82].call(null,t)}let o={tristate:!1,def:e[1].colonnes[e[14]].panneau_bas};return void 0!==e[7][e[14]].panneau_bas&&(o.checked=e[7][e[14]].panneau_bas),n=new je({props:o}),L.push(()=>te(n,"checked",l)),{c(){t=f("label"),ne(n.$$.fragment),a=h(" panneau dessous (colonne)")},m(e,r){c(e,t,r),re(n,t,null),i(t,a),s=!0},p(e,t){const a={};16386&t[0]&&(a.def=e[1].colonnes[e[14]].panneau_bas),!r&&16512&t[0]&&(r=!0,a.checked=e[7][e[14]].panneau_bas,B(()=>r=!1)),n.$set(a)},i(e){s||(W(n.$$.fragment,e),s=!0)},o(e){V(n.$$.fragment,e),s=!1},d(e){e&&p(t),ae(n)}}}function na(e){let t,n,r,a,s;function l(t){e[81].call(null,t)}let o={tristate:!1,def:e[1].colonnes[e[14]].casiers[e[15]].panneau_dessous};return void 0!==e[7][e[14]].casiers[e[15]].panneau_dessous&&(o.checked=e[7][e[14]].casiers[e[15]].panneau_dessous),n=new je({props:o}),L.push(()=>te(n,"checked",l)),{c(){t=f("label"),ne(n.$$.fragment),a=h(" panneau dessous")},m(e,r){c(e,t,r),re(n,t,null),i(t,a),s=!0},p(e,t){const a={};49154&t[0]&&(a.def=e[1].colonnes[e[14]].casiers[e[15]].panneau_dessous),!r&&49280&t[0]&&(r=!0,a.checked=e[7][e[14]].casiers[e[15]].panneau_dessous,B(()=>r=!1)),n.$set(a)},i(e){s||(W(n.$$.fragment,e),s=!0)},o(e){V(n.$$.fragment,e),s=!1},d(e){e&&p(t),ae(n)}}}function ra(e){let t,n,r,a,s,l,o,u=e[117]+1+"";function d(t){e[84].call(null,t,e[117])}let m={tristate:!1,def:e[1].montants[e[14]].panneaux[e[117]].actif};return void 0!==e[8][e[14]].panneaux_actifs[e[117]]&&(m.checked=e[8][e[14]].panneaux_actifs[e[117]]),n=new je({props:m}),L.push(()=>te(n,"checked",d)),{c(){t=f("label"),ne(n.$$.fragment),a=h(" panneau gauche (nÂ°"),s=h(u),l=h(")")},m(e,r){c(e,t,r),re(n,t,null),i(t,a),i(t,s),i(t,l),o=!0},p(t,a){e=t;const s={};16386&a[0]&&(s.def=e[1].montants[e[14]].panneaux[e[117]].actif),!r&&16640&a[0]&&(r=!0,s.checked=e[8][e[14]].panneaux_actifs[e[117]],B(()=>r=!1)),n.$set(s)},i(e){o||(W(n.$$.fragment,e),o=!0)},o(e){V(n.$$.fragment,e),o=!1},d(e){e&&p(t),ae(n)}}}function aa(e){let t,n,r=e[115].droite==e[15]&&ra(e);return{c(){r&&r.c(),t=$()},m(e,a){r&&r.m(e,a),c(e,t,a),n=!0},p(e,n){e[115].droite==e[15]?r?(r.p(e,n),49154&n[0]&&W(r,1)):(r=ra(e),r.c(),W(r,1),r.m(t.parentNode,t)):r&&(K(),V(r,1,1,()=>{r=null}),X())},i(e){n||(W(r),n=!0)},o(e){V(r),n=!1},d(e){r&&r.d(e),e&&p(t)}}}function sa(e){let t,n,r,a,s,l,o,u=e[117]+1+"";function d(t){e[85].call(null,t,e[117])}let m={tristate:!1,def:e[1].montants[e[14]+1].panneaux[e[117]].actif};return void 0!==e[8][e[14]+1].panneaux_actifs[e[117]]&&(m.checked=e[8][e[14]+1].panneaux_actifs[e[117]]),n=new je({props:m}),L.push(()=>te(n,"checked",d)),{c(){t=f("label"),ne(n.$$.fragment),a=h(" panneau droite (nÂ°"),s=h(u),l=h(")")},m(e,r){c(e,t,r),re(n,t,null),i(t,a),i(t,s),i(t,l),o=!0},p(t,a){e=t;const s={};16386&a[0]&&(s.def=e[1].montants[e[14]+1].panneaux[e[117]].actif),!r&&16640&a[0]&&(r=!0,s.checked=e[8][e[14]+1].panneaux_actifs[e[117]],B(()=>r=!1)),n.$set(s)},i(e){o||(W(n.$$.fragment,e),o=!0)},o(e){V(n.$$.fragment,e),o=!1},d(e){e&&p(t),ae(n)}}}function la(e){let t,n,r=e[115].gauche==e[15]&&sa(e);return{c(){r&&r.c(),t=$()},m(e,a){r&&r.m(e,a),c(e,t,a),n=!0},p(e,n){e[115].gauche==e[15]?r?(r.p(e,n),49154&n[0]&&W(r,1)):(r=sa(e),r.c(),W(r,1),r.m(t.parentNode,t)):r&&(K(),V(r,1,1,()=>{r=null}),X())},i(e){n||(W(r),n=!0)},o(e){V(r),n=!1},d(e){r&&r.d(e),e&&p(t)}}}function oa(e,t){let n,r,a,s,l,o,u,m,$,_,v,x,b,w,C,k,z,j,N,P,S,A,E,O,T,q,F,M,I,R,U,J,G,D,H,Q,Z,Y,ee,se,le,oe,ue,ie,ce,pe,de,fe,me,he,ge,_e,ve,xe,ye,we,Ce,ke,ze,Ne,Pe,Se,Ae,Ee,Oe,Te,qe,Le,Fe,Me,Ie,Re,Ue,Be,Je=t[15]+1+"",Ge=t[14]+1+"",De=t[15]+1+"",He=t[14]+1+"",Qe=t[15]+1+"",Ze=t[14]+1+"",Ke=t[15]+1+"",Xe=t[14]+1+"",We=t[15]+1+"";function Ve(e){t[72].call(null,e)}let Ye={init:t[1].colonnes[t[14]].casiers[t[15]].porte.type,$$slots:{default:[Xr]},$$scope:{ctx:t}};function et(e){t[73].call(null,e)}void 0!==t[7][t[14]].casiers[t[15]].porte.type&&(Ye.value=t[7][t[14]].casiers[t[15]].porte.type),k=new be({props:Ye}),L.push(()=>te(k,"value",Ve));let tt={tristate:!1,def:t[1].colonnes[t[14]].casiers[t[15]].porte.double};function nt(e){t[74].call(null,e)}void 0!==t[7][t[14]].casiers[t[15]].porte.double&&(tt.checked=t[7][t[14]].casiers[t[15]].porte.double),P=new je({props:tt}),L.push(()=>te(P,"checked",et));let rt={tristate:!1,def:t[1].colonnes[t[14]].casiers[t[15]].porte.facade};function at(e){t[75].call(null,e)}void 0!==t[7][t[14]].casiers[t[15]].porte.facade&&(rt.checked=t[7][t[14]].casiers[t[15]].porte.facade),T=new je({props:rt}),L.push(()=>te(T,"checked",nt));let st={def:t[1].colonnes[t[14]].casiers[t[15]].num_etageres};function lt(e){t[76].call(null,e)}void 0!==t[7][t[14]].casiers[t[15]].num_etageres&&(st.value=t[7][t[14]].casiers[t[15]].num_etageres),ee=new $e({props:st}),L.push(()=>te(ee,"value",at));let ot={tristate:!1,def:t[1].colonnes[t[14]].casiers[t[15]].tiroir};void 0!==t[7][t[14]].casiers[t[15]].tiroir&&(ot.checked=t[7][t[14]].casiers[t[15]].tiroir),he=new je({props:ot}),L.push(()=>te(he,"checked",lt));const ut=[Yr,Vr,Wr],it=[];function ct(e,t){return 0==e[15]&&e[2].separer_haut?0:0==e[15]?1:2}function pt(e){t[80].call(null,e)}Pe=ct(t),Se=it[Pe]=ut[Pe](t);let dt={tristate:!1,def:t[1].colonnes[t[14]].casiers[t[15]].panneau_dos};void 0!==t[7][t[14]].casiers[t[15]].panneau_dos&&(dt.checked=t[7][t[14]].casiers[t[15]].panneau_dos),Oe=new je({props:dt}),L.push(()=>te(Oe,"checked",pt));const ft=[na,ta,ea],mt=[];function ht(e,t){return e[15]<e[7][e[14]].casiers.length-1?0:e[2].separer_bas?1:2}Fe=ht(t),Me=mt[Fe]=ft[Fe](t);let gt=t[1].montants[t[14]].panneaux,$t=[];for(let e=0;e<gt.length;e+=1)$t[e]=aa(hr(t,gt,e));const _t=e=>V($t[e],1,1,()=>{$t[e]=null});let vt=t[1].montants[t[14]+1].panneaux,xt=[];for(let e=0;e<vt.length;e+=1)xt[e]=la(mr(t,vt,e));const bt=e=>V(xt[e],1,1,()=>{xt[e]=null});return{key:e,first:null,c(){n=f("p"),r=f("strong"),a=h("Casier nÂ° "),s=h(Je),l=g(),o=f("fieldset"),u=f("legend"),m=h("Porte colÂ°"),$=h(Ge),_=h(" casÂ°"),v=h(De),x=g(),b=f("label"),w=f("span"),w.textContent="Type :Â ",C=g(),ne(k.$$.fragment),j=g(),N=f("label"),ne(P.$$.fragment),A=h(" porte double"),E=g(),O=f("label"),ne(T.$$.fragment),F=h(" faÃ§ade seulement"),M=g(),I=f("fieldset"),R=f("legend"),U=h("ÃtagÃ¨re colÂ°"),J=h(He),G=h(" casÂ°"),D=h(Qe),H=g(),Q=f("label"),Z=f("span"),Z.textContent="Nombre d'Ã©tagÃ¨res",Y=g(),ne(ee.$$.fragment),le=g(),oe=f("fieldset"),ue=f("legend"),ie=h("Tiroir colÂ°"),ce=h(Ze),pe=h(" casÂ°"),de=h(Ke),fe=g(),me=f("label"),ne(he.$$.fragment),_e=h(" tiroir"),ve=g(),xe=f("fieldset"),ye=f("legend"),we=h("Panneaux colÂ°"),Ce=h(Xe),ke=h(" casÂ°"),ze=h(We),Ne=g(),Se.c(),Ae=g(),Ee=f("label"),ne(Oe.$$.fragment),qe=h(" panneau dos"),Le=g(),Me.c(),Ie=g();for(let e=0;e<$t.length;e+=1)$t[e].c();Re=g();for(let e=0;e<xt.length;e+=1)xt[e].c();Ue=g(),this.first=n},m(e,t){c(e,n,t),i(n,r),i(r,a),i(r,s),c(e,l,t),c(e,o,t),i(o,u),i(u,m),i(u,$),i(u,_),i(u,v),i(o,x),i(o,b),i(b,w),i(b,C),re(k,b,null),i(b,j),i(b,N),re(P,N,null),i(N,A),i(b,E),i(b,O),re(T,O,null),i(O,F),c(e,M,t),c(e,I,t),i(I,R),i(R,U),i(R,J),i(R,G),i(R,D),i(I,H),i(I,Q),i(Q,Z),i(Q,Y),re(ee,Q,null),c(e,le,t),c(e,oe,t),i(oe,ue),i(ue,ie),i(ue,ce),i(ue,pe),i(ue,de),i(oe,fe),i(oe,me),re(he,me,null),i(me,_e),c(e,ve,t),c(e,xe,t),i(xe,ye),i(ye,we),i(ye,Ce),i(ye,ke),i(ye,ze),i(xe,Ne),it[Pe].m(xe,null),i(xe,Ae),i(xe,Ee),re(Oe,Ee,null),i(Ee,qe),i(xe,Le),mt[Fe].m(xe,null),i(xe,Ie);for(let e=0;e<$t.length;e+=1)$t[e].m(xe,null);i(xe,Re);for(let e=0;e<xt.length;e+=1)xt[e].m(xe,null);i(xe,Ue),Be=!0},p(e,n){t=e,(!Be||32768&n[0])&&Je!==(Je=t[15]+1+"")&&y(s,Je),(!Be||16384&n[0])&&Ge!==(Ge=t[14]+1+"")&&y($,Ge),(!Be||32768&n[0])&&De!==(De=t[15]+1+"")&&y(v,De);const r={};49154&n[0]&&(r.init=t[1].colonnes[t[14]].casiers[t[15]].porte.type),32768&n[4]&&(r.$$scope={dirty:n,ctx:t}),!z&&49280&n[0]&&(z=!0,r.value=t[7][t[14]].casiers[t[15]].porte.type,B(()=>z=!1)),k.$set(r);const a={};49154&n[0]&&(a.def=t[1].colonnes[t[14]].casiers[t[15]].porte.double),!S&&49280&n[0]&&(S=!0,a.checked=t[7][t[14]].casiers[t[15]].porte.double,B(()=>S=!1)),P.$set(a);const l={};49154&n[0]&&(l.def=t[1].colonnes[t[14]].casiers[t[15]].porte.facade),!q&&49280&n[0]&&(q=!0,l.checked=t[7][t[14]].casiers[t[15]].porte.facade,B(()=>q=!1)),T.$set(l),(!Be||16384&n[0])&&He!==(He=t[14]+1+"")&&y(J,He),(!Be||32768&n[0])&&Qe!==(Qe=t[15]+1+"")&&y(D,Qe);const o={};49154&n[0]&&(o.def=t[1].colonnes[t[14]].casiers[t[15]].num_etageres),!se&&49280&n[0]&&(se=!0,o.value=t[7][t[14]].casiers[t[15]].num_etageres,B(()=>se=!1)),ee.$set(o),(!Be||16384&n[0])&&Ze!==(Ze=t[14]+1+"")&&y(ce,Ze),(!Be||32768&n[0])&&Ke!==(Ke=t[15]+1+"")&&y(de,Ke);const u={};49154&n[0]&&(u.def=t[1].colonnes[t[14]].casiers[t[15]].tiroir),!ge&&49280&n[0]&&(ge=!0,u.checked=t[7][t[14]].casiers[t[15]].tiroir,B(()=>ge=!1)),he.$set(u),(!Be||16384&n[0])&&Xe!==(Xe=t[14]+1+"")&&y(Ce,Xe),(!Be||32768&n[0])&&We!==(We=t[15]+1+"")&&y(ze,We);let i=Pe;Pe=ct(t),Pe===i?it[Pe].p(t,n):(K(),V(it[i],1,1,()=>{it[i]=null}),X(),Se=it[Pe],Se?Se.p(t,n):(Se=it[Pe]=ut[Pe](t),Se.c()),W(Se,1),Se.m(xe,Ae));const c={};49154&n[0]&&(c.def=t[1].colonnes[t[14]].casiers[t[15]].panneau_dos),!Te&&49280&n[0]&&(Te=!0,c.checked=t[7][t[14]].casiers[t[15]].panneau_dos,B(()=>Te=!1)),Oe.$set(c);let p=Fe;if(Fe=ht(t),Fe===p?mt[Fe].p(t,n):(K(),V(mt[p],1,1,()=>{mt[p]=null}),X(),Me=mt[Fe],Me?Me.p(t,n):(Me=mt[Fe]=ft[Fe](t),Me.c()),W(Me,1),Me.m(xe,Ie)),49410&n[0]){let e;for(gt=t[1].montants[t[14]].panneaux,e=0;e<gt.length;e+=1){const r=hr(t,gt,e);$t[e]?($t[e].p(r,n),W($t[e],1)):($t[e]=aa(r),$t[e].c(),W($t[e],1),$t[e].m(xe,Re))}for(K(),e=gt.length;e<$t.length;e+=1)_t(e);X()}if(49410&n[0]){let e;for(vt=t[1].montants[t[14]+1].panneaux,e=0;e<vt.length;e+=1){const r=mr(t,vt,e);xt[e]?(xt[e].p(r,n),W(xt[e],1)):(xt[e]=la(r),xt[e].c(),W(xt[e],1),xt[e].m(xe,Ue))}for(K(),e=vt.length;e<xt.length;e+=1)bt(e);X()}},i(e){if(!Be){W(k.$$.fragment,e),W(P.$$.fragment,e),W(T.$$.fragment,e),W(ee.$$.fragment,e),W(he.$$.fragment,e),W(Se),W(Oe.$$.fragment,e),W(Me);for(let e=0;e<gt.length;e+=1)W($t[e]);for(let e=0;e<vt.length;e+=1)W(xt[e]);Be=!0}},o(e){V(k.$$.fragment,e),V(P.$$.fragment,e),V(T.$$.fragment,e),V(ee.$$.fragment,e),V(he.$$.fragment,e),V(Se),V(Oe.$$.fragment,e),V(Me),$t=$t.filter(Boolean);for(let e=0;e<$t.length;e+=1)V($t[e]);xt=xt.filter(Boolean);for(let e=0;e<xt.length;e+=1)V(xt[e]);Be=!1},d(e){e&&p(n),e&&p(l),e&&p(o),ae(k),ae(P),ae(T),e&&p(M),e&&p(I),ae(ee),e&&p(le),e&&p(oe),ae(he),e&&p(ve),e&&p(xe),it[Pe].d(),ae(Oe),mt[Fe].d(),d($t,e),d(xt,e)}}}function ua(e){let t,n,r,a,s,l,o,u,m,$,v,C,k,z,N,P,S,A,E,O,T,q,F,M,I,R,U,J,G,D,H,Q,Z,se,le,oe,ue,ie,ce,pe,de,fe,me,he,ge,_e,ve,xe,be,ye,we,Ce,ke,ze,Ne,Pe,Se,Ae,Ee,Oe,Te,qe,Le,Fe,Me,Ie,Re,Ue,Be,Je,Ge,De,He,Qe,Ze,Ke,Xe,We,Ve,Ye,et,tt,nt,rt,at,st,lt,ot,ut,it,ct,pt,dt,ft,mt,ht,gt,$t,_t,vt,xt,bt,yt,wt,Ct,kt,zt,jt,Nt,Pt,St,At,Et,Ot,Tt,qt,Lt,Ft,Mt,It,Rt,Ut,Bt,Jt,Gt,Dt,Ht,Qt,Zt,Kt,Xt,Wt,Vt,Yt,en,tn,nn,rn,an,sn,ln,on,un,cn,pn,dn,fn,mn,hn,gn,$n,_n,vn,xn,bn,yn,wn,Cn,kn,zn,jn,Nn=e[1].hauteur_traverses_separees+"",Pn=e[1].hauteur_traverses_separees+"",Sn=e[4].filter(fa).length==e[4].length,An=[],En=new Map,On=[],Tn=new Map;function qn(t){e[55].call(null,t)}let Ln={min:"0",def:e[20].hauteur};function Fn(t){e[56].call(null,t)}void 0!==e[2].hauteur&&(Ln.value=e[2].hauteur),o=new $e({props:Ln}),L.push(()=>te(o,"value",qn));let Mn={min:"0",def:e[20].largeur};function In(t){e[57].call(null,t)}void 0!==e[2].largeur&&(Mn.value=e[2].largeur),k=new $e({props:Mn}),L.push(()=>te(k,"value",Fn));let Rn={min:"0",def:e[20].profondeur};function Un(t){e[59].call(null,t)}void 0!==e[2].profondeur&&(Rn.value=e[2].profondeur),E=new $e({props:Rn}),L.push(()=>te(E,"value",In));let Bn={tristate:!1,def:e[20].separer_haut};function Jn(t){e[60].call(null,t)}void 0!==e[2].separer_haut&&(Bn.checked=e[2].separer_haut),J=new je({props:Bn}),L.push(()=>te(J,"checked",Un));let Gn={tristate:!1,def:e[20].separer_bas};void 0!==e[2].separer_bas&&(Gn.checked=e[2].separer_bas),le=new je({props:Gn}),L.push(()=>te(le,"checked",Jn));let Dn=e[1].colonnes,Hn=[];for(let t=0;t<Dn.length;t+=1)Hn[t]=Sr(Nr(e,Dn,t));let Qn=e[1].colonnes,Zn=[];for(let t=0;t<Qn.length;t+=1)Zn[t]=Ar(jr(e,Qn,t));let Kn=e[1].colonnes,Xn=[];for(let t=0;t<Kn.length;t+=1)Xn[t]=Er(zr(e,Kn,t));let Wn=e[1].colonnes,Vn=[];for(let t=0;t<Wn.length;t+=1)Vn[t]=Tr(Cr(e,Wn,t));let Yn=Sn&&qr(),er=e[8],tr=[];for(let t=0;t<er.length;t+=1)tr[t]=Ir(wr(e,er,t));let nr=e[8],rr=[];for(let t=0;t<nr.length;t+=1)rr[t]=Rr(yr(e,nr,t));const ar=e=>V(rr[e],1,1,()=>{rr[e]=null});let sr=e[8],lr=[];for(let t=0;t<sr.length;t+=1)lr[t]=Ur(br(e,sr,t));let or=[...new Array(Math.max(...e[1].montants.map(ma))).keys()].reverse(),ur=[];for(let t=0;t<or.length;t+=1)ur[t]=Dr(vr(e,or,t));const ir=e=>V(ur[e],1,1,()=>{ur[e]=null});let cr=e[1].colonnes,pr=[];for(let t=0;t<cr.length;t+=1)pr[t]=Qr($r(e,cr,t));let dr=[e[19]];const mr=e=>e[112].key;for(let t=0;t<1;t+=1){let n=gr(e,dr,t),r=mr(n);En.set(r,An[t]=Kr(r,n))}let hr=[e[19]];const _r=e=>e[112].key;for(let t=0;t<1;t+=1){let n=fr(e,hr,t),r=_r(n);Tn.set(r,On[t]=oa(r,n))}function xr(t){e[86].call(null,t)}let kr={def:e[1].epaisseur_montants,min:"0"};function Pr(t){e[87].call(null,t)}void 0!==e[2].epaisseur_montants&&(kr.value=e[2].epaisseur_montants),_t=new $e({props:kr}),L.push(()=>te(_t,"value",xr));let Or={def:e[1].epaisseur_traverses,min:"0"};function Lr(t){e[88].call(null,t)}void 0!==e[2].epaisseur_traverses&&(Or.value=e[2].epaisseur_traverses),Ct=new $e({props:Or}),L.push(()=>te(Ct,"value",Pr));let Fr={def:e[1].largeur_montants,min:"0"};function Mr(t){e[89].call(null,t)}void 0!==e[2].largeur_montants&&(Fr.value=e[2].largeur_montants),St=new $e({props:Fr}),L.push(()=>te(St,"value",Lr));let Br={def:e[1].largeur_traverses,min:"0"};function Jr(t){e[90].call(null,t)}void 0!==e[2].largeur_traverses&&(Br.value=e[2].largeur_traverses),Lt=new $e({props:Br}),L.push(()=>te(Lt,"value",Mr));let Gr={def:e[1].profondeur_tenons_cotes,min:"0"};function Hr(t){e[91].call(null,t)}void 0!==e[2].profondeur_tenons_cotes&&(Gr.value=e[2].profondeur_tenons_cotes),Bt=new $e({props:Gr}),L.push(()=>te(Bt,"value",Jr));let Zr={def:e[1].profondeur_tenons,min:"0"};function Xr(t){e[92].call(null,t)}void 0!==e[2].profondeur_tenons&&(Zr.value=e[2].profondeur_tenons),Zt=new $e({props:Zr}),L.push(()=>te(Zt,"value",Hr));let Wr={def:e[1].epaisseur_panneau,min:"0"};function Vr(t){e[93].call(null,t)}void 0!==e[2].epaisseur_panneau&&(Wr.value=e[2].epaisseur_panneau),nn=new $e({props:Wr}),L.push(()=>te(nn,"value",Xr));let Yr={def:e[1].profondeur_rainure,min:"0"};function ea(t){e[94].call(null,t)}void 0!==e[2].profondeur_rainure&&(Yr.value=e[2].profondeur_rainure),un=new $e({props:Yr}),L.push(()=>te(un,"value",Vr));let ta={def:e[1].jeu_rainure,min:"0"};function na(t){e[95].call(null,t)}void 0!==e[2].jeu_rainure&&(ta.value=e[2].jeu_rainure),hn=new $e({props:ta}),L.push(()=>te(hn,"value",ea));let ra={def:e[1].montants_inter_longueur_tenon,min:"0"};return void 0!==e[2].montants_inter_longueur_tenon&&(ra.value=e[2].montants_inter_longueur_tenon),yn=new $e({props:ra}),L.push(()=>te(yn,"value",na)),{c(){t=f("div"),n=f("h3"),n.textContent="Mesures",r=g(),a=f("form"),s=f("label"),l=f("span"),l.textContent="Hauteur    : ",ne(o.$$.fragment),m=h(" mm"),$=g(),v=f("label"),C=f("span"),C.textContent="Largeur    : ",ne(k.$$.fragment),N=h(" mm"),P=g(),S=f("label"),A=f("span"),A.textContent="Profondeur : ",ne(E.$$.fragment),T=h(" mm"),q=g(),F=f("label"),M=f("span"),M.textContent="Colonnes   : ",I=f("input"),R=g(),U=f("label"),ne(J.$$.fragment),D=h(" sÃ©parer le panneau du haut (traverses de "),H=h(Nn),Q=h(")"),Z=g(),se=f("label"),ne(le.$$.fragment),ue=h(" sÃ©parer le panneau du bas (traverses de "),ie=h(Pn),ce=h(")"),pe=g(),de=f("table"),fe=f("tr"),me=f("td"),he=g(),ge=f("td"),ge.textContent="cotÃ© gauche",_e=g();for(let e=0;e<Hn.length;e+=1)Hn[e].c();ve=g(),xe=f("td"),xe.textContent="cotÃ© droit",be=g(),ye=f("tr"),we=f("td"),we.textContent="Largeur intÃ©rieureÂ :Â ",Ce=g();for(let e=0;e<Zn.length;e+=1)Zn[e].c();ke=g(),ze=f("td"),ze.textContent="mm",Ne=g(),Pe=f("tr"),Se=f("td"),Se.textContent="CasiersÂ :Â ",Ae=g();for(let e=0;e<Xn.length;e+=1)Xn[e].c();Ee=g(),Oe=f("td"),Te=g(),qe=f("tr"),Le=f("td"),Le.textContent="Hauteur intÃ©rieureÂ :Â ",Fe=g();for(let e=0;e<Vn.length;e+=1)Vn[e].c();Me=g(),Ie=f("td"),Re=g(),Yn&&Yn.c(),Ue=g(),Be=f("fieldset"),Je=f("legend"),Je.textContent="Subdivisions des cloisons (ne pas modifier, en cours de travail)",Ge=g(),De=f("table"),He=f("tr"),Qe=f("td"),Ze=g();for(let e=0;e<tr.length;e+=1)tr[e].c();Ke=g(),Xe=f("tr"),We=f("th"),We.textContent="Nombre de traverses",Ve=g();for(let e=0;e<rr.length;e+=1)rr[e].c();Ye=g(),et=f("tr"),tt=f("th"),tt.textContent="Traverses",nt=g();for(let e=0;e<lr.length;e+=1)lr[e].c();rt=g();for(let e=0;e<ur.length;e+=1)ur[e].c();at=g(),st=f("hr"),lt=g(),ot=f("div"),ut=f("div");for(let e=0;e<pr.length;e+=1)pr[e].c();it=g(),ct=f("div");for(let e=0;e<1;e+=1)An[e].c();pt=g(),dt=f("div");for(let e=0;e<1;e+=1)On[e].c();ft=g(),mt=f("hr"),ht=g(),gt=f("label"),$t=f("span"),$t.textContent="Ãpaisseur montants : ",ne(_t.$$.fragment),xt=h(" mm"),bt=g(),yt=f("label"),wt=f("span"),wt.textContent="Ãpaisseur traverses : ",ne(Ct.$$.fragment),zt=h(" mm"),jt=g(),Nt=f("label"),Pt=f("span"),Pt.textContent="Largeur montants : ",ne(St.$$.fragment),Et=h(" mm"),Ot=g(),Tt=f("label"),qt=f("span"),qt.textContent="Largeur traverses : ",ne(Lt.$$.fragment),Mt=h(" mm"),It=g(),Rt=f("label"),Ut=f("span"),Ut.textContent="Profondeur tenons cotÃ©s : ",ne(Bt.$$.fragment),Gt=h(" mm"),Dt=g(),Ht=f("label"),Qt=f("span"),Qt.textContent="Profondeur tenons : ",ne(Zt.$$.fragment),Xt=h(" mm"),Wt=g(),Vt=f("hr"),Yt=g(),en=f("label"),tn=f("span"),tn.textContent="Ãpaisseur panneau : ",ne(nn.$$.fragment),an=h(" mm"),sn=g(),ln=f("label"),on=f("span"),on.textContent="Profondeur rainure : ",ne(un.$$.fragment),pn=h(" mm"),dn=g(),fn=f("label"),mn=f("span"),mn.textContent="Jeu panneau / rainure : ",ne(hn.$$.fragment),$n=h(" mm"),_n=g(),vn=f("label"),xn=f("span"),xn.textContent="Longueur tenons cloisons :",bn=g(),ne(yn.$$.fragment),Cn=h(" mm"),x(I,"type","number"),x(I,"min","1"),x(U,"class","no-align"),x(se,"class","no-align"),x(ge,"rowspan","4"),x(ge,"class","vertical-text"),x(xe,"class","vertical-text"),x(xe,"rowspan","4"),x(De,"class","styled"),x(ut,"class","meuble"),j(ut,"panneau-haut",e[1].panneau_dessus),j(ut,"panneau-bas",e[1].panneau_dessous),x(ot,"class","prefs-casier"),x(t,"class","main"),x(t,"slot","dim")},m(u,p){c(u,t,p),i(t,n),i(t,r),i(t,a),i(a,s),i(s,l),re(o,s,null),i(s,m),i(a,$),i(a,v),i(v,C),re(k,v,null),i(v,N),i(a,P),i(a,S),i(S,A),re(E,S,null),i(S,T),i(a,q),i(a,F),i(F,M),i(F,I),w(I,e[3]),i(a,R),i(a,U),re(J,U,null),i(U,D),i(U,H),i(U,Q),i(a,Z),i(a,se),re(le,se,null),i(se,ue),i(se,ie),i(se,ce),i(a,pe),i(a,de),i(de,fe),i(fe,me),i(fe,he),i(fe,ge),i(fe,_e);for(let e=0;e<Hn.length;e+=1)Hn[e].m(fe,null);i(fe,ve),i(fe,xe),i(de,be),i(de,ye),i(ye,we),i(ye,Ce);for(let e=0;e<Zn.length;e+=1)Zn[e].m(ye,null);i(ye,ke),i(ye,ze),i(de,Ne),i(de,Pe),i(Pe,Se),i(Pe,Ae);for(let e=0;e<Xn.length;e+=1)Xn[e].m(Pe,null);i(Pe,Ee),i(Pe,Oe),i(de,Te),i(de,qe),i(qe,Le),i(qe,Fe);for(let e=0;e<Vn.length;e+=1)Vn[e].m(qe,null);i(qe,Me),i(qe,Ie),i(a,Re),Yn&&Yn.m(a,null),i(a,Ue),i(a,Be),i(Be,Je),i(Be,Ge),i(Be,De),i(De,He),i(He,Qe),i(He,Ze);for(let e=0;e<tr.length;e+=1)tr[e].m(He,null);i(De,Ke),i(De,Xe),i(Xe,We),i(Xe,Ve);for(let e=0;e<rr.length;e+=1)rr[e].m(Xe,null);i(De,Ye),i(De,et),i(et,tt),i(et,nt);for(let e=0;e<lr.length;e+=1)lr[e].m(et,null);i(De,rt);for(let e=0;e<ur.length;e+=1)ur[e].m(De,null);i(a,at),i(a,st),i(a,lt),i(a,ot),i(ot,ut);for(let e=0;e<pr.length;e+=1)pr[e].m(ut,null);i(ot,it),i(ot,ct);for(let e=0;e<1;e+=1)An[e].m(ct,null);i(ot,pt),i(ot,dt);for(let e=0;e<1;e+=1)On[e].m(dt,null);i(a,ft),i(a,mt),i(a,ht),i(a,gt),i(gt,$t),re(_t,gt,null),i(gt,xt),i(a,bt),i(a,yt),i(yt,wt),re(Ct,yt,null),i(yt,zt),i(a,jt),i(a,Nt),i(Nt,Pt),re(St,Nt,null),i(Nt,Et),i(a,Ot),i(a,Tt),i(Tt,qt),re(Lt,Tt,null),i(Tt,Mt),i(a,It),i(a,Rt),i(Rt,Ut),re(Bt,Rt,null),i(Rt,Gt),i(a,Dt),i(a,Ht),i(Ht,Qt),re(Zt,Ht,null),i(Ht,Xt),i(a,Wt),i(a,Vt),i(a,Yt),i(a,en),i(en,tn),re(nn,en,null),i(en,an),i(a,sn),i(a,ln),i(ln,on),re(un,ln,null),i(ln,pn),i(a,dn),i(a,fn),i(fn,mn),re(hn,fn,null),i(fn,$n),i(a,_n),i(a,vn),i(vn,xn),i(vn,bn),re(yn,vn,null),i(vn,Cn),kn=!0,zn||(jn=_(I,"input",e[58]),zn=!0)},p(e,t){const n={};!u&&4&t[0]&&(u=!0,n.value=e[2].hauteur,B(()=>u=!1)),o.$set(n);const r={};!z&&4&t[0]&&(z=!0,r.value=e[2].largeur,B(()=>z=!1)),k.$set(r);const s={};!O&&4&t[0]&&(O=!0,s.value=e[2].profondeur,B(()=>O=!1)),E.$set(s),8&t[0]&&b(I.value)!==e[3]&&w(I,e[3]);const l={};!G&&4&t[0]&&(G=!0,l.checked=e[2].separer_haut,B(()=>G=!1)),J.$set(l),(!kn||2&t[0])&&Nn!==(Nn=e[1].hauteur_traverses_separees+"")&&y(H,Nn);const i={};if(!oe&&4&t[0]&&(oe=!0,i.checked=e[2].separer_bas,B(()=>oe=!1)),le.$set(i),(!kn||2&t[0])&&Pn!==(Pn=e[1].hauteur_traverses_separees+"")&&y(ie,Pn),2&t[0]){let n;for(Dn=e[1].colonnes,n=0;n<Dn.length;n+=1){const r=Nr(e,Dn,n);Hn[n]?Hn[n].p(r,t):(Hn[n]=Sr(r),Hn[n].c(),Hn[n].m(fe,ve))}for(;n<Hn.length;n+=1)Hn[n].d(1);Hn.length=Dn.length}if(18&t[0]){let n;for(Qn=e[1].colonnes,n=0;n<Qn.length;n+=1){const r=jr(e,Qn,n);Zn[n]?Zn[n].p(r,t):(Zn[n]=Ar(r),Zn[n].c(),Zn[n].m(ye,ke))}for(;n<Zn.length;n+=1)Zn[n].d(1);Zn.length=Qn.length}if(34&t[0]){let n;for(Kn=e[1].colonnes,n=0;n<Kn.length;n+=1){const r=zr(e,Kn,n);Xn[n]?Xn[n].p(r,t):(Xn[n]=Er(r),Xn[n].c(),Xn[n].m(Pe,Ee))}for(;n<Xn.length;n+=1)Xn[n].d(1);Xn.length=Kn.length}if(66&t[0]){let n;for(Wn=e[1].colonnes,n=0;n<Wn.length;n+=1){const r=Cr(e,Wn,n);Vn[n]?Vn[n].p(r,t):(Vn[n]=Tr(r),Vn[n].c(),Vn[n].m(qe,Me))}for(;n<Vn.length;n+=1)Vn[n].d(1);Vn.length=Wn.length}if(16&t[0]&&(Sn=e[4].filter(fa).length==e[4].length),Sn?Yn||(Yn=qr(),Yn.c(),Yn.m(a,Ue)):Yn&&(Yn.d(1),Yn=null),256&t[0]){let n;for(er=e[8],n=0;n<er.length;n+=1){const r=wr(e,er,n);tr[n]?tr[n].p(r,t):(tr[n]=Ir(r),tr[n].c(),tr[n].m(He,null))}for(;n<tr.length;n+=1)tr[n].d(1);tr.length=er.length}if(258&t[0]){let n;for(nr=e[8],n=0;n<nr.length;n+=1){const r=yr(e,nr,n);rr[n]?(rr[n].p(r,t),W(rr[n],1)):(rr[n]=Rr(r),rr[n].c(),W(rr[n],1),rr[n].m(Xe,null))}for(K(),n=nr.length;n<rr.length;n+=1)ar(n);X()}if(256&t[0]){const t=sr.length;let n;for(sr=e[8],n=t;n<sr.length;n+=1){br(e,sr,n);lr[n]||(lr[n]=Ur(),lr[n].c(),lr[n].m(et,null))}for(n=sr.length;n<t;n+=1)lr[n].d(1);lr.length=sr.length}if(258&t[0]){let n;for(or=[...new Array(Math.max(...e[1].montants.map(ma))).keys()].reverse(),n=0;n<or.length;n+=1){const r=vr(e,or,n);ur[n]?(ur[n].p(r,t),W(ur[n],1)):(ur[n]=Dr(r),ur[n].c(),W(ur[n],1),ur[n].m(De,null))}for(K(),n=or.length;n<ur.length;n+=1)ir(n);X()}if(642&t[0]){let n;for(cr=e[1].colonnes,n=0;n<cr.length;n+=1){const r=$r(e,cr,n);pr[n]?pr[n].p(r,t):(pr[n]=Qr(r),pr[n].c(),pr[n].m(ut,null))}for(;n<pr.length;n+=1)pr[n].d(1);pr.length=cr.length}2&t[0]&&j(ut,"panneau-haut",e[1].panneau_dessus),2&t[0]&&j(ut,"panneau-bas",e[1].panneau_dessous),540802&t[0]&&(dr=[e[19]],K(),An=ee(An,t,mr,1,e,dr,En,ct,Y,Kr,null,gr),X()),573830&t[0]&&(hr=[e[19]],K(),On=ee(On,t,_r,1,e,hr,Tn,dt,Y,oa,null,fr),X());const c={};2&t[0]&&(c.def=e[1].epaisseur_montants),!vt&&4&t[0]&&(vt=!0,c.value=e[2].epaisseur_montants,B(()=>vt=!1)),_t.$set(c);const p={};2&t[0]&&(p.def=e[1].epaisseur_traverses),!kt&&4&t[0]&&(kt=!0,p.value=e[2].epaisseur_traverses,B(()=>kt=!1)),Ct.$set(p);const d={};2&t[0]&&(d.def=e[1].largeur_montants),!At&&4&t[0]&&(At=!0,d.value=e[2].largeur_montants,B(()=>At=!1)),St.$set(d);const f={};2&t[0]&&(f.def=e[1].largeur_traverses),!Ft&&4&t[0]&&(Ft=!0,f.value=e[2].largeur_traverses,B(()=>Ft=!1)),Lt.$set(f);const m={};2&t[0]&&(m.def=e[1].profondeur_tenons_cotes),!Jt&&4&t[0]&&(Jt=!0,m.value=e[2].profondeur_tenons_cotes,B(()=>Jt=!1)),Bt.$set(m);const h={};2&t[0]&&(h.def=e[1].profondeur_tenons),!Kt&&4&t[0]&&(Kt=!0,h.value=e[2].profondeur_tenons,B(()=>Kt=!1)),Zt.$set(h);const g={};2&t[0]&&(g.def=e[1].epaisseur_panneau),!rn&&4&t[0]&&(rn=!0,g.value=e[2].epaisseur_panneau,B(()=>rn=!1)),nn.$set(g);const $={};2&t[0]&&($.def=e[1].profondeur_rainure),!cn&&4&t[0]&&(cn=!0,$.value=e[2].profondeur_rainure,B(()=>cn=!1)),un.$set($);const _={};2&t[0]&&(_.def=e[1].jeu_rainure),!gn&&4&t[0]&&(gn=!0,_.value=e[2].jeu_rainure,B(()=>gn=!1)),hn.$set(_);const v={};2&t[0]&&(v.def=e[1].montants_inter_longueur_tenon),!wn&&4&t[0]&&(wn=!0,v.value=e[2].montants_inter_longueur_tenon,B(()=>wn=!1)),yn.$set(v)},i(e){if(!kn){W(o.$$.fragment,e),W(k.$$.fragment,e),W(E.$$.fragment,e),W(J.$$.fragment,e),W(le.$$.fragment,e);for(let e=0;e<nr.length;e+=1)W(rr[e]);for(let e=0;e<or.length;e+=1)W(ur[e]);for(let e=0;e<1;e+=1)W(An[e]);for(let e=0;e<1;e+=1)W(On[e]);W(_t.$$.fragment,e),W(Ct.$$.fragment,e),W(St.$$.fragment,e),W(Lt.$$.fragment,e),W(Bt.$$.fragment,e),W(Zt.$$.fragment,e),W(nn.$$.fragment,e),W(un.$$.fragment,e),W(hn.$$.fragment,e),W(yn.$$.fragment,e),kn=!0}},o(e){V(o.$$.fragment,e),V(k.$$.fragment,e),V(E.$$.fragment,e),V(J.$$.fragment,e),V(le.$$.fragment,e),rr=rr.filter(Boolean);for(let e=0;e<rr.length;e+=1)V(rr[e]);ur=ur.filter(Boolean);for(let e=0;e<ur.length;e+=1)V(ur[e]);for(let e=0;e<1;e+=1)V(An[e]);for(let e=0;e<1;e+=1)V(On[e]);V(_t.$$.fragment,e),V(Ct.$$.fragment,e),V(St.$$.fragment,e),V(Lt.$$.fragment,e),V(Bt.$$.fragment,e),V(Zt.$$.fragment,e),V(nn.$$.fragment,e),V(un.$$.fragment,e),V(hn.$$.fragment,e),V(yn.$$.fragment,e),kn=!1},d(e){e&&p(t),ae(o),ae(k),ae(E),ae(J),ae(le),d(Hn,e),d(Zn,e),d(Xn,e),d(Vn,e),Yn&&Yn.d(),d(tr,e),d(rr,e),d(lr,e),d(ur,e),d(pr,e);for(let e=0;e<1;e+=1)An[e].d();for(let e=0;e<1;e+=1)On[e].d();ae(_t),ae(Ct),ae(St),ae(Lt),ae(Bt),ae(Zt),ae(nn),ae(un),ae(hn),ae(yn),zn=!1,jn()}}}function ia(e){let t,n,r,a,s;function l(t){e[96].call(null,t)}function o(t){e[97].call(null,t)}let u={children:e[11],childrenState:e[18],defaultChildrenPos:e[11].map(va)};return void 0!==e[10]&&(u.childrenPos=e[10]),void 0!==e[13]&&(u.pieces=e[13]),n=new tn({props:u}),L.push(()=>te(n,"childrenPos",l)),L.push(()=>te(n,"pieces",o)),{c(){t=f("div"),ne(n.$$.fragment),x(t,"slot","children")},m(e,r){c(e,t,r),re(n,t,null),s=!0},p(e,t){const s={};2048&t[0]&&(s.children=e[11]),262144&t[0]&&(s.childrenState=e[18]),2048&t[0]&&(s.defaultChildrenPos=e[11].map(va)),!r&&1024&t[0]&&(r=!0,s.childrenPos=e[10],B(()=>r=!1)),!a&&8192&t[0]&&(a=!0,s.pieces=e[13],B(()=>a=!1)),n.$set(s)},i(e){s||(W(n.$$.fragment,e),s=!0)},o(e){V(n.$$.fragment,e),s=!1},d(e){e&&p(t),ae(n)}}}function ca(e){let t,n,r;return n=new Mn({props:{pieces:new kt(e[12],"Caisson "+e[16].name,"Caisson")}}),{c(){t=f("div"),ne(n.$$.fragment),x(t,"slot","tables")},m(e,a){c(e,t,a),re(n,t,null),r=!0},p(e,t){const r={};69632&t[0]&&(r.pieces=new kt(e[12],"Caisson "+e[16].name,"Caisson")),n.$set(r)},i(e){r||(W(n.$$.fragment,e),r=!0)},o(e){V(n.$$.fragment,e),r=!1},d(e){e&&p(t),ae(n)}}}function pa(t){let n,r,a,s,l;return{c(){n=f("style"),n.textContent="form > label {\n      display: flex;\n      flex-direction: row;\n      flex-wrap: nowrap;\n      max-width: 30em;\n    }\n    form > label:not(.no-align) > *:first-child {\n      flex-grow: 1;\n    }\n    hr.clear {\n      clear: both;\n      border: none;\n    }\n    td {\n      vertical-align: top;\n    }\n    table.panneaux .center {\n      text-align: center\n    }\n    table.panneaux .vertical {\n      //transform: rotate(-90deg);\n      //transform-origin: left;\n      //text-orientation: mixed;\n      writing-mode: sideways-lr;\n      min-width: 1em;\n    }\n\n    .meuble {\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      margin: 0.5em;\n    }\n    .meuble .colonne {\n      display: flex;\n      flex-direction: column;\n      width: 2em;\n    }\n    .meuble .colonne .casier {\n      border: 1px solid #eee;\n      text-align: center;\n    }\n    .meuble .colonne .casier input[type=radio] {\n      margin: 0.5em;\n    }\n\n    .meuble .casier.panneau-haut           { border-top: 3px solid black; }\n    .meuble .casier.panneau-bas            { border-bottom: 3px solid black; }\n    .meuble .casier.panneau-gauche-partiel { border-left: 3px dotted black; }\n    .meuble .casier.panneau-droit-partiel  { border-right: 3px dotted black; }\n    .meuble .casier.panneau-gauche         { border-left: 3px solid black; }\n    .meuble .casier.panneau-droit          { border-right: 3px solid black; }\n    .meuble .casier.panneau-dos            { background-color: #ddd; }\n\n    .prefs-casier {\n      display: flex;\n      flex-direction: row;\n      align-items: flex-start;\n    }\n\n    .prefs-casier > * {\n      margin: 0.5em;\n    }\n\n    .vertical-text {\n      /*transform: rotate(90deg);*/\n      writing-mode: vertical-lr;\n      width: 1rem;\n      padding-top: 2rem;\n    }",r=g(),a=g(),s=g(),l=g()},m(e,t){c(e,n,t),c(e,r,t),c(e,a,t),c(e,s,t),c(e,l,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r),e&&p(a),e&&p(s),e&&p(l)}}}function da(e){let t,n,r,a,s;function l(t){e[98].call(null,t)}function o(t){e[99].call(null,t)}function u(t){e[100].call(null,t)}let i={path:e[0],state:e[17],$$slots:{default:[pa],tables:[ca],children:[ia],dim:[ua],plan:[Pr]},$$scope:{ctx:e}};return void 0!==e[16]&&(i.data=e[16]),void 0!==e[18]&&(i.childrenState=e[18]),void 0!==e[11]&&(i.children=e[11]),t=new Ht({props:i}),L.push(()=>te(t,"data",l)),L.push(()=>te(t,"childrenState",o)),L.push(()=>te(t,"children",u)),t.$on("datachange",e[101]),{c(){ne(t.$$.fragment)},m(e,n){re(t,e,n),s=!0},p(e,s){const l={};1&s[0]&&(l.path=e[0]),131072&s[0]&&(l.state=e[17]),917502&s[0]|32768&s[4]&&(l.$$scope={dirty:s,ctx:e}),!n&&65536&s[0]&&(n=!0,l.data=e[16],B(()=>n=!1)),!r&&262144&s[0]&&(r=!0,l.childrenState=e[18],B(()=>r=!1)),!a&&2048&s[0]&&(a=!0,l.children=e[11],B(()=>a=!1)),t.$set(l)},i(e){s||(W(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){ae(t,e)}}}const fa=e=>e&&0!=e,ma=e=>e.traverses.length,ha=(e,t)=>e&&t,ga=(e,t)=>e&&t,$a=(e,t)=>e||t,_a=(e,t)=>e||t,va=e=>e.defaultPosition;function xa(e,t,n){let r,a,s,l,o,u,i,c,p,d,f,m,h,g,$,_,v,x,y,w,C,k,z,j,N,P,S,A,E,O,q,L,F,M,I,{path:R}=t,{initdata:U={}}=t,B={...U},J={type:"contre-profil",largeur:400,hauteur:600,profondeur:300,epaisseur_montants:24,epaisseur_traverses:24,largeur_montants:50,largeur_traverses:50,profondeur_tenons_cotes:30,profondeur_tenons:20,profondeur_rainure:10,jeu_rainure:1,epaisseur_panneau:16,panneau_dessus:!0,panneau_dessous:!0,montants_inter_longueur_tenon:20,separer_haut:!1,separer_bas:!1,hauteur_traverses_separees:70,montants:[{},{}],colonnes:[{panneau_haut:!0,panneau_bas:!0,porte:{},casiers:[{tiroir:!1,panneau_dessous:!0,panneau_dos:!0}]}],...U.defaults},G={},D=[],H={...J,...U.opt};H.profondeur_tenons_intermediaire&&(H.profondeur_tenons_cotes=H.profondeur_tenons,H.profondeur_tenons=H.profondeur_tenons_intermediaire,delete H.profondeur_tenons_intermediaire),H.hauteur_traverses&&(H.largeur_traverses=H.hauteur_traverse,delete H.hauteur_traverses);let Q,Z={...U.ui||U.opt},K=Math.max(H.colonnes.length,1),X=H.colonnes.map(e=>e.largeur_definie?e.largeur:null),W=H.colonnes.map(e=>(e.casiers||[{}]).length),V=H.colonnes.map(e=>(e.casiers||[]).map(e=>e.hauteur_definie?e.hauteur:null)),Y=H.colonnes,ee=H.montants.map(e=>({traverses:[],...e,panneaux_actifs:(e.panneaux||[]).map(e=>e.actif)})),te="0,0",ne=B.children;function re(e,t,n,r,a){let s=H.hauteur-(r+1)*H.epaisseur_traverses,l=n.filter(e=>e&&0!=e),o=r-l.length,u=s-l.reduce((e,t)=>e+t,0),i=Math.floor(u/o);for(let e=0;e<r;e++){let r=a.casiers[e],s={hauteur:null,panneau_dessous:!0,panneau_dos:!0,tiroir:!1,num_etageres:0,...t.casiers[e],...de(r),porte:{double:!1,facade:!1,type:"",...(t.casiers[e]||{}).porte,...de(r.porte||{})}};n[e]&&0!=n[e]?(s.hauteur_definie=!0,s.hauteur=n[e]):1==o?(s.hauteur_definie=!1,s.hauteur=u,o=0,u=0):(s.hauteur_definie=!1,s.hauteur=i,u-=i,o-=1),t.casiers[e]=s}return t}function ae(e,t){for(let n=0;n<e.length;n++){const r=e.length-n-1;e[n].xpos=t,e[n].ypos=H.epaisseur_traverses*(r+1)+e.slice(n+1).reduce((e,t)=>e+t.hauteur,0)}return e}let se=(new Yn).add_name("Montant").add_features("montant"),le=(new Yn).add_name("Traverse").add_features("traverse"),oe=(new Yn).add_name("Panneau").add_features("panneau"),ue=[],ie=[];return e.$$set=e=>{"path"in e&&n(0,R=e.path),"initdata"in e&&n(22,U=e.initdata)},e.$$.update=()=>{24&e.$$.dirty[0]&&n(4,X=Array.from(Array(K).keys()).map(e=>X[e]||null)),40&e.$$.dirty[0]&&n(5,W=Array.from(Array(K).keys()).map(e=>W[e]||1)),104&e.$$.dirty[0]&&n(6,V=Array.from(Array(K).keys()).map(e=>(V[e]||[]).slice(0,W[e]))),168&e.$$.dirty[0]&&n(7,Y=Array.from(Array(K).keys()).map(e=>Y[e]||{}).map((e,t)=>({...e,porte:{...e.porte},casiers:Array.from(Array(W[t]).keys()).map(t=>({porte:{},...(e.casiers||[])[t]}))}))),264&e.$$.dirty[0]&&n(8,ee=fe(ee.slice(0,ee.length-1),e=>Array(K).fill(1).map((t,n)=>e[n]||{panneaux_actifs:[]}),e=>e.concat([ee[ee.length-1]])).map(e=>({traverses:[],...e,panneaux_actifs:[...e.panneaux_actifs||[]]}))),512&e.$$.dirty[0]&&n(14,[r,a]=te.split(",").map(e=>parseInt(e)),r,(n(15,a),n(9,te))),49664&e.$$.dirty[0]&&n(19,s={i:r,j:a,key:te}),508&e.$$.dirty[0]&&n(1,H=fe({...J,...de({...Z})},e=>function(e,t){let n={...t};n.colonnes=t.colonnes.slice(0,e),n.montants=fe(t.montants.slice(0,t.montants.length-1),t=>Array(e).fill(1).map((e,n)=>t[n]),e=>e.concat([t.montants[t.montants.length-1]]));for(let t=0;t<=e&&(n.montants[t]={...n.montants[t]},!(t>=e));t++)n.colonnes[t]={panneau_haut:!0,panneau_bas:!0,largeur:null,num_casiers:1,casiers:[{tiroir:!1,panneau_dessous:!0,panneau_dos:!0}],porte:{},...n.colonnes[t]};return n}(K,e),e=>function(e,t){let n=t.colonnes.length,r=t.largeur-(n+1)*t.epaisseur_montants,a=e.filter(e=>e&&0!=e),s=e.length-a.length,l=r-a.reduce((e,t)=>e+t,0),o=Math.floor(l/s),u=[...t.colonnes];for(let t=0;t<n;t++)e[t]&&0!=e[t]?(u[t].largeur_definie=!0,u[t].largeur=e[t]):1==s?(u[t].largeur_definie=!1,u[t].largeur=l,s=0,l=0):(u[t].largeur_definie=!1,u[t].largeur=o,l-=o,s-=1);return{...t,colonnes:u}}(X,e),e=>function(e,t,n,r){let a=r.colonnes.length,s=[];for(let l=0;l<a;l++){let a=e[l],o=n[l],u=r.epaisseur_montants*(l+1)+r.colonnes.slice(0,l).reduce((e,t)=>e+t.largeur,0);s[l]=fe(r.colonnes[l]||{},e=>({...e,xpos:u,porte:{...e.porte,...o.porte},...de({panneau_haut:o.panneau_haut,panneau_bas:o.panneau_bas})}),e=>(e.casiers=(e.casiers||[]).slice(0,a),e),e=>re(l,e,t[l],a,o),e=>({...e,casiers:ae(e.casiers,u)}))}return{...r,colonnes:s}}(W,V,Y,e),e=>function(e,t){let n=Array.from(Array(e.colonnes.length+1).keys()).map(n=>{(t[n]||{}).panneaux_actifs;let r={...t[n],panneaux_actifs:[...(t[n]||{}).panneaux_actifs||[]]},a=(e.colonnes[n-1]||{}).casiers||[],s=(e.colonnes[n]||{}).casiers||[],l=a.slice(0,-1).map((t,n)=>({gauche:[n,n+1],0:t.ypos-(t.tiroir?0:e.epaisseur_traverses),h:t.tiroir?e.largeur_traverses:e.epaisseur_traverses})),o=s.slice(0,-1).map((t,n)=>({droite:[n,n+1],0:t.ypos-(t.tiroir?0:e.epaisseur_traverses),h:t.tiroir?e.largeur_traverses:e.epaisseur_traverses})),u=l.concat(o).sort((e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0).map(e=>({...e,1:e[0]+e.h})).reduce((t,n)=>{if(0==t.length)return[{gauche:[0,0],droite:[0,0],...n}];let r=t[t.length-1];return n[1]-r[0]<=e.largeur_traverses?(t[t.length-1]={...r,...n,1:n[1]},t):t.concat([{gauche:[r.gauche[1],r.gauche[1]],droite:[r.droite[1],r.droite[1]],...n}])},[]).map(t=>({...t,y1:t[0]+(t[1]-t[0])/2-e.largeur_traverses/2,y2:t[0]+(t[1]-t[0])/2+e.largeur_traverses/2})),i=Array.from(Array(u.length+1).keys()).map(e=>"boolean"==typeof r.panneaux_actifs[e]?r.panneaux_actifs[e]:null).reduce((e,t)=>e.concat(["boolean"==typeof t?t:0==e.length||e[e.length-1]]),[]),c=Array.from(Array(u.length+1).keys()).map(t=>{let r=0==t,a=t>=u.length,s=0==n||n==e.colonnes.length;return{first:r,last:a,cote:s,y1:r?e.largeur_traverses+(s?0:e.epaisseur_traverses):u[t-1].y2,y2:a?e.hauteur-e.largeur_traverses-(s?0:e.epaisseur_traverses):u[t].y1,gauche:r?0:u[t-1].gauche[1],droite:r?0:u[t-1].droite[1],actif:i[t]}});return{traverses:u,panneaux:c}});return{...e,montants:e.montants.map((e,t)=>({...e,...n[t]}))}}(e,ee))),4194304&e.$$.dirty[0]&&n(10,Q=U.childrenPos||{}),2050&e.$$.dirty[0]&&n(11,ne=function(e,t){t=[...t||[]];for(let n=0;n<t.length;n++)!t[n].source&&n<e.colonnes.length&&(t[n].source=["Porte","colonne",n]);for(let r=0;r<e.colonnes.length;r++){const a=e.colonnes[r];t=n(a,r,t);for(let e=0;e<a.casiers.length;e++){const n=a.casiers[e];t=l(a,r,n,e,t=s(a,r,n,e,t=c(a,r,n,e,t=u(a,r,n,e,t))))}}for(let e=0;e<t.length;e++){let n={name:"nÂ°"+(e+1),...t[e]};n=r(n)||n,n=i(n)||n,n=p(n,t)||n,n=o(n)||n,t[e]=n}return t;function n(e,t,n){const r=n.findIndex(e=>(e.source||[]).join("-")=="Porte-colonne-"+t);return e.porte.type?-1!=r?n:n=[...n,{source:["Porte","colonne",t],name:prompt("Quel nom donner Ã  la porte ?","colonne nÂ°"+(t+1)),type:"Porte",id:me(n)}]:(-1!=r&&(confirm(`Caisson ${B.name}\nSupprimer la porte ${n[r].name} ?\n\nATTENTION : clique sur OK uniquement, sinon il y aura une porte de trop.`)?n.splice(r,1):n[r].source.push("disabled")),n)}function r(t){let n=[...t.source||[]],[r]=n.splice(2,1);if("Porte-colonne"!=n.join("-"))return t;const a=e.colonnes[r];if(!a)return t;const s="total"==a.porte.type,l="demi"==a.porte.type,o="encastre"==a.porte.type,u=(t.opt||{}).epaisseur||(t.opt||{}).epaisseur_montants;return{...t,type:"Porte",defaults:{force_largeur:!0,force_hauteur:!0,encastree:o,largeur:s?a.largeur+2*e.epaisseur_montants:l?a.largeur+e.epaisseur_montants:o?a.largeur:0,hauteur:s?e.hauteur:l?e.hauteur-e.epaisseur_traverses:o?e.hauteur-2*e.epaisseur_traverses:0},defaultPosition:{x:a.ypos-(s?e.epaisseur_montants:l?e.epaisseur_montants/2:0),y:e.epaisseur_traverses-(s?e.epaisseur_traverses:l?e.epaisseur_traverses/2:0),z:e.profondeur-(o?u:0)}}}function a(e){return e.porte.facade?"Facade":"Porte"}function s(e,t,n,r,a){const s=n.num_etageres;for(let e=a.length-1;e>=0;e--){const n=a[e];let l=[...n.source||[]],[o]=l.splice(6,1);l.join("-")==`Etagere-col-${t}-cas-${r}-num`&&(o<s||(confirm(`Caisson ${B.name}\nSupprimer l'Ã©tagÃ¨re ${n.name} ?\n\nATTENTION : clique sur OK uniquement, sinon il y aura une Ã©tagÃ¨re de trop.`)?a.splice(t,1):a[t].source.push("disabled")))}return a}function l(e,t,n,r,a){const s=n.num_etageres;let l=null;for(let e=0;e<s;e++){const n=`Etagere-col-${t}-cas-${r}-num-${e}`;-1==a.findIndex(e=>(e.source||[]).join("-")==n)&&(null==l&&(l=`colonne nÂ°${t+1}, casier nÂ°${r+1}`,l=prompt("Quel nom donner aux Ã©tagÃ¨res ?",l)||l),a=[...a,{source:["Etagere","col",t,"cas",r,"num",e],name:`${l} #${e+1}`,type:"Etagere",id:me(a)}])}return a}function o(t){let n=[...t.source||[]],[r]=n.splice(6,1),[a]=n.splice(4,1),[s]=n.splice(2,1);if("Etagere-col-cas-num"!=n.join("-"))return t;const l=e.colonnes[s];if(!l)return t;const o=l.casiers[a];if(!o)return t;const u=o.hauteur/(o.num_etageres+1);return{...t,type:"Etagere",defaults:{force_largeur:!0,force_profondeur:!0,largeur:l.largeur,profondeur:e.profondeur},defaultPosition:{x:l.xpos,y:o.ypos+(r+1)*u,z:0}}}function u(e,t,n,r,s){const l=a(n),o=n.porte.type?n.porte.double?[`${l}-col-${t}-cas-${r}-g`,`${l}-col-${t}-cas-${r}-d`]:[`${l}-col-${t}-cas-${r}`]:[],u=[`Porte-col-${t}-cas-${r}`,`Porte-col-${t}-cas-${r}-g`,`Porte-col-${t}-cas-${r}-d`,`Facade-col-${t}-cas-${r}`,`Facade-col-${t}-cas-${r}-g`,`Facade-col-${t}-cas-${r}-d`];for(let e=s.length-1;e>=0;e--){const t=(s[e].source||[]).join("-");if(console.log(t,s[e].name),o.includes(t)||!u.includes(t))break;confirm(`Caisson ${B.name}\nSupprimer la ${s[e].type} ${s[e].name} ?\n\nATTENTION : clique sur OK uniquement, sinon il y aura une ${s[e].type} de trop.`)?s.splice(e,1):s[e].source.push("disabled")}if(!n.porte.type)return s;if(n.porte.double){const e=s.findIndex(e=>(e.source||[]).join("-")==o[0]),n=s.findIndex(e=>(e.source||[]).join("-")==o[1]);let a=`colonne nÂ°${t+1}, casier nÂ°${r+1}`;-1==e&&-1==n&&(a=prompt(`Quel nom donner aux ${l.toLowerCase()}s ?`,a)||a),-1==e&&(s=[...s,{source:[l,"col",t,"cas",r,"g"],name:a+" gauche",type:l,id:me(s)}]),-1==n&&(s=[...s,{source:[l,"col",t,"cas",r,"d"],name:a+" droite",type:l,id:me(s)}])}else{-1==s.findIndex(e=>(e.source||[]).join("-")==o[0])&&(s=[...s,{source:[l,"col",t,"cas",r],name:prompt(`Quel nom donner Ã  la ${l.toLowerCase()} ?`,`colonne nÂ°${t+1}, casier nÂ°${r+1}`),type:l,id:me(s)}])}return s}function i(t){let n=[...t.source||[]],[r]=n.splice(5,1),[a]=n.splice(4,1),[s]=n.splice(2,1),[l]=n.splice(0,1);if("col-cas"!=n.join("-"))return t;if("Porte"!=l&&"Facade"!=l)return t;if(r&&"g"!=r&&"d"!=r)return t;const o=e.colonnes[s];if(!o)return t;const u=o.casiers[a];if(!u)return t;const i=!!r,c="total"==u.porte.type,p="demi"==u.porte.type,d="encastre"==u.porte.type,f=(t.opt||{}).epaisseur||(t.opt||{}).epaisseur_montants,m={force_ferrage:!0,ferrage:u.tiroir?"aucun":"charnieres",encastree:d,force_largeur:!0,force_hauteur:!0,largeur:1/(i?2:1)*(c?o.largeur+2*e.epaisseur_montants:p?o.largeur+e.epaisseur_montants:d?o.largeur:0),hauteur:c?u.hauteur+2*e.epaisseur_traverses:p?u.hauteur+e.epaisseur_traverses:d?u.hauteur:0},h={x:u.xpos+("d"==r?m.largeur:0)-(c?e.epaisseur_montants:p?e.epaisseur_montants/2:0),y:u.ypos-(c?e.epaisseur_traverses:p?e.epaisseur_traverses/2:0),z:e.profondeur-(d?f:0)};return{...t,type:l,defaults:m,defaultPosition:h}}function c(e,t,n,r,a){const s=a.findIndex(e=>(e.source||[]).join("-")==`Tiroir-col-${t}-cas-${r}`);return n.tiroir?-1!=s?a:a=[...a,{source:["Tiroir","col",t,"cas",r],name:prompt("Quel nom donner au tiroir ?",`colonne nÂ°${t+1}, casier nÂ°${r+1}`),type:"Tiroir",id:me(a)}]:(-1!=s&&confirm(`Supprimer le tiroir ${a[s].name} ?\n\nATTENTION : clique sur OK uniquement, sinon il y aura un tiroir de trop.`)&&a.splice(s,1),a)}function p(t,n){let r=[...t.source||[]],[s]=r.splice(4,1),[l]=r.splice(2,1);if("Tiroir-col-cas"!=r.join("-"))return t;const o=e.colonnes[l];if(!o)return t;const u=o.casiers[s];if(!u)return t;const i=n.find(e=>(e.source||[]).join("-")==`${a(u)}-col-${l}-cas-${s}`)||{},c=i?(i.opt||{}).epaisseur||(i.opt||{}).epaisseur_montants:0,p="encastre"==u.porte.type?c:0;return{...t,type:"Tiroir",defaults:{force_largeur:!0,force_hauteur:!0,largeur:o.largeur,hauteur:Math.min(150,u.hauteur),profondeur:e.profondeur-p},defaultPosition:{x:u.xpos,y:u.ypos,z:"encastre"==u.porte.type?c:0}}}}(H,ne)),4197382&e.$$.dirty[0]&&n(16,B={...U,opt:H,ui:Z,children:ne,childrenPos:Q}),2&e.$$.dirty[0]&&n(23,l=se.build(H.hauteur,H.largeur_montants,H.epaisseur_montants)),8388608&e.$$.dirty[0]&&n(24,o=l.add_name("arriÃ¨re-gauche").put(0,0,0,"yzx")),8388610&e.$$.dirty[0]&&n(25,u=l.add_name("avant-gauche").put(H.largeur-l.epaisseur,0,H.profondeur-l.largeur,"yzx")),8388610&e.$$.dirty[0]&&n(26,i=l.add_name("arriÃ¨re-droit").put(H.largeur-l.epaisseur,0,0,"yzx")),8388610&e.$$.dirty[0]&&n(27,c=l.add_name("avant-droit").put(0,0,H.profondeur-l.largeur,"yzx")),2&e.$$.dirty[0]&&n(28,p=le.build(H.profondeur-2*(H.largeur_montants-H.profondeur_tenons_cotes),H.largeur_traverses,H.epaisseur_traverses).usine_tenons(H.profondeur_tenons_cotes).put(null,null,H.largeur_montants-H.profondeur_tenons_cotes,"zyx")),268435456&e.$$.dirty[0]&&n(29,d=p.add_name("haut-gauche").put(0,0)),268435458&e.$$.dirty[0]&&n(30,f=p.add_name("bas-gauche").put(0,H.hauteur-p.largeur)),268435458&e.$$.dirty[0]&&n(31,m=p.add_name("haut-droit").put(H.largeur-p.epaisseur,0)),268435458&e.$$.dirty[0]&&n(32,h=p.add_name("bas-droit").put(H.largeur-p.epaisseur,H.hauteur-p.largeur)),2&e.$$.dirty[0]&&n(33,g=le.add_name("principale").build(H.largeur-2*(H.epaisseur_montants-H.profondeur_tenons),H.largeur_traverses,H.epaisseur_traverses).usine_tenons(H.profondeur_tenons).put(H.epaisseur_montants-H.profondeur_tenons,null,null,"xzy")),4&e.$$.dirty[1]&&n(34,$=g.add_name("arriÃ¨re-haut").put(null,0,0)),2&e.$$.dirty[0]|4&e.$$.dirty[1]&&n(35,_=g.add_name("arriÃ¨re-bas").put(null,H.hauteur-g.epaisseur,0)),2&e.$$.dirty[0]|4&e.$$.dirty[1]&&n(36,v=g.add_name("avant-haut").put(null,0,H.profondeur-g.largeur)),2&e.$$.dirty[0]|4&e.$$.dirty[1]&&n(37,x=g.add_name("avant-bas").put(null,H.hauteur-g.epaisseur,H.profondeur-g.largeur)),2&e.$$.dirty[0]&&n(38,y=oe.build(H.largeur-2*(H.epaisseur_montants-H.profondeur_rainure+H.jeu_rainure),H.profondeur-2*(H.largeur_traverses-H.profondeur_rainure+H.jeu_rainure),H.epaisseur_panneau).put(H.epaisseur_montants-H.profondeur_rainure+H.jeu_rainure,null,H.largeur_montants-H.profondeur_rainure+H.jeu_rainure,"xzy")),2&e.$$.dirty[0]|128&e.$$.dirty[1]&&n(39,w=H.separer_haut?H.colonnes.map((e,t)=>0==e.panneau_haut?null:oe.add_name("haut","colonne nÂ°"+(t+1)).build(e.largeur+2*(H.profondeur_rainure-H.jeu_rainure),H.profondeur-2*(H.largeur_traverses-H.profondeur_rainure+H.jeu_rainure),H.epaisseur_panneau).put(H.epaisseur_montants+H.colonnes.slice(0,t).map(e=>e.largeur).reduce((e,t)=>e+t,0)+t*H.epaisseur_montants-H.profondeur_rainure+H.jeu_rainure,H.hauteur-y.epaisseur,H.largeur_montants-H.profondeur_rainure+H.jeu_rainure,"xzy")):[H.panneau_dessus?y.add_name("haut").put(null,0):null]),2&e.$$.dirty[0]|128&e.$$.dirty[1]&&n(40,C=H.separer_bas?H.colonnes.map((e,t)=>0==e.panneau_bas?null:oe.add_name("bas","colonne nÂ°"+(t+1)).build(e.largeur+2*(H.profondeur_rainure-H.jeu_rainure),H.profondeur-2*(H.largeur_traverses-H.profondeur_rainure+H.jeu_rainure),H.epaisseur_panneau).put(H.epaisseur_montants+H.colonnes.slice(0,t).map(e=>e.largeur).reduce((e,t)=>e+t,0)+t*H.epaisseur_montants-H.profondeur_rainure+H.jeu_rainure,0,H.largeur_montants-H.profondeur_rainure+H.jeu_rainure,"xzy")):[H.panneau_dessous?y.add_name("bas").put(null,H.hauteur-y.epaisseur):null]),2&e.$$.dirty[0]&&n(41,k=H.colonnes.map((e,t)=>e.casiers.map((n,r)=>0==n.panneau_dos?null:oe.add_name("dos","colonne nÂ°"+(t+1),"casier nÂ°"+(r+1)).build(n.hauteur+2*(H.profondeur_rainure-H.jeu_rainure),e.largeur+H.epaisseur_montants-H.largeur_montants/2+2*(H.profondeur_rainure-H.jeu_rainure),H.epaisseur_panneau).put(n.xpos-H.profondeur_rainure+H.jeu_rainure,n.ypos-H.profondeur_rainure+H.jeu_rainure,0,"yxz")))),2&e.$$.dirty[0]&&n(42,z=Array.from(Array(H.colonnes.length-1).keys()).map(e=>se.add_name("cloison nÂ°"+(e+1)).build(H.hauteur-2*(H.epaisseur_traverses-H.montants_inter_longueur_tenon),H.largeur_montants,H.epaisseur_montants).usine_tenons(H.montants_inter_longueur_tenon).put(H.epaisseur_montants+H.colonnes.slice(0,e+1).map(e=>e.largeur).reduce((e,t)=>e+t,0)+e*H.epaisseur_montants,H.epaisseur_traverses-H.montants_inter_longueur_tenon,null,"yzx"))),2&e.$$.dirty[0]|2048&e.$$.dirty[1]&&n(43,j=z.map((e,t)=>e.add_name("avant").put(null,null,H.profondeur-e.largeur))),2048&e.$$.dirty[1]&&n(44,N=z.map((e,t)=>e.add_name("arriÃ¨re").put(null,null,0))),268435458&e.$$.dirty[0]&&n(45,P=H.montants.map((e,t)=>e.traverses.map((e,n)=>p.add_name(0==t?"cotÃ© gauche":t<H.colonnes.length?"cloison nÂ°"+t:"cotÃ© droit").add_name("traverse nÂ°"+(n+1)).put(H.epaisseur_montants*t+H.colonnes.slice(0,t).reduce((e,t)=>e+t.largeur,0),e.y1)))),2&e.$$.dirty[0]&&n(46,S=H.montants.map((e,t)=>e.panneaux.map((e,n)=>e.actif?oe.add_name(0==t?"cotÃ© gauche":t>=H.colonnes.length?"cotÃ© droit":"cloison nÂ°"+t,"caisson nÂ°"+(n+1)).build(e.y2-e.y1+2*(H.profondeur_rainure-H.jeu_rainure),H.profondeur-2*(H.largeur_traverses-H.profondeur_rainure+H.jeu_rainure),H.epaisseur_panneau).put(H.epaisseur_montants*t+H.colonnes.slice(0,t).reduce((e,t)=>e+t.largeur,0),e.y1-H.profondeur_rainure+H.jeu_rainure,H.largeur_montants-H.profondeur_rainure+H.jeu_rainure,"yzx"):null))),2&e.$$.dirty[0]&&n(47,A=Array.from(Array(H.colonnes.length-1).keys()).map(e=>le.add_name("cloison nÂ°"+(e+1)).build(H.profondeur-2*(H.largeur_montants-H.profondeur_tenons_cotes),H.largeur_traverses,H.epaisseur_traverses).usine_tenons(H.profondeur_tenons_cotes).put(H.epaisseur_montants+H.colonnes.slice(0,e+1).map(e=>e.largeur).reduce((e,t)=>e+t,0)+e*H.epaisseur_montants,null,H.largeur_montants-H.profondeur_tenons_cotes,"zyx"))),2&e.$$.dirty[0]|65536&e.$$.dirty[1]&&n(48,E=A.map((e,t)=>e.add_name("haut").build_if(H.separer_haut,null,H.hauteur_traverses_separees).put(null,H.hauteur-(H.separer_haut?H.hauteur_traverses_separees:H.epaisseur_traverses+e.largeur)))),2&e.$$.dirty[0]|65536&e.$$.dirty[1]&&n(49,O=A.map((e,t)=>e.add_name("bas").build_if(H.separer_bas,null,H.hauteur_traverses_separees).put(null,H.separer_bas?0:H.epaisseur_traverses))),2&e.$$.dirty[0]&&n(50,q=H.colonnes.map((e,t)=>e.casiers.map((t,n)=>n==e.casiers.length-1?null:le.add_name("intermÃ©diaire").build(e.largeur,H.largeur_traverses,H.epaisseur_traverses).ajout_tenons(H.profondeur_tenons).put(t.xpos-H.profondeur_tenons,t.ypos-H.epaisseur_traverses,null,"xzy")))),2&e.$$.dirty[0]|524288&e.$$.dirty[1]&&n(51,L=q.map((e,t)=>e.map((e,n)=>null==e?null:e.add_name("avant","cloison nÂ°"+(t+1),"caisson nÂ°"+n).put(null,null,H.profondeur-H.largeur_montants)))),524288&e.$$.dirty[1]&&n(52,F=q.map((e,t)=>e.map((e,n)=>null==e?null:e.add_name("arriÃ¨re","cloison nÂ°"+(t+1),"caisson nÂ°"+n).put(null,null,0)))),2&e.$$.dirty[0]&&n(53,M=H.colonnes.map((e,t)=>e.casiers.map((n,r)=>r==e.casiers.length-1||!1===n.panneau_dessous?null:oe.add_name("dessous","colonne nÂ°"+(t+1),"casier nÂ°"+(r+1)).build(e.largeur+2*(H.profondeur_rainure-H.jeu_rainure),H.profondeur-2*H.largeur_traverses+2*(H.profondeur_rainure-H.jeu_rainure),H.epaisseur_panneau).put(n.xpos-H.profondeur_rainure+H.jeu_rainure,n.ypos-H.epaisseur_panneau,H.largeur_traverses-H.profondeur_rainure+H.jeu_rainure,"xzy")))),1862270976&e.$$.dirty[0]|7796603&e.$$.dirty[1]&&n(54,I=[o,u,i,c,h,f,m,d,v,x,$,_].concat(w).concat(C).concat(k.reduce((e,t)=>e.concat(t),[])).concat(S.reduce((e,t)=>e.concat(t),[])).concat(N).concat(j).concat(E).concat(O).concat(L.reduce((e,t)=>e.concat(t),[])).concat(F.reduce((e,t)=>e.concat(t),[])).concat(P.reduce((e,t)=>e.concat(t),[])).concat(M.reduce((e,t)=>e.concat(t),[])).filter(e=>e)),8192&e.$$.dirty[0]|8388608&e.$$.dirty[1]&&n(12,ue=I.concat(ie)),4096&e.$$.dirty[0]&&n(17,G.pieces=ue,G)},[R,H,Z,K,X,W,V,Y,ee,te,Q,ne,ue,ie,r,a,B,G,D,s,J,function(){n(16,B.name=prompt(`Renommer "${B.name}" en :`,B.name)||B.name,B)},U,l,o,u,i,c,p,d,f,m,h,g,$,_,v,x,y,w,C,k,z,j,N,P,S,A,E,O,q,L,F,M,I,function(e){Z.hauteur=e,n(2,Z)},function(e){Z.largeur=e,n(2,Z)},function(e){Z.profondeur=e,n(2,Z)},function(){K=b(this.value),n(3,K)},function(e){Z.separer_haut=e,n(2,Z)},function(e){Z.separer_bas=e,n(2,Z)},function(e){X[e]=b(this.value),n(4,X),n(3,K)},function(e){W[e]=b(this.value),n(5,W),n(3,K)},function(e,t){V[e][t]=b(this.value),n(6,V),n(3,K),n(5,W)},function(){te=this.__value,n(9,te)},[[]],(e,t,n,r)=>n.droite!=e||H.montants[t].panneaux[r].actif,(e,t,n,r)=>n.gauche!=e||H.montants[t+1].panneaux[r].actif,(e,t,n,r)=>n.droite==e&&H.montants[t].panneaux[r].actif,(e,t,n,r)=>n.gauche==e&&H.montants[t+1].panneaux[r].actif,function(e){Y[r].porte.type=e,n(7,Y),n(3,K),n(5,W)},function(e){Y[r].porte.double=e,n(7,Y),n(3,K),n(5,W)},function(e){Y[r].casiers[a].porte.type=e,n(7,Y),n(3,K),n(5,W)},function(e){Y[r].casiers[a].porte.double=e,n(7,Y),n(3,K),n(5,W)},function(e){Y[r].casiers[a].porte.facade=e,n(7,Y),n(3,K),n(5,W)},function(e){Y[r].casiers[a].num_etageres=e,n(7,Y),n(3,K),n(5,W)},function(e){Y[r].casiers[a].tiroir=e,n(7,Y),n(3,K),n(5,W)},function(e){Y[r].panneau_haut=e,n(7,Y),n(3,K),n(5,W)},function(e){Z.panneau_dessus=e,n(2,Z)},function(e){Y[r].casiers[a-1].panneau_dessous=e,n(7,Y),n(3,K),n(5,W)},function(e){Y[r].casiers[a].panneau_dos=e,n(7,Y),n(3,K),n(5,W)},function(e){Y[r].casiers[a].panneau_dessous=e,n(7,Y),n(3,K),n(5,W)},function(e){Y[r].panneau_bas=e,n(7,Y),n(3,K),n(5,W)},function(e){Z.panneau_dessous=e,n(2,Z)},function(e,t){ee[r].panneaux_actifs[t]=e,n(8,ee),n(3,K)},function(e,t){ee[r+1].panneaux_actifs[t]=e,n(8,ee),n(3,K)},function(e){Z.epaisseur_montants=e,n(2,Z)},function(e){Z.epaisseur_traverses=e,n(2,Z)},function(e){Z.largeur_montants=e,n(2,Z)},function(e){Z.largeur_traverses=e,n(2,Z)},function(e){Z.profondeur_tenons_cotes=e,n(2,Z)},function(e){Z.profondeur_tenons=e,n(2,Z)},function(e){Z.epaisseur_panneau=e,n(2,Z)},function(e){Z.profondeur_rainure=e,n(2,Z)},function(e){Z.jeu_rainure=e,n(2,Z)},function(e){Z.montants_inter_longueur_tenon=e,n(2,Z)},function(e){Q=e,n(10,Q),n(22,U)},function(e){ie=e,n(13,ie)},function(e){B=e,n(16,B),n(22,U),n(1,H),n(2,Z),n(11,ne),n(10,Q),n(20,J),n(3,K),n(4,X),n(5,W),n(6,V),n(7,Y),n(8,ee)},function(e){D=e,n(18,D)},function(e){ne=e,n(11,ne),n(1,H),n(20,J),n(2,Z),n(3,K),n(4,X),n(5,W),n(6,V),n(7,Y),n(8,ee)},function(t){T(e,t)}]}class ba extends oe{constructor(e){super(),le(this,e,xa,da,s,{path:0,initdata:22},[-1,-1,-1,-1,-1])}}function ya(e){let t,n,r;return n=new yt({props:{pieces:e[2],name:"ÃtagÃ¨re "+e[3].name}}),{c(){t=f("div"),ne(n.$$.fragment),x(t,"slot","plan")},m(e,a){c(e,t,a),re(n,t,null),r=!0},p(e,t){const r={};4&t&&(r.pieces=e[2]),8&t&&(r.name="ÃtagÃ¨re "+e[3].name),n.$set(r)},i(e){r||(W(n.$$.fragment,e),r=!0)},o(e){V(n.$$.fragment,e),r=!1},d(e){e&&p(t),ae(n)}}}function wa(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,b,y,w,C,k,z,j;function N(t){e[9].call(null,t)}let P={min:"0",def:e[5].largeur,force:e[5].force_largeur};function S(t){e[10].call(null,t)}void 0!==e[1].largeur&&(P.value=e[1].largeur),s=new $e({props:P}),L.push(()=>te(s,"value",N));let A={min:"0",def:e[5].profondeur,force:e[5].force_profondeur};function E(t){e[11].call(null,t)}void 0!==e[1].profondeur&&(A.value=e[1].profondeur),$=new $e({props:A}),L.push(()=>te($,"value",S));let O={min:"0",def:e[5].epaisseur,force:e[5].force_epaisseur};return void 0!==e[1].epaisseur&&(O.value=e[1].epaisseur),C=new $e({props:O}),L.push(()=>te(C,"value",E)),{c(){t=f("div"),n=f("form"),r=f("label"),a=f("span"),a.textContent="Longueur   : ",ne(s.$$.fragment),o=h(" mm"),u=g(),d=f("label"),m=f("span"),m.textContent="Profondeur : ",ne($.$$.fragment),v=h(" mm"),b=g(),y=f("label"),w=f("span"),w.textContent="Ãpaisseur  : ",ne(C.$$.fragment),z=h(" mm"),x(a,"class","svelte-18serza"),x(r,"class","svelte-18serza"),x(m,"class","svelte-18serza"),x(d,"class","svelte-18serza"),x(w,"class","svelte-18serza"),x(y,"class","svelte-18serza"),x(n,"class","svelte-18serza"),x(t,"class","main"),x(t,"slot","dim")},m(e,l){c(e,t,l),i(t,n),i(n,r),i(r,a),re(s,r,null),i(r,o),i(n,u),i(n,d),i(d,m),re($,d,null),i(d,v),i(n,b),i(n,y),i(y,w),re(C,y,null),i(y,z),j=!0},p(e,t){const n={};!l&&2&t&&(l=!0,n.value=e[1].largeur,B(()=>l=!1)),s.$set(n);const r={};!_&&2&t&&(_=!0,r.value=e[1].profondeur,B(()=>_=!1)),$.$set(r);const a={};!k&&2&t&&(k=!0,a.value=e[1].epaisseur,B(()=>k=!1)),C.$set(a)},i(e){j||(W(s.$$.fragment,e),W($.$$.fragment,e),W(C.$$.fragment,e),j=!0)},o(e){V(s.$$.fragment,e),V($.$$.fragment,e),V(C.$$.fragment,e),j=!1},d(e){e&&p(t),ae(s),ae($),ae(C)}}}function Ca(e){let t,n,r;return n=new Mn({props:{pieces:new kt(e[2],"ÃtagÃ¨re "+e[3].name,"Etagere")}}),{c(){t=f("div"),ne(n.$$.fragment),x(t,"slot","tables")},m(e,a){c(e,t,a),re(n,t,null),r=!0},p(e,t){const r={};12&t&&(r.pieces=new kt(e[2],"ÃtagÃ¨re "+e[3].name,"Etagere")),n.$set(r)},i(e){r||(W(n.$$.fragment,e),r=!0)},o(e){V(n.$$.fragment,e),r=!1},d(e){e&&p(t),ae(n)}}}function ka(t){let n,r;return{c(){n=g(),r=g()},m(e,t){c(e,n,t),c(e,r,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r)}}}function za(e){let t,n,r;function a(t){e[12].call(null,t)}let s={path:e[0],state:e[4],$$slots:{default:[ka],tables:[Ca],dim:[wa],plan:[ya]},$$scope:{ctx:e}};return void 0!==e[3]&&(s.data=e[3]),t=new Ht({props:s}),L.push(()=>te(t,"data",a)),t.$on("datachange",e[13]),{c(){ne(t.$$.fragment)},m(e,n){re(t,e,n),r=!0},p(e,[r]){const a={};1&r&&(a.path=e[0]),16&r&&(a.state=e[4]),16398&r&&(a.$$scope={dirty:r,ctx:e}),!n&&8&r&&(n=!0,a.data=e[3],B(()=>n=!1)),t.$set(a)},i(e){r||(W(t.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),r=!1},d(e){ae(t,e)}}}function ja(e,t,n){let r,a,{path:s}=t,{initdata:l={}}=t,o={...l},u={largeur:400,profondeur:300,epaisseur:17,...l.defaults},i={...l.opt},c={...l.ui||l.opt},p={};return e.$$set=e=>{"path"in e&&n(0,s=e.path),"initdata"in e&&n(6,l=e.initdata)},e.$$.update=()=>{2&e.$$.dirty&&n(7,i={...u,...de(c)}),128&e.$$.dirty&&n(3,o.opt=i,o),2&e.$$.dirty&&n(3,o.ui=c,o),128&e.$$.dirty&&n(8,r=(new Yn).add_name("ÃtagÃ¨re").build(i.largeur,i.profondeur,i.epaisseur).put(0,0,0,"xzy").add_features("panneau-seul")),256&e.$$.dirty&&n(2,a=[r]),4&e.$$.dirty&&n(4,p.pieces=a,p)},[s,c,a,o,p,u,l,i,r,function(e){c.largeur=e,n(1,c)},function(e){c.profondeur=e,n(1,c)},function(e){c.epaisseur=e,n(1,c)},function(e){o=e,n(3,o),n(7,i),n(1,c),n(5,u)},function(t){T(e,t)}]}class Na extends oe{constructor(e){super(),le(this,e,ja,za,s,{path:0,initdata:6})}}function Pa(e){let t,n,r;return n=new yt({props:{pieces:e[2],name:"FaÃ§ade "+e[3].name}}),{c(){t=f("div"),ne(n.$$.fragment),x(t,"slot","plan")},m(e,a){c(e,t,a),re(n,t,null),r=!0},p(e,t){const r={};4&t&&(r.pieces=e[2]),8&t&&(r.name="FaÃ§ade "+e[3].name),n.$set(r)},i(e){r||(W(n.$$.fragment,e),r=!0)},o(e){V(n.$$.fragment,e),r=!1},d(e){e&&p(t),ae(n)}}}function Sa(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,b,y,w,C,k,z,j;function N(t){e[9].call(null,t)}let P={min:"0",def:e[5].largeur,force:e[5].force_largeur};function S(t){e[10].call(null,t)}void 0!==e[1].largeur&&(P.value=e[1].largeur),s=new $e({props:P}),L.push(()=>te(s,"value",N));let A={min:"0",def:e[5].hauteur,force:e[5].force_hauteur};function E(t){e[11].call(null,t)}void 0!==e[1].hauteur&&(A.value=e[1].hauteur),$=new $e({props:A}),L.push(()=>te($,"value",S));let O={min:"0",def:e[5].epaisseur,force:e[5].force_epaisseur};return void 0!==e[1].epaisseur&&(O.value=e[1].epaisseur),C=new $e({props:O}),L.push(()=>te(C,"value",E)),{c(){t=f("div"),n=f("form"),r=f("label"),a=f("span"),a.textContent="Largeur    : ",ne(s.$$.fragment),o=h(" mm"),u=g(),d=f("label"),m=f("span"),m.textContent="Hauteur    : ",ne($.$$.fragment),v=h(" mm"),b=g(),y=f("label"),w=f("span"),w.textContent="Ãpaisseur  : ",ne(C.$$.fragment),z=h(" mm"),x(a,"class","svelte-18serza"),x(r,"class","svelte-18serza"),x(m,"class","svelte-18serza"),x(d,"class","svelte-18serza"),x(w,"class","svelte-18serza"),x(y,"class","svelte-18serza"),x(n,"class","svelte-18serza"),x(t,"class","main"),x(t,"slot","dim")},m(e,l){c(e,t,l),i(t,n),i(n,r),i(r,a),re(s,r,null),i(r,o),i(n,u),i(n,d),i(d,m),re($,d,null),i(d,v),i(n,b),i(n,y),i(y,w),re(C,y,null),i(y,z),j=!0},p(e,t){const n={};!l&&2&t&&(l=!0,n.value=e[1].largeur,B(()=>l=!1)),s.$set(n);const r={};!_&&2&t&&(_=!0,r.value=e[1].hauteur,B(()=>_=!1)),$.$set(r);const a={};!k&&2&t&&(k=!0,a.value=e[1].epaisseur,B(()=>k=!1)),C.$set(a)},i(e){j||(W(s.$$.fragment,e),W($.$$.fragment,e),W(C.$$.fragment,e),j=!0)},o(e){V(s.$$.fragment,e),V($.$$.fragment,e),V(C.$$.fragment,e),j=!1},d(e){e&&p(t),ae(s),ae($),ae(C)}}}function Aa(e){let t,n,r;return n=new Mn({props:{pieces:new kt(e[2],"FaÃ§ade "+e[3].name,"Facade")}}),{c(){t=f("div"),ne(n.$$.fragment),x(t,"slot","tables")},m(e,a){c(e,t,a),re(n,t,null),r=!0},p(e,t){const r={};12&t&&(r.pieces=new kt(e[2],"FaÃ§ade "+e[3].name,"Facade")),n.$set(r)},i(e){r||(W(n.$$.fragment,e),r=!0)},o(e){V(n.$$.fragment,e),r=!1},d(e){e&&p(t),ae(n)}}}function Ea(t){let n,r;return{c(){n=g(),r=g()},m(e,t){c(e,n,t),c(e,r,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r)}}}function Oa(e){let t,n,r;function a(t){e[12].call(null,t)}let s={path:e[0],state:e[4],$$slots:{default:[Ea],tables:[Aa],dim:[Sa],plan:[Pa]},$$scope:{ctx:e}};return void 0!==e[3]&&(s.data=e[3]),t=new Ht({props:s}),L.push(()=>te(t,"data",a)),t.$on("datachange",e[13]),{c(){ne(t.$$.fragment)},m(e,n){re(t,e,n),r=!0},p(e,[r]){const a={};1&r&&(a.path=e[0]),16&r&&(a.state=e[4]),16398&r&&(a.$$scope={dirty:r,ctx:e}),!n&&8&r&&(n=!0,a.data=e[3],B(()=>n=!1)),t.$set(a)},i(e){r||(W(t.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),r=!1},d(e){ae(t,e)}}}function Ta(e,t,n){let r,a,{path:s}=t,{initdata:l={}}=t,o={...l},u={},i={largeur:400,hauteur:150,epaisseur:22,...l.defaults},c={...l.opt},p={...l.ui||l.opt};return e.$$set=e=>{"path"in e&&n(0,s=e.path),"initdata"in e&&n(6,l=e.initdata)},e.$$.update=()=>{2&e.$$.dirty&&n(7,c={...i,...de(p)}),128&e.$$.dirty&&n(3,o.opt=c,o),2&e.$$.dirty&&n(3,o.ui=p,o),128&e.$$.dirty&&n(8,r=(new Yn).add_name("FaÃ§ade").build(c.largeur,c.hauteur,c.epaisseur).put(0,0,0,"xyz").add_features("panneau-seul")),256&e.$$.dirty&&n(2,a=[r]),4&e.$$.dirty&&n(4,u.pieces=a,u)},[s,p,a,o,u,i,l,c,r,function(e){p.largeur=e,n(1,p)},function(e){p.hauteur=e,n(1,p)},function(e){p.epaisseur=e,n(1,p)},function(e){o=e,n(3,o),n(7,c),n(1,p),n(5,i)},function(t){T(e,t)}]}class qa extends oe{constructor(e){super(),le(this,e,Ta,Oa,s,{path:0,initdata:6})}}function La(e){let t,n,r;return n=new yt({props:{pieces:e[4]}}),{c(){t=f("div"),ne(n.$$.fragment),x(t,"slot","plan")},m(e,a){c(e,t,a),re(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.pieces=e[4]),n.$set(r)},i(e){r||(W(n.$$.fragment,e),r=!0)},o(e){V(n.$$.fragment,e),r=!1},d(e){e&&p(t),ae(n)}}}function Fa(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,b,y,w,C,k,z,j,N,P,S,A,E,O,T,q,F,M,I,R,U,J,G,D,H,Q,Z,K,X,Y,ee,se,le,oe,ue,ie,ce,pe,de,fe,me,he,ge,_e,ve,xe,be,ye,we,Ce,ke,ze,Ne,Pe,Se,Ae,Ee,Oe,Te,qe,Le,Fe,Me,Ie,Re,Ue,Be,Je,Ge,De,He,Qe,Ze,Ke,Xe,We,Ve,Ye;function et(t){e[17].call(null,t)}let tt={min:"1",def:e[6].quantite};function nt(t){e[18].call(null,t)}void 0!==e[2].quantite&&(tt.value=e[2].quantite),s=new $e({props:tt}),L.push(()=>te(s,"value",et));let rt={min:"0",def:e[6].largeur,force:e[6].force_largeur};function at(t){e[19].call(null,t)}void 0!==e[2].largeur&&(rt.value=e[2].largeur),_=new $e({props:rt}),L.push(()=>te(_,"value",nt));let st={min:"0",def:e[6].hauteur,force:e[6].force_hauteur};function lt(t){e[20].call(null,t)}void 0!==e[2].hauteur&&(st.value=e[2].hauteur),k=new $e({props:st}),L.push(()=>te(k,"value",at));let ot={min:"0",def:e[6].profondeur,force:e[6].force_profondeur};function ut(t){e[21].call(null,t)}void 0!==e[2].profondeur&&(ot.value=e[2].profondeur),A=new $e({props:ot}),L.push(()=>te(A,"value",lt));let it={min:"0",def:e[3].largeur_tir};function ct(t){e[22].call(null,t)}void 0!==e[2].largeur_tir&&(it.value=e[2].largeur_tir),R=new $e({props:it}),L.push(()=>te(R,"value",ut));let pt={min:"0",def:e[3].profondeur_tir};function dt(t){e[23].call(null,t)}void 0!==e[2].profondeur_tir&&(pt.value=e[2].profondeur_tir),Q=new $e({props:pt}),L.push(()=>te(Q,"value",ct));let ft={min:"0",def:e[3].hauteur_tir};function mt(t){e[24].call(null,t)}void 0!==e[2].hauteur_tir&&(ft.value=e[2].hauteur_tir),se=new $e({props:ft}),L.push(()=>te(se,"value",dt));let ht={min:"0",def:e[6].hauteur_tir_max};function gt(t){e[25].call(null,t)}void 0!==e[2].hauteur_tir_max&&(ht.value=e[2].hauteur_tir_max),pe=new $e({props:ht}),L.push(()=>te(pe,"value",mt));let $t={min:"0",def:e[6].profondeur_queues_arrondes};function _t(t){e[26].call(null,t)}void 0!==e[2].profondeur_queues_arrondes&&($t.value=e[2].profondeur_queues_arrondes),xe=new $e({props:$t}),L.push(()=>te(xe,"value",gt));let vt={min:"0",def:e[6].epaisseur,force:e[6].force_epaisseur};function xt(t){e[27].call(null,t)}void 0!==e[2].epaisseur&&(vt.value=e[2].epaisseur),ze=new $e({props:vt}),L.push(()=>te(ze,"value",_t));let bt={min:"0",def:e[6].epaisseur_fond};function yt(t){e[28].call(null,t)}void 0!==e[2].epaisseur_fond&&(bt.value=e[2].epaisseur_fond),Oe=new $e({props:bt}),L.push(()=>te(Oe,"value",xt));let wt={min:"0",def:e[6].profondeur_rainure};function Ct(t){e[29].call(null,t)}void 0!==e[2].profondeur_rainure&&(wt.value=e[2].profondeur_rainure),Ie=new $e({props:wt}),L.push(()=>te(Ie,"value",yt));let kt={min:"0",def:e[6].jeu_rainure};function zt(t){e[30].call(null,t)}void 0!==e[2].jeu_rainure&&(kt.value=e[2].jeu_rainure),De=new $e({props:kt}),L.push(()=>te(De,"value",Ct));let jt={def:e[6].inclure_fond};return void 0!==e[2].inclure_fond&&(jt.checked=e[2].inclure_fond),We=new je({props:jt}),L.push(()=>te(We,"checked",zt)),{c(){t=f("div"),n=f("form"),r=f("label"),a=f("span"),a.textContent="QuantitÃ© : ",ne(s.$$.fragment),o=g(),u=f("hr"),d=g(),m=f("label"),$=f("span"),$.textContent="Largeur logement   : ",ne(_.$$.fragment),b=h(" mm"),y=g(),w=f("label"),C=f("span"),C.textContent="Hauteur logement  : ",ne(k.$$.fragment),j=h(" mm"),N=g(),P=f("label"),S=f("span"),S.textContent="Profondeur logement : ",ne(A.$$.fragment),O=h(" mm"),T=g(),q=f("hr"),F=g(),M=f("label"),I=f("span"),I.textContent="Largeur   : ",ne(R.$$.fragment),J=h(" mm"),G=g(),D=f("label"),H=f("span"),H.textContent="Profondeur : ",ne(Q.$$.fragment),K=h(" mm"),X=g(),Y=f("label"),ee=f("span"),ee.textContent="Hauteur   : ",ne(se.$$.fragment),oe=h(" mm"),ue=g(),ie=f("label"),ce=f("span"),ce.textContent="Hauteur max : ",ne(pe.$$.fragment),fe=h(" mm"),me=g(),he=f("hr"),ge=g(),_e=f("label"),ve=f("span"),ve.textContent="Profondeur queues d'arrondes : ",ne(xe.$$.fragment),ye=h(" mm"),we=g(),Ce=f("label"),ke=f("span"),ke.textContent="Ãpaisseur : ",ne(ze.$$.fragment),Pe=h(" mm"),Se=g(),Ae=f("label"),Ee=f("span"),Ee.textContent="Ãpaisseur fond : ",ne(Oe.$$.fragment),qe=h(" mm"),Le=g(),Fe=f("label"),Me=f("span"),Me.textContent="Profondeur rainures : ",ne(Ie.$$.fragment),Ue=h(" mm"),Be=g(),Je=f("label"),Ge=f("span"),Ge.textContent="Jeu paneau / rainure : ",ne(De.$$.fragment),Qe=h(" mm"),Ze=g(),Ke=f("label"),Xe=f("span"),Xe.textContent="Inclure le fond",ne(We.$$.fragment),x(a,"class","svelte-1e9ss2o"),x(r,"class","svelte-1e9ss2o"),x(u,"class","svelte-1e9ss2o"),x($,"class","svelte-1e9ss2o"),x(m,"class","svelte-1e9ss2o"),x(C,"class","svelte-1e9ss2o"),x(w,"class","svelte-1e9ss2o"),x(S,"class","svelte-1e9ss2o"),x(P,"class","svelte-1e9ss2o"),x(q,"class","svelte-1e9ss2o"),x(I,"class","svelte-1e9ss2o"),x(M,"class","svelte-1e9ss2o"),x(H,"class","svelte-1e9ss2o"),x(D,"class","svelte-1e9ss2o"),x(ee,"class","svelte-1e9ss2o"),x(Y,"class","svelte-1e9ss2o"),x(ce,"class","svelte-1e9ss2o"),x(ie,"class","svelte-1e9ss2o"),x(he,"class","svelte-1e9ss2o"),x(ve,"class","svelte-1e9ss2o"),x(_e,"class","svelte-1e9ss2o"),x(ke,"class","svelte-1e9ss2o"),x(Ce,"class","svelte-1e9ss2o"),x(Ee,"class","svelte-1e9ss2o"),x(Ae,"class","svelte-1e9ss2o"),x(Me,"class","svelte-1e9ss2o"),x(Fe,"class","svelte-1e9ss2o"),x(Ge,"class","svelte-1e9ss2o"),x(Je,"class","svelte-1e9ss2o"),x(Xe,"class","svelte-1e9ss2o"),x(Ke,"class","svelte-1e9ss2o"),x(n,"class","svelte-1e9ss2o"),x(t,"class","main"),x(t,"slot","dim")},m(e,l){c(e,t,l),i(t,n),i(n,r),i(r,a),re(s,r,null),i(n,o),i(n,u),i(n,d),i(n,m),i(m,$),re(_,m,null),i(m,b),i(n,y),i(n,w),i(w,C),re(k,w,null),i(w,j),i(n,N),i(n,P),i(P,S),re(A,P,null),i(P,O),i(n,T),i(n,q),i(n,F),i(n,M),i(M,I),re(R,M,null),i(M,J),i(n,G),i(n,D),i(D,H),re(Q,D,null),i(D,K),i(n,X),i(n,Y),i(Y,ee),re(se,Y,null),i(Y,oe),i(n,ue),i(n,ie),i(ie,ce),re(pe,ie,null),i(ie,fe),i(n,me),i(n,he),i(n,ge),i(n,_e),i(_e,ve),re(xe,_e,null),i(_e,ye),i(n,we),i(n,Ce),i(Ce,ke),re(ze,Ce,null),i(Ce,Pe),i(n,Se),i(n,Ae),i(Ae,Ee),re(Oe,Ae,null),i(Ae,qe),i(n,Le),i(n,Fe),i(Fe,Me),re(Ie,Fe,null),i(Fe,Ue),i(n,Be),i(n,Je),i(Je,Ge),re(De,Je,null),i(Je,Qe),i(n,Ze),i(n,Ke),i(Ke,Xe),re(We,Ke,null),Ye=!0},p(e,t){const n={};!l&&4&t[0]&&(l=!0,n.value=e[2].quantite,B(()=>l=!1)),s.$set(n);const r={};!v&&4&t[0]&&(v=!0,r.value=e[2].largeur,B(()=>v=!1)),_.$set(r);const a={};!z&&4&t[0]&&(z=!0,a.value=e[2].hauteur,B(()=>z=!1)),k.$set(a);const o={};!E&&4&t[0]&&(E=!0,o.value=e[2].profondeur,B(()=>E=!1)),A.$set(o);const u={};8&t[0]&&(u.def=e[3].largeur_tir),!U&&4&t[0]&&(U=!0,u.value=e[2].largeur_tir,B(()=>U=!1)),R.$set(u);const i={};8&t[0]&&(i.def=e[3].profondeur_tir),!Z&&4&t[0]&&(Z=!0,i.value=e[2].profondeur_tir,B(()=>Z=!1)),Q.$set(i);const c={};8&t[0]&&(c.def=e[3].hauteur_tir),!le&&4&t[0]&&(le=!0,c.value=e[2].hauteur_tir,B(()=>le=!1)),se.$set(c);const p={};!de&&4&t[0]&&(de=!0,p.value=e[2].hauteur_tir_max,B(()=>de=!1)),pe.$set(p);const d={};!be&&4&t[0]&&(be=!0,d.value=e[2].profondeur_queues_arrondes,B(()=>be=!1)),xe.$set(d);const f={};!Ne&&4&t[0]&&(Ne=!0,f.value=e[2].epaisseur,B(()=>Ne=!1)),ze.$set(f);const m={};!Te&&4&t[0]&&(Te=!0,m.value=e[2].epaisseur_fond,B(()=>Te=!1)),Oe.$set(m);const h={};!Re&&4&t[0]&&(Re=!0,h.value=e[2].profondeur_rainure,B(()=>Re=!1)),Ie.$set(h);const g={};!He&&4&t[0]&&(He=!0,g.value=e[2].jeu_rainure,B(()=>He=!1)),De.$set(g);const $={};!Ve&&4&t[0]&&(Ve=!0,$.checked=e[2].inclure_fond,B(()=>Ve=!1)),We.$set($)},i(e){Ye||(W(s.$$.fragment,e),W(_.$$.fragment,e),W(k.$$.fragment,e),W(A.$$.fragment,e),W(R.$$.fragment,e),W(Q.$$.fragment,e),W(se.$$.fragment,e),W(pe.$$.fragment,e),W(xe.$$.fragment,e),W(ze.$$.fragment,e),W(Oe.$$.fragment,e),W(Ie.$$.fragment,e),W(De.$$.fragment,e),W(We.$$.fragment,e),Ye=!0)},o(e){V(s.$$.fragment,e),V(_.$$.fragment,e),V(k.$$.fragment,e),V(A.$$.fragment,e),V(R.$$.fragment,e),V(Q.$$.fragment,e),V(se.$$.fragment,e),V(pe.$$.fragment,e),V(xe.$$.fragment,e),V(ze.$$.fragment,e),V(Oe.$$.fragment,e),V(Ie.$$.fragment,e),V(De.$$.fragment,e),V(We.$$.fragment,e),Ye=!1},d(e){e&&p(t),ae(s),ae(_),ae(k),ae(A),ae(R),ae(Q),ae(se),ae(pe),ae(xe),ae(ze),ae(Oe),ae(Ie),ae(De),ae(We)}}}function Ma(e){let t,n,r;return n=new Mn({props:{pieces:e[4]}}),{c(){t=f("div"),ne(n.$$.fragment),x(t,"slot","tables")},m(e,a){c(e,t,a),re(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.pieces=e[4]),n.$set(r)},i(e){r||(W(n.$$.fragment,e),r=!0)},o(e){V(n.$$.fragment,e),r=!1},d(e){e&&p(t),ae(n)}}}function Ia(t){let n,r;return{c(){n=g(),r=g()},m(e,t){c(e,n,t),c(e,r,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(r)}}}function Ra(e){let t,n,r;function a(t){e[31].call(null,t)}let s={state:e[5],path:e[0],$$slots:{default:[Ia],tables:[Ma],dim:[Fa],plan:[La]},$$scope:{ctx:e}};return void 0!==e[1]&&(s.data=e[1]),t=new Ht({props:s}),L.push(()=>te(t,"data",a)),t.$on("datachange",e[32]),{c(){ne(t.$$.fragment)},m(e,n){re(t,e,n),r=!0},p(e,r){const a={};32&r[0]&&(a.state=e[5]),1&r[0]&&(a.path=e[0]),28&r[0]|8&r[1]&&(a.$$scope={dirty:r,ctx:e}),!n&&2&r[0]&&(n=!0,a.data=e[1],B(()=>n=!1)),t.$set(a)},i(e){r||(W(t.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),r=!1},d(e){ae(t,e)}}}function Ua(e,t,n){let r,a,s,l,o,u,i,c,p,{path:d}=t,{initdata:f={}}=t,m={...f},h={quantite:1,largeur:400,hauteur:150,hauteur_tir_max:150,profondeur:500,epaisseur:15,profondeur_rainure:9,profondeur_queues_arrondes:10,jeu_rainure:1,jeu_lateral:6,jeu_dessous:28,jeu_dessus:7,epaisseur_fond:9,inclure_fond:!0,...f.defaults},g={...f.opt},$={...f.ui||f.opt},_={},v={};return e.$$set=e=>{"path"in e&&n(0,d=e.path),"initdata"in e&&n(7,f=e.initdata)},e.$$.update=()=>{4&e.$$.dirty[0]&&n(3,_=function(e){return{largeur_tir:e.largeur-2*e.jeu_lateral,profondeur_tir:e.profondeur-e.profondeur%50,hauteur_tir:Math.min(e.hauteur_tir_max,e.hauteur-e.jeu_dessous-e.jeu_dessus)}}({...h,...de($)})),12&e.$$.dirty[0]&&n(8,g={...h,..._,...de($)}),256&e.$$.dirty[0]&&n(1,m.opt=g,m),4&e.$$.dirty[0]&&n(1,m.ui=$,m),256&e.$$.dirty[0]&&n(9,r=(new Yn).add_name("CotÃ©").add_features("cote").build(g.profondeur_tir-2*(g.epaisseur-g.profondeur_queues_arrondes),g.hauteur_tir,g.epaisseur)),768&e.$$.dirty[0]&&n(10,a=r.add_name("gauche").put(g.jeu_lateral,g.jeu_dessous,g.epaisseur-g.profondeur_queues_arrondes,"zyx")),768&e.$$.dirty[0]&&n(11,s=r.add_name("droit").put(g.jeu_lateral+g.largeur_tir-g.epaisseur,g.jeu_dessous,g.epaisseur-g.profondeur_queues_arrondes,"zyx")),256&e.$$.dirty[0]&&n(12,l=(new Yn).add_name("Face").add_features("cote").build(g.largeur_tir,g.hauteur_tir,g.epaisseur)),4352&e.$$.dirty[0]&&n(13,o=l.add_name("avant").put(g.jeu_lateral,g.jeu_dessous,0,"xyz")),4352&e.$$.dirty[0]&&n(14,u=l.add_name("arriÃ¨re").put(g.jeu_lateral,g.jeu_dessous,g.profondeur_tir-g.epaisseur,"xyz")),256&e.$$.dirty[0]&&n(15,i=(new Yn).add_name("Fond tiroir").add_features("panneau").build(g.largeur_tir-2*(g.epaisseur-g.profondeur_rainure+g.jeu_rainure),g.profondeur_tir-(g.epaisseur-g.profondeur_rainure+g.jeu_rainure),g.epaisseur_fond).put(g.jeu_lateral+g.epaisseur-g.profondeur_rainure+g.jeu_rainure,g.jeu_dessous,g.epaisseur-g.profondeur_rainure+g.jeu_rainure,"xzy")),60672&e.$$.dirty[0]&&n(16,c=[g.inclure_fond?i:null,o,u,a,s].filter(e=>null!=e).map(e=>e.multiply_que(g.quantite))),65538&e.$$.dirty[0]&&n(4,p=new kt(c,"Tiroir "+m.name,"Tiroir")),16&e.$$.dirty[0]&&n(5,v.pieces_group=p,v)},[d,m,$,_,p,v,h,f,g,r,a,s,l,o,u,i,c,function(e){$.quantite=e,n(2,$)},function(e){$.largeur=e,n(2,$)},function(e){$.hauteur=e,n(2,$)},function(e){$.profondeur=e,n(2,$)},function(e){$.largeur_tir=e,n(2,$)},function(e){$.profondeur_tir=e,n(2,$)},function(e){$.hauteur_tir=e,n(2,$)},function(e){$.hauteur_tir_max=e,n(2,$)},function(e){$.profondeur_queues_arrondes=e,n(2,$)},function(e){$.epaisseur=e,n(2,$)},function(e){$.epaisseur_fond=e,n(2,$)},function(e){$.profondeur_rainure=e,n(2,$)},function(e){$.jeu_rainure=e,n(2,$)},function(e){$.inclure_fond=e,n(2,$)},function(e){m=e,n(1,m),n(8,g),n(2,$),n(6,h),n(3,_)},function(t){T(e,t)}]}class Ba extends oe{constructor(e){super(),le(this,e,Ua,Ra,s,{path:0,initdata:7},[-1,-1])}}function Ja(e){let t,n,a,s,l,o,u,d,m,$,b,w,z,j,N,P,S,A,E,O,T,q,L,F,M,I,R,B,J,G;return s=new We({props:{data:e[2]}}),{c(){t=f("div"),n=f("select"),a=f("option"),a.textContent="ParamÃ¨tres",ne(s.$$.fragment),l=g(),o=f("button"),o.textContent="Effacer",u=g(),d=f("button"),d.textContent="Enregistrer",m=g(),$=f("button"),$.textContent="Enregistrer sous...",b=g(),w=f("button"),w.textContent="Ouvrir...",z=g(),j=h(e[0]),N=g(),P=f("a"),P.textContent="â",S=g(),A=f("div"),E=f("small"),E.textContent=`(version ${ue})`,O=g(),T=f("label"),q=h("Agencement :\n        "),L=f("select"),F=f("option"),F.textContent="Horizontal",M=f("option"),M.textContent="Vertical",I=g(),R=f("button"),R.textContent="ParamÃ¨tres...",a.__value="#/settings",a.value=a.__value,x(n,"class","tree-select svelte-1nrxsfu"),x(o,"class","svelte-1nrxsfu"),x(d,"class","svelte-1nrxsfu"),x($,"class","svelte-1nrxsfu"),x(w,"class","svelte-1nrxsfu"),x(P,"href","@"),F.__value="horizontal",F.value=F.__value,M.__value="vertical",M.value=M.__value,x(L,"class","svelte-1nrxsfu"),void 0===e[3]&&U(()=>e[13].call(L)),C(T,"display","inline"),x(R,"class","svelte-1nrxsfu"),C(A,"float","right"),x(t,"class","toolbar svelte-1nrxsfu")},m(r,p){c(r,t,p),i(t,n),i(n,a),re(s,n,null),i(t,l),i(t,o),i(t,u),i(t,d),i(t,m),i(t,$),i(t,b),i(t,w),i(t,z),i(t,j),i(t,N),i(t,P),i(t,S),i(t,A),i(A,E),i(A,O),i(A,T),i(T,q),i(T,L),i(L,F),i(L,M),k(L,e[3]),i(A,I),i(A,R),B=!0,J||(G=[_(n,"change",Qa),_(o,"click",e[6]),_(d,"click",e[9]),_($,"click",e[8]),_(w,"click",e[10]),_(P,"click",v(e[7])),_(L,"change",e[13]),_(R,"click",Za)],J=!0)},p(e,t){const n={};4&t&&(n.data=e[2]),s.$set(n),(!B||1&t)&&y(j,e[0]),8&t&&k(L,e[3])},i(e){B||(W(s.$$.fragment,e),B=!0)},o(e){V(s.$$.fragment,e),B=!1},d(e){e&&p(t),ae(s),J=!1,r(G)}}}function Ga(e){let t,n,a,s,l,o,u,d,m,$,b,w,C,z,j,N,P,S,A,E,O,T,q,L;return{c(){t=f("div"),n=f("select"),a=f("option"),a.textContent="Agencement horizontal",s=f("option"),s.textContent="Agencement vertical",l=g(),o=f("button"),o.textContent="ParamÃ¨tres...",u=g(),d=f("button"),d.textContent="Enregistrer",m=g(),$=f("button"),$.textContent="Enregistrer sous...",b=g(),w=f("button"),w.textContent="Nouveau",C=g(),z=f("button"),z.textContent="Ouvrir...",j=g(),N=f("p"),P=h(e[0]),S=g(),A=f("a"),A.textContent="â",E=g(),O=f("p"),T=f("small"),T.textContent=`(version ${ue})`,a.__value="horizontal",a.value=a.__value,s.__value="vertical",s.value=s.__value,x(n,"class","svelte-1nrxsfu"),void 0===e[3]&&U(()=>e[14].call(n)),x(o,"class","svelte-1nrxsfu"),x(d,"class","svelte-1nrxsfu"),x($,"class","svelte-1nrxsfu"),x(w,"class","svelte-1nrxsfu"),x(z,"class","svelte-1nrxsfu"),x(t,"class","open-save-buttons svelte-1nrxsfu"),x(A,"href","@")},m(r,p){c(r,t,p),i(t,n),i(n,a),i(n,s),k(n,e[3]),i(t,l),i(t,o),i(t,u),i(t,d),i(t,m),i(t,$),i(t,b),i(t,w),i(t,C),i(t,z),c(r,j,p),c(r,N,p),i(N,P),i(N,S),i(N,A),c(r,E,p),c(r,O,p),i(O,T),q||(L=[_(n,"change",e[14]),_(o,"click",Za),_(d,"click",e[9]),_($,"click",e[8]),_(w,"click",e[6]),_(z,"click",e[10]),_(A,"click",v(e[7]))],q=!0)},p(e,t){8&t&&k(n,e[3]),1&t&&y(P,e[0])},d(e){e&&p(t),e&&p(j),e&&p(N),e&&p(E),e&&p(O),q=!1,r(L)}}}function Da(t){let n,r,a,s;return{c(){n=f("li"),r=f("a"),r.textContent="ParamÃ¨tres...",x(r,"href","@")},m(e,t){c(e,n,t),i(n,r),a||(s=_(r,"click",v(Za)),a=!0)},p:e,d(e){e&&p(n),a=!1,s()}}}function Ha(e){let t,n,r,a,s,l,o,u,d,m,$,_,v,b,w,C,k,z,j,N,P,S,A,E=JSON.stringify(e[2],null,2)+"",O="horizontal"==e[3]&&Ja(e),T="vertical"==e[3]&&Ga(e);o=new Ge({props:{data:e[2]}});let q="vertical"==e[3]&&Da();function F(t){e[16].call(null,t)}$=new Qn({props:{name:"Meuble",initdata:e[1]}}),$.$on("datachange",e[11]);let M={};return void 0!==e[4]&&(M.settings=e[4]),N=new Fe({props:M}),L.push(()=>te(N,"settings",F)),{c(){t=f("div"),O&&O.c(),n=g(),r=f("div"),T&&T.c(),a=g(),s=f("ul"),l=f("li"),ne(o.$$.fragment),u=g(),q&&q.c(),d=g(),m=f("div"),ne($.$$.fragment),_=g(),v=f("div"),b=f("details"),w=f("summary"),w.textContent="Contenu du fichier",C=g(),k=f("pre"),z=h(E),j=g(),ne(N.$$.fragment),x(r,"class","tree svelte-1nrxsfu"),x(k,"id","json"),x(v,"class","routable"),x(m,"class","main svelte-1nrxsfu"),x(t,"class",S="root agencement-"+e[3]+" svelte-1nrxsfu")},m(p,f){c(p,t,f),O&&O.m(t,null),i(t,n),i(t,r),T&&T.m(r,null),i(r,a),i(r,s),i(s,l),re(o,l,null),i(s,u),q&&q.m(s,null),i(t,d),i(t,m),re($,m,null),i(m,_),i(m,v),i(v,b),i(b,w),i(b,C),i(b,k),i(k,z),e[15](v),i(m,j),re(N,m,null),A=!0},p(e,[l]){"horizontal"==e[3]?O?(O.p(e,l),8&l&&W(O,1)):(O=Ja(e),O.c(),W(O,1),O.m(t,n)):O&&(K(),V(O,1,1,()=>{O=null}),X()),"vertical"==e[3]?T?T.p(e,l):(T=Ga(e),T.c(),T.m(r,a)):T&&(T.d(1),T=null);const u={};4&l&&(u.data=e[2]),o.$set(u),"vertical"==e[3]?q?q.p(e,l):(q=Da(),q.c(),q.m(s,null)):q&&(q.d(1),q=null);const i={};2&l&&(i.initdata=e[1]),$.$set(i),(!A||4&l)&&E!==(E=JSON.stringify(e[2],null,2)+"")&&y(z,E);const c={};!P&&16&l&&(P=!0,c.settings=e[4],B(()=>P=!1)),N.$set(c),(!A||8&l&&S!==(S="root agencement-"+e[3]+" svelte-1nrxsfu"))&&x(t,"class",S)},i(e){A||(W(O),W(o.$$.fragment,e),W($.$$.fragment,e),W(N.$$.fragment,e),A=!0)},o(e){V(O),V(o.$$.fragment,e),V($.$$.fragment,e),V(N.$$.fragment,e),A=!1},d(n){n&&p(t),O&&O.d(),T&&T.d(),ae(o),q&&q.d(),ae($),e[15](null),ae(N)}}}function Qa(e){window.location.hash=e.target.value}function Za(){window.location.hash="#/settings"}function Ka(t,n,r){E("App-components",{Porte:dr,Caisson:ba,Ensemble:Qn,Etagere:Na,Facade:qa,Tiroir:Ba});let a=`meuble_${(new Date).toISOString().slice(0,16).replace(/T/,"_").replace(/:/,"")}.json`,l={},o={},u="horizontal",i=function(t,n=e){let r;const a=[];function l(e){if(s(t,e)&&(t=e,r)){const e=!ie.length;for(let e=0;e<a.length;e+=1){const n=a[e];n[1](),ie.push(n,t)}if(e){for(let e=0;e<ie.length;e+=2)ie[e][0](ie[e+1]);ie.length=0}}}return{set:l,update:function(e){l(e(t))},subscribe:function(s,o=e){const u=[s,o];return a.push(u),1===a.length&&(r=n(l)||e),s(t),()=>{const e=a.indexOf(u);-1!==e&&a.splice(e,1),0===a.length&&(r(),r=null)}}}}(JSON.parse(localStorage.getItem("calcul-meubles-settings")||"{}"));E("settings",i),i.subscribe(e=>{e.agencement&&u!=e.agencement&&r(3,u=e.agencement),r(2,o.settings=e,o),localStorage.setItem("calcul-meubles-settings",JSON.stringify(e))});let c,p=JSON.parse(localStorage.getItem("calcul-meubles-data")||"null"),d=localStorage.getItem("calcul-meubles-file-data");function f(){let e=prompt("Nom du fichier",a);return null!=e&&(r(0,a=e.replace(/\.json$/,"")+".json"),!0)}function m(){if(0==o.children.length)return!0;let e=JSON.stringify(o,null,2);return e==d||(console.log("isSaved() = false",e,d),!1)}function h(e){if(!e&&m())return"already-saved";let t=JSON.stringify(o,null,2);if(e&&!f())return"cancelled";let n=new window.File([t],a,{type:"application/json"}),s=URL.createObjectURL(n);try{let e=document.createElement("a");e.href=s,e.style.display="none",e.setAttribute("download",a),document.body.appendChild(e),e.click(),document.body.removeChild(e),localStorage.removeItem("calcul-meubles-data"),r(12,d=t)}finally{URL.revokeObjectURL(s)}}return p&&(l=p.data,a=p.filename),pe(e=>e.root?[c]:[]),t.$$.update=()=>{2&t.$$.dirty&&r(2,o={...l}),2&t.$$.dirty&&console.log("App initdata =",l),24&t.$$.dirty&&i.update(e=>({...e,agencement:u})),5&t.$$.dirty&&localStorage.setItem("calcul-meubles-data",JSON.stringify({data:o,filename:a})),4096&t.$$.dirty&&localStorage.setItem("calcul-meubles-file-data",d)},[a,l,o,u,i,c,function(){if(!m()){if(!confirm("Fichier non enregistrÃ©, voulez-vous continuer et perdre les modifications en cours?"))return;localStorage.setItem("calcul-meubles-data-backup",localStorage.getItem("calcul-meubles-data")),localStorage.setItem("calcul-meubles-file-data-backup",localStorage.getItem("calcul-meubles-file-data"))}localStorage.removeItem("calcul-meubles-data"),localStorage.removeItem("calcul-meubles-file-data"),window.location.reload()},f,function(){h(!0)},function(){"already-saved"==h(!1)&&alert("DÃ©jÃ  enregistrÃ©")},function(){if(!m())return void alert("Fichier non enregistrÃ©, veuillez enregistrer le fichier avant d'en ouvrir un nouveau.");let e=document.createElement("input");e.style.display="none",e.setAttribute("type","file"),e.addEventListener("change",e=>{let t=e.target.files[0];if(!t)return;let n=new FileReader;n.onload=e=>{r(1,l=JSON.parse(e.target.result)),i.set(l.settings||{}),r(0,a=t.name),r(12,d=e.target.result)},n.readAsText(t)},!1),document.body.appendChild(e),e.click(),document.body.removeChild(e)},function(e){r(2,o=e.detail.data)},d,function(){u=z(this),r(3,u)},function(){u=z(this),r(3,u)},function(e){L[e?"unshift":"push"](()=>{c=e,r(5,c)})},function(e){i=e,r(4,i)}]}return new class extends oe{constructor(e){super(),le(this,e,Ka,Ha,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
